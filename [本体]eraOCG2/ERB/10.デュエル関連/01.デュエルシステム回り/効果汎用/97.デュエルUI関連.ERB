;カードUI――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――
@CARD_UI(選択カード_ID,덱플래그)
#DIM DYNAMIC 選択カード_ID
#DIM DYNAMIC 参照先
#DIM DYNAMIC 덱플래그
#DIM DYNAMIC 효과종류
#DIM DYNAMIC 설정カラー
#DIM DYNAMIC 캐릭터番号
#DIM DYNAMIC トークン보존,10
#DIM DYNAMIC カウンタ
SIF 덱플래그 != 2
	CALLFORM CARD_UI_RESET


$RESETVIEW

TRYCALLFORM CARD_{選択カード_ID}, "종류"
IF RESULT == 1
	설정カラー = C_MONS_BR
ELSEIF RESULT == 2
	설정カラー = C_BASM_BR
ELSEIF RESULT == 의식
	설정カラー = C_GISK_BLUE
ELSEIF RESULT == 융합
	설정カラー = C_FUSE_PUR
ELSEIF RESULT == 싱크로
	설정カラー = C_SYN_WHITE
ELSEIF RESULT == 엑시즈
	설정カラー = C_XYZ_BLACK
ELSEIF RESULT == 링크
	설정カラー = C_LINK_BLUE
ELSEIF RESULT == 초차원
	설정カラー = C_PSY_RED
ELSEIF RESULT == システム
	설정カラー = C_WHITE
ELSEIF RESULT >= 20 && RESULT < 30
	설정カラー = C_MAGIC_G
ELSEIF RESULT >= 30
	설정カラー = C_TRAP_PUR
ENDIF


CALL COLOR_LINE(설정カラー)
PRINTFORML ■ 카드 상세 설명
CALL COLOR_LINE(설정カラー)
VARSET RESULTS
CALL PRINT_STATE_DUEL(選択カード_ID)
SIF RESULT == 1
	CALL COLOR_LINE(설정カラー)

TRYCALLFORM CARDNAME_{選択カード_ID}, "名前"
PRINTFORM <<%RESULTS%>>
TRYCALLFORM CARD_{選択カード_ID}, "속성"
SELECTCASE RESULT
CASE 1
	SETCOLOR C_LIGHT_T
	PRINTFORM （%"빛",2%）
CASE 2
	SETCOLOR C_DARK_T
	PRINTFORM （%"어둠",2%）
CASE 3
	SETCOLOR C_GROUND_T
	PRINTFORM （%"땅",2%）
CASE 4
	SETCOLOR C_WATER_T
	PRINTFORM （%"물",2%）
CASE 5
	SETCOLOR C_FIRE_T
	PRINTFORM （%"화염",2%）
CASE 6
	SETCOLOR C_WIND_T
	PRINTFORM （%"바람",2%）
CASE 7
	SETCOLOR C_LIGHT_T
	PRINTFORM （%"신",2%）
ENDSELECT
RESETCOLOR
IF RESULT:1 != 0
	IF RESULT:1== 1
		SETCOLOR C_LIGHT_T
		PRINTFORM （%"빛",2%）
	ELSEIF RESULT:1== 2
		SETCOLOR C_DARK_T
		PRINTFORM （%"어둠",2%）
	ELSEIF RESULT:1== 3
		SETCOLOR C_GROUND_T
		PRINTFORM （%"땅",2%）
	ELSEIF RESULT:1== 4
		SETCOLOR C_WATER_T
		PRINTFORM （%"물",2%）
	ELSEIF RESULT:1== 5
		SETCOLOR C_FIRE_T
		PRINTFORM （%"화염",2%）
	ELSEIF RESULT:1== 6
		SETCOLOR C_WIND_T
		PRINTFORM （%"바람",2%）
	ELSEIF RESULT:1== 7
		SETCOLOR C_LIGHT_T
		PRINTFORM （%"신",2%）
	ENDIF
	RESETCOLOR
ENDIF

TRYCALLFORM CARDNAME_{選択カード_ID}, "武装名"
IF RESULTS != ""
	PRINTFORM /
	SETCOLOR C_PSY_RED
	PRINTFORM 웨폰：<<%RESULTS%>>
	RESETCOLOR
ENDIF
TRYCALLFORM CARDNAME_{選択カード_ID}, "要塞名"
IF RESULTS != ""
	PRINTFORM /
	SETCOLOR C_MAGIC_G
	PRINTFORM 포트：<<%RESULTS%>>
	RESETCOLOR
ENDIF



PRINTL
CALL COLOR_LINE(설정カラー)
PRINT 소속 카테고리:
TRYCALLFORM CARDNAME_{選択カード_ID}, "カテゴリ"
SIF RESULTS:0 != ""
	PRINTFORM 【%RESULTS:0%】
SIF RESULTS:1 != ""
	PRINTFORM 【%RESULTS:1%】
SIF RESULTS:2 != ""
	PRINTFORM 【%RESULTS:2%】
SIF RESULTS:3 != ""
	PRINTFORM 【%RESULTS:3%】
PRINTL



TRYCALLFORM CARD_{選択カード_ID}, "종류"
IF INRANGE (RESULT, 1, 10)
	CALL COLOR_LINE(설정カラー)
	TRYCALLFORM CARD_{選択カード_ID}, "レベル"
	PRINTFORM （★）× {RESULT,2,RIGHT}
	TRYCALLFORM CARD_{選択カード_ID}, "攻撃力"	
	PRINTFORM 　　　　（공）　{(RESULT),6,RIGHT}
	TRYCALLFORM CARD_{選択カード_ID}, "守備力"	
	PRINTFORM （수）　{(RESULT),6,RIGHT}

	VARSET RESULT
	TRYCALLFORM CARD_{選択カード_ID}, "성별"
	캐릭터番号 = NO_TO_CHARANUM(選択カード_ID)
	IF 캐릭터番号 >= 1 && オプション_성별
		RESULT = TALENT:캐릭터番号:성별
	ENDIF
	;〇属と出るのが余計だったので個別作製
	IF RESULT == 牝性
		SETCOLOR C_PINK
		PRINTFORM （%"♀",2%）
	ELSEIF RESULT == 雄性
		SETCOLOR C_BLUE
		PRINTFORM （%"♂",2%）
	ELSEIF RESULT == ふたなり
		SETCOLOR C_P_PURPLE
		PRINTFORM （%"♀♂",2%）
	ELSE
		PRINTFORM （%"성별없음",2%）
	ENDIF	
	RESETCOLOR

	PRINTL
ENDIF
CALL COLOR_LINE(설정カラー)
SIF 選択カード_ID != 999990
	PRINTFORM 【
TRYCALLFORM CARD_{選択カード_ID}, "종족"	
SIF RESULT
	PRINTFORM %GET_TALENTNAME(191,RESULT),12,LEFT%/　
SIF RESULT:1
	PRINTFORM %GET_TALENTNAME(191,RESULT:1),12,LEFT%/　



TRYCALLFORM CARD_{選択カード_ID}, "종류"
IF RESULT == 1
	PRINTFORM 효과
ELSEIF RESULT == 2
	PRINTFORM 통상
ELSEIF RESULT == 의식
	PRINTFORM 의식
ELSEIF RESULT == 융합
	PRINTFORM 융합
ELSEIF RESULT == 싱크로
	PRINTFORM 싱크로
ELSEIF RESULT == 엑시즈
	PRINTFORM 엑시즈
ELSEIF RESULT == 링크
	PRINTFORM 링크
ELSEIF RESULT == 초차원
	PRINTFORM 초차원


ELSEIF RESULT > 20 && RESULT <= 30
	IF RESULT == 通常마법
		PRINTFORM 통상마법
	ELSEIF RESULT == 지속마법
		PRINTFORM 지속마법
	ELSEIF RESULT == 装備마법
		PRINTFORM 장착마법
	ELSEIF RESULT == 速攻마법
		PRINTFORM 속공마법
	ELSEIF RESULT == フィールド
		PRINTFORM 필드
	ENDIF
ELSEIF RESULT > 30
	IF RESULT == 通常함정
		PRINTFORM 통상함정
	ELSEIF RESULT == 지속함정
		PRINTFORM 지속함정
	ELSE
		PRINTFORM 그 외
	ENDIF
ELSE
	PRINTFORM 그 외
ENDIF
VARSET RESULT
TRYCALLFORM CARD_{選択カード_ID}, "튜너"
IF RESULT >= 1
	PRINTFORM /　튜너　　
ENDIF

VARSET RESULT
TRYCALLFORM CARD_{選択カード_ID}, "分割"
;PRINTFORM ID:{選択カード_ID}　分割 {RESULT}
IF RESULT == 通常モン
	PRINTFORM /　효과없음
ELSEIF RESULT == 효과モン
	PRINTFORM /　듀얼
ELSEIF RESULT == 지속마법
	SETCOLOR C_MAGIC_G
	PRINTFORM /　펜듈럼
ELSEIF RESULT == 装備마법
	SETCOLOR C_MAGIC_G
	PRINTFORM /　유니온
ENDIF
RESETCOLOR

SIF 選択カード_ID != 999990
	PRINTFORM 】

PRINTL

CALL COLOR_LINE(설정カラー)
TRYCALLFORM CARD_EXPLANATION_{選択カード_ID}(효과종류)
PRINTL
CALL COLOR_LINE(설정カラー)
IF 덱플래그 == 1
	VARSET RESULTS
	PRINTFORM [0] - 돌아간다
	PRINTFORM %"",10%
	VARSET RESULT
	TRYCALLFORM CARD_{選択カード_ID}, "生成カード"
	SIF RESULT >= 1
		PRINTFORM [10] - 생성 카드 확인
		

	IF ENUMFILES("RESOURCES/DUEL", @"{選択カード_ID}_DUEL_2*")
		PRINTFORM [2] - 카드 화상 변경
	ENDIF
	PRINTL
	BINPUT
	IF RESULT == 10
		TRYCALLFORM CARD_{選択カード_ID}, "生成カード"
		トークン보존:0 = RESULT
		トークン보존:1 = RESULT:1
		トークン보존:2 = RESULT:2
		トークン보존:3 = RESULT:3
		トークン보존:4 = RESULT:4
		FOR カウンタ,0,5
			IF トークン보존:カウンタ >= 1
				$LOOP_BACK_HERE
				TRYCALLFORM CARD_UI(トークン보존:カウンタ,2)
				PRINTFORM [0] - 다음 카드
				PRINTL
				BINPUT
				IF RESULT == 1000
					CALL PRINT_STATE_DUEL(トークン보존:カウンタ,2)
				WAIT
					GOTO LOOP_BACK_HERE
				ENDIF
			ENDIF
		NEXT
		GOTO RESETVIEW
		
	ELSEIF RESULT == 2

		IF ENUMFILES("RESOURCES/DUEL", @"{選択カード_ID}_DUEL_{(カード화상切り替え:選択カード_ID + 2)}*")
			カード화상切り替え:選択カード_ID += 1
		ELSE
			カード화상切り替え:選択カード_ID = 0
		ENDIF
		
		GOTO RESETVIEW

	ELSEIF RESULT == 1000
		CALL PRINT_STATE_DUEL(選択カード_ID,2)
		WAIT
		GOTO RESETVIEW
	ENDIF
	RETURN 0
ENDIF




@CARD_SUMINFO(듀얼리스트)
#DIM DYNAMIC カウンタ
#DIM DYNAMIC カウンタB
#DIMS DYNAMIC 듀얼리스트
#DIM DYNAMIC 現攻撃力
#DIM DYNAMIC 現守備力
#DIM DYNAMIC 설정色
#DIM DYNAMIC 설정色２
#DIM DYNAMIC MAX_M_存在
#DIM DYNAMIC MAX_L_存在
#DIM DYNAMIC MAX_R_存在
#DIMS DYNAMIC カード名
;真ん中のカード
SIF GETVAR(@"%듀얼리스트%_MZ_MAX成立:2") >= 1
	MAX_M_存在 = 1
SIF GETVAR(@"%듀얼리스트%_MZ_MAX成立:1") >= 1
	MAX_L_存在 = 1
SIF GETVAR(@"%듀얼리스트%_MZ_MAX成立:3") >= 1
	MAX_R_存在 = 1



FOR カウンタB,0,10
	IF ターンプレイヤー == "자신"
		SETCOLOR C_L_BLUE
	ELSE
		SETCOLOR C_L_RED
	ENDIF
;	SETCOLOR C_L_BLUE
;	SIF カウンタB == 0 || カウンタB == 2 || カウンタB == 4 || カウンタB == 6 || カウンタB == 8 || カウンタB == 1 || カウンタB == 3 || カウンタB == 5 || カウンタB == 7
	PRINTFORM 　｜
	RESETCOLOR

	FOR カウンタ,0,5
		설정色 = COLOR_FROMRGB(192, 192, 192)
		설정色２ = COLOR_FROMRGB(192, 192, 192)
		IF GETVAR(@"%듀얼리스트%_필드:カウンタ") != -1			
			TRYCALLFORM CARD_{GETVAR(@"%듀얼리스트%_필드:カウンタ")}, "종류"
			IF RESULT == 0
				RESETCOLOR
			ELSEIF RESULT <= 10
				IF RESULT == 효과モン
					설정色 = C_MONS_BR
				ELSEIF RESULT == 通常モン
					설정色 = C_BASM_BR
				ELSEIF RESULT == 의식
					설정色 = C_GISK_BLUE
				ELSEIF RESULT == 융합
					설정色 = C_FUSE_PUR
				ELSEIF RESULT == 싱크로
					설정色 = C_SYN_WHITE
				ELSEIF RESULT == 엑시즈
					설정色 = C_XYZ_BLACK
				ELSEIF RESULT == 링크
					설정色 = C_LINK_BLUE
				ELSEIF RESULT == 초차원
					설정色 = C_PSY_RED
				ENDIF
			ELSEIF RESULT >= 20 && RESULT < 30
				설정色 = C_MAGIC_G
			ELSEIF RESULT >= 30
				설정色 = C_TRAP_PUR
			ENDIF
			IF GETVAR(@"%듀얼리스트%_MZ_表:カウンタ") == 3
				설정色 = C_L_GRAY
			ENDIF
			IF GETVAR(@"%듀얼리스트%_필드:カウンタ") == 使用불가ゾーン
				설정色 = C_L_GRAY
			ENDIF
			TRYCALLFORM CARD_{GETVAR(@"%듀얼리스트%_필드:カウンタ")}, "分割"
			IF RESULT == 0
				설정色２ = 설정色
			ELSEIF RESULT <= 10
				IF RESULT == 효과モン
					설정色２ = C_MONS_BR
				ELSEIF RESULT == 通常モン
					설정色２ = C_BASM_BR
				ELSEIF RESULT == 의식
					설정色２ = C_GISK_BLUE
				ELSEIF RESULT == 융합
					설정色２ = C_FUSE_PUR
				ELSEIF RESULT == 싱크로
					설정色２ = C_SYN_WHITE
				ELSEIF RESULT == 엑시즈
					설정色２ = C_XYZ_BLACK
				ELSEIF RESULT == 링크
					설정色２ = C_LINK_BLUE
				ELSEIF RESULT == 초차원
					설정色２ = C_PSY_RED
				ENDIF
			ELSEIF RESULT >= 20 && RESULT < 30
				설정色２ = C_MAGIC_G
				SIF RESULT == 유니온
					설정色２ = C_ORANGE
				SIF RESULT == KNDN
					설정色２ = C_PSY_RED
			ELSEIF RESULT >= 30
				설정色２ = C_TRAP_PUR
			ENDIF
			IF GETVAR(@"%듀얼리스트%_MZ_表:カウンタ") == 3
				설정色２ = C_L_GRAY
			ENDIF
		ENDIF
		IF !GROUPMATCH(カウンタB,0,9)
			VARSET RESULT
			SIF GROUPMATCH(カウンタB,1,2,3,4)
				SETCOLOR 설정色
			SIF GROUPMATCH(カウンタB,5,6,7,8)
				SETCOLOR 설정色２

			IF GROUPMATCH(カウンタ,2,3)
				SELECTCASE カウンタ
				CASE 2
					IF MAX_L_存在 == 1 && MAX_M_存在 == 1
						PRINTFORM %"",2%
					ELSE
						PRINTFORM ｜
					ENDIF
				CASE 3		
					IF MAX_M_存在 == 1 && MAX_R_存在 == 1
						PRINTFORM %"",2%
					ELSE
						PRINTFORM ｜
					ENDIF
				ENDSELECT
			ELSE
				PRINTFORM ｜
			ENDIF

			RESETCOLOR
		ENDIF

		VARSET RESULT
		VARSET RESULTS
		IF GETVAR(@"%듀얼리스트%_필드:カウンタ") == -1
			IF カウンタB == 0
				PRINTFORM ┌────────────┐
			ELSEIF カウンタB == 9
				PRINTFORM └────────────┘

			ELSEIF GROUPMATCH(カウンタB,1,3,5,7)
				SETCOLOR C_GRAY
				PRINTFORM ／　／　／　／　／　／　
			ELSEIF GROUPMATCH(カウンタB,2,4,6,8)
				SETCOLOR C_GRAY
				PRINTFORM 　／　／　／　／　／　／
			ENDIF
			RESETCOLOR
		ELSEIF GETVAR(@"%듀얼리스트%_필드:カウンタ") == 使用불가ゾーン

			IF カウンタB == 0
				PRINTFORM ┌────────────┐
			ELSEIF カウンタB == 9
				PRINTFORM └────────────┘

			ELSEIF INRANGE(カウンタB,1,8)
				SETCOLOR C_RED
				SIF カウンタB == 1
					PRINTFORM 　＼＼　　　　　　／／　
				SIF カウンタB == 2
					PRINTFORM 　　＼＼　　　　／／　　
				SIF カウンタB == 3
					PRINTFORM 　　　＼＼　　／／　　　
				SIF カウンタB == 4
					PRINTFORM 　　　 [사용불가] 　　　
				SIF カウンタB == 5
					PRINTFORM 　　[CANNOT BE USED]　　
				SIF カウンタB == 6
					PRINTFORM 　　　／／　　＼＼　　　
				SIF カウンタB == 7
					PRINTFORM 　　／／　　　　＼＼　　
				SIF カウンタB == 8
					PRINTFORM 　／／　　　　　　＼＼　
			ENDIF
			RESETCOLOR



		ELSEIF GETVAR(@"%듀얼리스트%_MZ_表:カウンタ") == 3 && 듀얼리스트 == "상대"
			IF カウンタB == 0
				SETCOLOR C_L_GRAY
				PRINTFORM ┌────────────┐
			ELSEIF カウンタB == 9
				SETCOLOR C_L_GRAY
				PRINTFORM └────────────┘
			ELSEIF カウンタB == 1
				FONTSTYLE 8
				PRINTFORM %"UNKNOWN",20,LEFT%
				FONTSTYLE 0
				PRINTFORM (%"？",2%)
			ELSEIF カウンタB == 6
				PRINTFORM 뒷면수비표시
				SETCOLOR C_GRAY
				PRINTFORM 　／　／　／
			ELSEIF GROUPMATCH(カウンタB,3,5,7)
				SETCOLOR C_GRAY
				PRINTFORM ／　／　／　／　／　／　
			ELSEIF GROUPMATCH(カウンタB,2,4,8)
				SETCOLOR C_GRAY
				PRINTFORM 　／　／　／　／　／　／
			ENDIF
			RESETCOLOR
		ELSE
			IF カウンタB == 0
				SETCOLOR 설정色
								;L파츠
				IF カウンタ == 1 && MAX_L_存在 == 1
					PRINTFORM ┌─────────────
				;M파츠
				ELSEIF カウンタ == 2 && MAX_M_存在 == 1
					IF MAX_L_存在 == 1 && MAX_R_存在 == 1
						PRINTFORM ──────────────
					ELSEIF MAX_L_存在 == 1
						PRINTFORM ─────────────┐
					ELSEIF MAX_R_存在 == 1
						PRINTFORM ┌─────────────
					ELSE
						PRINTFORM ┌────────────┐
					ENDIF
				;R파츠
				ELSEIF カウンタ == 3 && MAX_R_存在 == 1
					PRINTFORM ─────────────┐	
				ELSE
					PRINTFORM ┌────────────┐
				ENDIF

				RESETCOLOR
			ELSEIF カウンタB == 1
				FONTSTYLE 8
				VARSET RESULT
				SIF GETVAR(@"%듀얼리스트%_MZ_接可:カウンタ") >= 1 && GETVAR(@"%듀얼리스트%_MZ_性:カウンタ") == 牝性
					SETCOLOR C_PINK

				TRYCALLFORM CARDCAN_{GETVAR(@"%듀얼리스트%_MZ_ID:カウンタ")}(듀얼리스트,필드起動,"필드",カウンタ)
				SIF RESULT == 1 && 듀얼리스트 == "자신"
					SETCOLOR C_G_YELLOW
				;略称
				IF GETVAR(@"%듀얼리스트%_MZ_変化元ID:カウンタ") >= 1
					SETCOLOR C_M_GREEN
					TRYCALLFORM CARDNAME_{GETVAR(@"%듀얼리스트%_MZ_変化元ID:カウンタ")}, "略称"
				ELSE					
					TRYCALLFORM CARDNAME_{GETVAR(@"%듀얼리스트%_필드:カウンタ")}, "略称"
				ENDIF
				IF 듀얼리스트 == "자신"
					IF GETVARS(@"%듀얼리스트%_MZ_改名:カウンタ")  != ""
						SETCOLOR C_RED
						カード名 = %GETVARS(@"%듀얼리스트%_MZ_改名:カウンタ")%
						STRLENS カード名
						IF RESULT >= 18
							SUBSTRING カード名, 0, 16
							PRINTBUTTON @" %RESULTS,16,LEFT%… ", (2000 + カウンタ)
						ELSE
							SUBSTRING カード名, 0, 19
							PRINTBUTTON @" %RESULTS,19,LEFT%", (2000 + カウンタ)		
						ENDIF
					ELSE
						PRINTBUTTON @" %RESULTS,19,LEFT%", (2000 + カウンタ)
					ENDIF
				ELSEIF 듀얼리스트 == "상대"
					IF GETVAR(@"%듀얼리스트%_MZ_表:カウンタ") == 3
						PRINTBUTTON @" %"UNKNOWN",19,LEFT%", (5000 + カウンタ)
					ELSE
						IF GETVARS(@"%듀얼리스트%_MZ_改名:カウンタ")  != ""
							SETCOLOR C_RED
							カード名 = %GETVARS(@"%듀얼리스트%_MZ_改名:カウンタ")%
							STRLENS カード名
							IF RESULT >= 18
								SUBSTRING カード名, 0, 16
								PRINTBUTTON @" %RESULTS,16,LEFT%… ", (5000 + カウンタ)
							ELSE
								SUBSTRING カード名, 0, 19
								PRINTBUTTON @" %RESULTS,19,LEFT%", (5000 + カウンタ)		
							ENDIF
						ELSE
							PRINTBUTTON @" %RESULTS,19,LEFT%", (5000 + カウンタ)
						ENDIF
					ENDIF
				ENDIF
				RESETCOLOR
				FONTSTYLE 0
				SELECTCASE GETVAR(@"%듀얼리스트%_MZ_属:カウンタ") 
					CASE 1
						SETCOLOR C_LIGHT_T
						PRINTFORM (%"光",2%)
					CASE 2
						SETCOLOR C_DARK_T
						PRINTFORM (%"闇",2%)
					CASE 3
						SETCOLOR C_GROUND_T
						PRINTFORM (%"地",2%)
					CASE 4
						SETCOLOR C_WATER_T
						PRINTFORM (%"水",2%)
					CASE 5
						SETCOLOR C_FIRE_T
						PRINTFORM (%"炎",2%)
					CASE 6
						SETCOLOR C_WIND_T
						PRINTFORM (%"風",2%)
					CASE 7
						SETCOLOR C_LIGHT_T
						PRINTFORM (%"神",2%)
					CASEELSE
						PRINTFORM (%"？",2%)
				ENDSELECT
				RESETCOLOR
				FONTSTYLE 0
			ELSEIF カウンタB == 2
				;レベル
				TRYCALLFORM CARD_{GETVAR(@"%듀얼리스트%_필드:カウンタ")}, "종류"
				IF RESULT == 엑시즈
					SETCOLOR C_XYZ_LBLACK
					PRINTFORM %"（☆）",18,RIGHT%× {GETVAR(@"%듀얼리스트%_MZ_星:カウンタ"),3,RIGHT}
				ELSEIF RESULT == 링크
					SETCOLOR C_LINK_BLUE
					TRYCALLFORM CARD_{GETVAR(@"%듀얼리스트%_필드:カウンタ")}, "レベル"
					PRINTFORM %"LINK －",21,RIGHT% {RESULT,2,RIGHT}
				ELSE
					PRINTFORM %"（★）",18,RIGHT%× {GETVAR(@"%듀얼리스트%_MZ_星:カウンタ"),3,RIGHT}
				ENDIF
				RESETCOLOR

			ELSEIF カウンタB == 3
				PRINTFORM %GET_TALENTNAME(191,GETVAR(@"%듀얼리스트%_MZ_種:カウンタ")),15,LEFT%
				;14が限界、5までOK
				TRYCALLFORM CARD_{GETVAR(@"%듀얼리스트%_필드:カウンタ")}, "分割"
				IF RESULT == 0
					PRINTFORM %"",5%
				ELSE
					IF RESULT == デュアル
						SETCOLOR C_MONS_BR
						PRINTFORM %"Dual",4%
					ELSEIF RESULT == 효과なし
						SETCOLOR C_BASM_BR
						PRINTFORM %"NoEF",4%
					ELSEIF RESULT == 디스펙터
						SETCOLOR C_XYZ_BLACK
						PRINTFORM %"DIS ",4%
					ELSEIF RESULT == 유니온
						SETCOLOR C_ORANGE
						PRINTFORM %"Uni ",4%
					ELSEIF RESULT == 펜듈럼
						SETCOLOR C_MAGIC_G
						PRINTFORM %"Pend",4%
					ELSEIF RESULT == 크로스기어
						SETCOLOR C_PSY_RED
						PRINTFORM %"Xrs",4%
					ELSEIF RESULT == KNDN
						SETCOLOR C_PSY_RED
						PRINTFORM %"KNDN",4%
					ENDIF
					RESETCOLOR
					PRINTFORM /
				ENDIF
				CALL CARD_SETCOLOR(듀얼리스트,"필드",カウンタ)
				TRYCALLFORM CARD_{GETVAR(@"%듀얼리스트%_필드:カウンタ")}, "종류"	
				IF RESULT == 1
					PRINTFORM %"효과",4%
				ELSEIF RESULT == 2 || RESULT == 31
					PRINTFORM %"통상",4%
				ELSEIF RESULT == 의식
					PRINTFORM %"의식",4%
				ELSEIF RESULT == 융합
					PRINTFORM %"융합",4%
				ELSEIF RESULT == 싱크로
					PRINTFORM %"싱",4%
				ELSEIF RESULT == 엑시즈
					PRINTFORM %"XYZ ",4%
				ELSEIF RESULT == 링크
					PRINTFORM %"LINK",4%
				ELSEIF RESULT == 초차원
					PRINTFORM %"PSY",4%
				ELSEIF INRANGE(RESULT,20,29)
					PRINTFORM %"마법",4%
				ELSEIF RESULT >= 30
					PRINTFORM %"함정",4%
				ELSEIF RESULT == 0
					PRINTFORM %"　",4%
				ENDIF
				RESETCOLOR
			ELSEIF カウンタB == 4
				IF GETVAR(@"%듀얼리스트%_MZ_Ｔ:カウンタ") >= 1
					PRINTFORM 　튜너　　　
				ELSE
					PRINTFORM 　　　　　　
				ENDIF
				VARSET RESULT
				TRYCALLFORM CARD_{GETVAR(@"%듀얼리스트%_필드:カウンタ")}, "トークン"
				IF RESULT >= 1
					PRINTFORM 　　 ToK
				ELSE
					PRINTFORM 　　　　
				ENDIF
				PRINTFORM 　　

			ELSEIF カウンタB == 5
				IF GETVAR(@"%듀얼리스트%_MZ_接可:カウンタ") >= 1 && GETVAR(@"%듀얼리스트%_MZ_性:カウンタ") == 牝性
					SETCOLOR C_PINK
					PRINTFORM 　　　 ❤접촉가능❤ 　　　
				ELSEIF GETVAR(@"%듀얼리스트%_MZ_無効:カウンタ") >= 1
					SETCOLOR C_CREAM
					PRINTFORM 　　　【효과무효】　　　
				ELSEIF GETVAR(@"%듀얼리스트%_MZ_不材:カウンタ") >= 1
					SETCOLOR C_CREAM
					PRINTFORM 　　　【소재불가】　　　
				ELSEIF GETVAR(@"%듀얼리스트%_MZ_戦狂:カウンタ") >= 1
					SETCOLOR C_RED
					PRINTFORM 　　　【전투광화】　　　


				ELSE
					PRINTFORM 　　　　　　　　　　　　
				ENDIF
			ELSEIF カウンタB == 6
				IF GETVAR(@"%듀얼리스트%_MZ_表:カウンタ") == 1
					SETCOLOR C_RED
					PRINTFORM 공격표시
					CALL CARD_ATK_CHECK(듀얼리스트,カウンタ)
					IF RESULT == 0
						PRINTFORM (공격가능)
						PRINTFORM ：{GETVAR(@"%듀얼리스트%_MZ_戦:カウンタ") + GETVAR(@"%듀얼리스트%_MZ_追戦:カウンタ"),2}회
						RESETCOLOR
					ELSE
						PRINTFORM 　　　　　　　　
					ENDIF
				ELSEIF GETVAR(@"%듀얼리스트%_MZ_表:カウンタ") == 2
					SETCOLOR C_AQUA
					PRINTFORM 　수비표시　　　　　　　
				ELSEIF GETVAR(@"%듀얼리스트%_MZ_表:カウンタ") == 3
					PRINTFORM 　뒷면수비표시　　　　　
				ENDIF
			ELSEIF カウンタB == 7


				IF GETVAR(@"%듀얼리스트%_MZ_Ｘ:カウンタ") != -1 
					PRINTFORM Ｘ소재:{(GETVAR(@"%듀얼리스트%_MZ_Ｘ:カウンタ") + 1),5,LEFT}　　　　　　
				ELSE
					PRINTFORM 　　　　　　　　　　　　
				ENDIF	

			ELSEIF カウンタB == 8
				PRINTFORM 【
				TRYCALLFORM CARD_{GETVAR(@"%듀얼리스트%_필드:カウンタ")}, "攻撃力"
				SIF GETVAR(@"%듀얼리스트%_MZ_攻:カウンタ") > RESULT
					SETCOLOR C_GREEN
				SIF GETVAR(@"%듀얼리스트%_MZ_攻:カウンタ") < RESULT
					SETCOLOR C_RED
				PRINTFORM {(GETVAR(@"%듀얼리스트%_MZ_攻:カウンタ")),9,RIGHT}
				RESETCOLOR
				PRINTFORM ／
				TRYCALLFORM CARD_{GETVAR(@"%듀얼리스트%_필드:カウンタ")}, "守備力"
				SIF GETVAR(@"%듀얼리스트%_MZ_守:カウンタ") > RESULT
					SETCOLOR C_GREEN
				SIF GETVAR(@"%듀얼리스트%_MZ_守:カウンタ") < RESULT
					SETCOLOR C_RED
				PRINTFORM {(GETVAR(@"%듀얼리스트%_MZ_守:カウンタ")),9,RIGHT}】
				RESETCOLOR
			ELSEIF カウンタB == 9
				SIF GETVAR(@"%듀얼리스트%_MZ_接可:カウンタ") >= 1 && GETVAR(@"%듀얼리스트%_MZ_性:カウンタ") == 牝性
					SETCOLOR C_PINK

				TRYCALLFORM CARDCAN_{GETVAR(@"%듀얼리스트%_MZ_ID:カウンタ")}(듀얼리스트,필드起動,"필드",カウンタ)
				SIF RESULT == 1 && 듀얼리스트 == "자신"
					SETCOLOR C_G_YELLOW

				SETCOLOR 설정色２
				;L파츠
				IF カウンタ == 1 && MAX_L_存在 == 1
					PRINTFORM └─────────────
				;M파츠
				ELSEIF カウンタ == 2 && MAX_M_存在 == 1
					IF MAX_L_存在 == 1 && MAX_R_存在 == 1
						PRINTFORM ─────MAXIMUM!─────

					ELSEIF MAX_L_存在 == 1
						PRINTFORM ─────────────┘
					ELSEIF MAX_R_存在 == 1
						PRINTFORM └─────────────
					ELSE
						PRINTFORM └────────────┘
					ENDIF
				;R파츠
				ELSEIF カウンタ == 3 && MAX_R_存在 == 1
					PRINTFORM ─────────────┘	
				ELSE
					PRINTFORM └────────────┘
				ENDIF
				RESETCOLOR
			ENDIF
		ENDIF
		IF !GROUPMATCH(カウンタB,0,9)
			SIF GETVAR(@"%듀얼리스트%_MZ_接可:カウンタ") >= 1 && GETVAR(@"%듀얼리스트%_MZ_性:カウンタ") == 牝性
				SETCOLOR C_PINK

			TRYCALLFORM CARDCAN_{GETVAR(@"%듀얼리스트%_MZ_ID:カウンタ")}(듀얼리스트,필드起動,"필드",カウンタ)
			SIF RESULT == 1 && 듀얼리스트 == "자신"
				SETCOLOR C_G_YELLOW
			SIF GROUPMATCH(カウンタB,1,2,3,4)
				SETCOLOR 설정色
			SIF GROUPMATCH(カウンタB,5,6,7,8)
				SETCOLOR 설정色２

			IF GROUPMATCH(カウンタ,1,2)
				SELECTCASE カウンタ
				CASE 1
					IF MAX_L_存在 == 1 && MAX_M_存在 == 1
						PRINTFORM %"",2%
					ELSE
						PRINTFORM ｜
					ENDIF
				CASE 2		
					IF MAX_M_存在 == 1 && MAX_R_存在 == 1
						PRINTFORM %"",2%
					ELSE
						PRINTFORM ｜
					ENDIF
				ENDSELECT
			ELSE
				PRINTFORM ｜
			ENDIF
			RESETCOLOR
		ENDIF
		IF GROUPMATCH(カウンタB,0,9) && GROUPMATCH(カウンタ,1,2)
			SIF GROUPMATCH(カウンタB,0)
				SETCOLOR 설정色
			SIF GROUPMATCH(カウンタB,9)
				SETCOLOR 설정色２

			IF MAX_L_存在 == 1 && MAX_M_存在 == 1 && カウンタ == 1
				PRINTFORM %"-",1%
			ELSEIF MAX_M_存在 == 1 && MAX_R_存在 == 1 && カウンタ == 2
				PRINTFORM %"-",1%
			ELSE
				PRINTFORM %"",1%
			ENDIF
		ELSE
			PRINTFORM %"",1%
		ENDIF
		RESETCOLOR
	NEXT

	IF ターンプレイヤー == "자신"
		SETCOLOR C_L_BLUE
	ELSE
		SETCOLOR C_L_RED
	ENDIF
;	SETCOLOR C_L_RED
	PRINTFORM ｜
	RESETCOLOR
	PRINTL
NEXT


;마법情報────────────────────────────────────────────────────────────────────────────────────────────────────────────────
@CARD_MAGINFO(듀얼리스트)
#DIM DYNAMIC カウンタ
#DIM DYNAMIC カウンタB
#DIMS DYNAMIC 듀얼리스트
#DIM DYNAMIC 現攻撃力
#DIM DYNAMIC 現守備力
#DIM DYNAMIC 설정色
#DIM DYNAMIC 설정色２
#DIMS DYNAMIC カード名

FOR カウンタB,0,5
	IF ターンプレイヤー == "자신"
		SETCOLOR C_L_BLUE
	ELSE
		SETCOLOR C_L_RED
	ENDIF
;	SETCOLOR C_L_BLUE
	IF 듀얼리스트 == "상대" && カウンタB == 0
		PRINTFORM △　
	ELSE



		PRINTFORM ｜　
	ENDIF
	RESETCOLOR

	FOR カウンタ,0,5
		설정色 = COLOR_FROMRGB(192, 192, 192)
		설정色２ = COLOR_FROMRGB(192, 192, 192)
		IF GETVAR(@"%듀얼리스트%_마함:カウンタ") != -1			
			TRYCALLFORM CARD_{GETVAR(@"%듀얼리스트%_마함:カウンタ")}, "종류"
			IF RESULT == 0
				RESETCOLOR
			ELSEIF RESULT <= 10
				IF RESULT == 효과モン
					설정色 = C_MONS_BR
				ELSEIF RESULT == 通常モン
					설정色 = C_BASM_BR
				ELSEIF RESULT == 의식
					설정色 = C_GISK_BLUE
				ELSEIF RESULT == 융합
					설정色 = C_FUSE_PUR
				ELSEIF RESULT == 싱크로
					설정色 = C_SYN_WHITE
				ELSEIF RESULT == 엑시즈
					설정色 = C_XYZ_BLACK
				ELSEIF RESULT == 링크
					설정色 = C_LINK_BLUE
				ELSEIF RESULT == 초차원
					설정色 = C_PSY_RED
				ENDIF
			ELSEIF RESULT >= 20 && RESULT < 30
				설정色 = C_MAGIC_G
			ELSEIF RESULT >= 30
				설정色 = C_TRAP_PUR
			ENDIF
			IF GETVAR(@"%듀얼리스트%_魔_表:カウンタ") >= 2
				설정色 = C_L_GRAY
			ENDIF

			TRYCALLFORM CARD_{GETVAR(@"%듀얼리스트%_마함:カウンタ")}, "分割"
			IF RESULT == 0
				설정色２ = 설정色
			ELSEIF RESULT <= 10
				IF RESULT == 효과モン
					설정色２ = C_MONS_BR
				ELSEIF RESULT == 通常モン
					설정色２ = C_BASM_BR
				ELSEIF RESULT == 의식
					설정色２ = C_GISK_BLUE
				ELSEIF RESULT == 융합
					설정色２ = C_FUSE_PUR
				ELSEIF RESULT == 싱크로
					설정色２ = C_SYN_WHITE
				ELSEIF RESULT == 엑시즈
					설정色２ = C_XYZ_BLACK
				ELSEIF RESULT == 링크
					설정色２ = C_LINK_BLUE
				ELSEIF RESULT == 초차원
					설정色２ = C_PSY_RED
				ENDIF
			ELSEIF RESULT >= 20 && RESULT < 30
				설정色２ = C_MAGIC_G
				SIF RESULT == 유니온
					설정色２ = C_ORANGE
				SIF RESULT == KNDN
					설정色２ = C_PSY_RED
			ELSEIF RESULT >= 30
				설정色２ = C_TRAP_PUR
			ENDIF
			IF GETVAR(@"%듀얼리스트%_魔_表:カウンタ") >= 2
				설정色２ = C_L_GRAY
			ENDIF

		ENDIF
		IF !GROUPMATCH(カウンタB,0,4)
			VARSET RESULT
			SIF GROUPMATCH(カウンタB,1,2)
				SETCOLOR 설정色
			SIF GROUPMATCH(カウンタB,3,4)
				SETCOLOR 설정色２
			PRINTFORM ｜
			RESETCOLOR
		ENDIF

		VARSET RESULT
		VARSET RESULTS

		IF GETVAR(@"%듀얼리스트%_마함:カウンタ") == -1
			IF カウンタB == 0

				PRINTFORM ┌────────────┐
			ELSEIF カウンタB == 4
				PRINTFORM └────────────┘
			ELSEIF GROUPMATCH(カウンタB,1,3)
				SETCOLOR C_GRAY
				PRINTFORM ／　／　／　／　／　／　
			ELSEIF GROUPMATCH(カウンタB,2)
				SETCOLOR C_GRAY
				PRINTFORM 　／　／　／　／　／　／
			ENDIF
			RESETCOLOR
		ELSEIF GETVAR(@"%듀얼리스트%_魔_表:カウンタ") >= 2 && 듀얼리스트 == "상대"
			IF カウンタB == 0
				SETCOLOR C_L_GRAY
				PRINTFORM ┌────────────┐
			ELSEIF カウンタB == 4
				SETCOLOR C_L_GRAY
				PRINTFORM └────────────┘
			ELSEIF カウンタB == 1
				FONTSTYLE 8
				PRINTFORM %"UNKNOWN",20,LEFT%
				FONTSTYLE 0
				PRINTFORM (%"뒤",2%)
			ELSEIF GROUPMATCH(カウンタB,1,3)
				SETCOLOR C_GRAY
				PRINTFORM ／　／　／　／　／　／　
			ELSEIF GROUPMATCH(カウンタB,2)
				SETCOLOR C_GRAY
				PRINTFORM 　／　／　／　／　／　／
			ENDIF
			RESETCOLOR
		ELSE
			IF カウンタB == 0
				SETCOLOR 설정色
				PRINTFORM ┌────────────┐
				RESETCOLOR
			ELSEIF カウンタB == 1
				FONTSTYLE 8
				VARSET RESULT
				TRYCALLFORM CARDCAN_{GETVAR(@"%듀얼리스트%_魔_ID:カウンタ")}(듀얼리스트,마함起動,"마함",カウンタ)
;				PRINTFORML GETVAR(@"%듀얼리스트%_魔_ID:{カウンタ}"):{GETVAR(@"%듀얼리스트%_魔_ID:カウンタ")} 마함起動:{RESULT}
				SIF RESULT == 1 && 듀얼리스트 == "자신"
					SETCOLOR C_G_YELLOW
				;略称		
				TRYCALLFORM CARDNAME_{GETVAR(@"%듀얼리스트%_마함:カウンタ")}, "略称"
				IF 듀얼리스트 == "자신"
					IF GETVARS(@"%듀얼리스트%_魔_改名:カウンタ")  != ""
						SETCOLOR C_RED
						カード名 = %GETVARS(@"%듀얼리스트%_魔_改名:カウンタ")%
						STRLENS カード名
						IF RESULT >= 18
							SUBSTRING カード名, 0, 16
							PRINTBUTTON @" %RESULTS,16,LEFT%… ", (3000 + カウンタ)
						ELSE
							SUBSTRING カード名, 0, 19
							PRINTBUTTON @" %RESULTS,19,LEFT%", (3000 + カウンタ)		
						ENDIF

					ELSE
						PRINTBUTTON @" %RESULTS,19,LEFT%", (3000 + カウンタ)
					ENDIF
				ELSEIF 듀얼리스트 == "상대"
					IF GETVAR(@"%듀얼리스트%_魔_表:カウンタ") >= 2
						PRINTBUTTON @" %"UNKNOWN",19,LEFT%", (6000 + カウンタ)
					ELSE
						IF GETVARS(@"%듀얼리스트%_魔_改名:カウンタ")  != ""
							SETCOLOR C_RED
							カード名 = %GETVARS(@"%듀얼리스트%_魔_改名:カウンタ")%
							STRLENS カード名
							IF RESULT >= 18
								SUBSTRING カード名, 0, 16
								PRINTBUTTON @" %RESULTS,16,LEFT%… ", (6000 + カウンタ)
							ELSE
								SUBSTRING カード名, 0, 19
								PRINTBUTTON @" %RESULTS,19,LEFT%", (6000 + カウンタ)		
							ENDIF
						ELSE
							PRINTBUTTON @" %RESULTS,19,LEFT%", (6000 + カウンタ)
						ENDIF
					ENDIF
				ENDIF
				RESETCOLOR
				FONTSTYLE 0
				SELECTCASE GETVAR(@"%듀얼리스트%_魔_表:カウンタ") 
					CASE 1
						PRINTFORM (%"앞",2%)
					CASEELSE
						PRINTFORM (%"뒤",2%)
				ENDSELECT
				RESETCOLOR
				FONTSTYLE 0
			ELSEIF カウンタB == 2
				CALL CARD_SETCOLOR(듀얼리스트,"마함",カウンタ)
				TRYCALLFORM CARD_{GETVAR(@"%듀얼리스트%_마함:カウンタ")}, "종류"	
				IF RESULT == 通常마법
					PRINTFORM %"통상마법",15,LEFT%
				ELSEIF RESULT == 速攻마법
					PRINTFORM %"속공마법",15,LEFT%
				ELSEIF RESULT == 装備마법
					PRINTFORM %"장착마법",15,LEFT%
				ELSEIF RESULT == 지속마법
					PRINTFORM %"지속마법",15,LEFT%
				ELSEIF RESULT == フィールド
					PRINTFORM %"필드",15,LEFT%
				ELSEIF RESULT == 通常함정
					PRINTFORM %"통상함정",15,LEFT%
				ELSEIF RESULT == 지속함정
					PRINTFORM %"지속함정",15,LEFT%
				ELSEIF RESULT == 초차원
					PRINTFORM %"초차원",15,LEFT%
				ELSE
					PRINTFORM %"그 외",15,LEFT%
				ENDIF
				;14が限界、5までOK
				TRYCALLFORM CARD_{GETVAR(@"%듀얼리스트%_마함:カウンタ")}, "分割"
				IF RESULT == 0
					TRYCALLFORM CARD_{GETVAR(@"%듀얼리스트%_마함:カウンタ")}, "トークン"
					IF RESULT == 1
						SETCOLOR C_MONS_BR
						PRINTFORM %"/Tok",5%
					ELSE
						PRINTFORM %"",5%
					ENDIF
				ELSE
					PRINTFORM /
					IF RESULT == デュアル
						SETCOLOR C_MONS_BR
						PRINTFORM %"Dual",4%
					ELSEIF RESULT == 효과なし
						SETCOLOR C_BASM_BR
						PRINTFORM %"NoEF",4%
					ELSEIF RESULT == 디스펙터
						SETCOLOR C_XYZ_BLACK
						PRINTFORM %"DIS ",4%
					ELSEIF RESULT == 유니온
						SETCOLOR C_ORANGE
						PRINTFORM %"Uni ",4%
					ELSEIF RESULT == 펜듈럼
						SETCOLOR C_MAGIC_G
						PRINTFORM %"Pend",4%
					ELSEIF RESULT == 크로스기어
						SETCOLOR C_PSY_RED
						PRINTFORM %"Xrs",4%
					ELSEIF RESULT == KNDN
						SETCOLOR C_PSY_RED
						PRINTFORM %"KNDN",4%
					ELSE
						PRINTFORM %"　",4%
					ENDIF
					RESETCOLOR
				ENDIF
				PRINTFORM %"　",4%
				RESETCOLOR
			ELSEIF カウンタB == 3
				IF GETVAR(@"%듀얼리스트%_魔_無効:カウンタ") >= 1
					SETCOLOR C_CREAM
					PRINTFORM 　　　【효과무효】　　　
				ELSE
					PRINTFORM 　　　　　　　　　　　　
				ENDIF
			ELSEIF カウンタB == 4

				TRYCALLFORM CARDCAN_{GETVAR(@"%듀얼리스트%_魔_ID:カウンタ")}(듀얼리스트,필드起動,"필드",カウンタ)
				SIF RESULT == 1 && 듀얼리스트 == "자신"
					SETCOLOR C_G_YELLOW

				SETCOLOR 설정色２
				PRINTFORM └────────────┘
				RESETCOLOR
			ENDIF
		ENDIF
		IF !GROUPMATCH(カウンタB,0,4)
			TRYCALLFORM CARDCAN_{GETVAR(@"%듀얼리스트%_魔_ID:カウンタ")}(듀얼리스트,필드起動,"필드",カウンタ)
			SIF RESULT == 1 && 듀얼리스트 == "자신"
				SETCOLOR C_G_YELLOW
			SIF GROUPMATCH(カウンタB,1,2)
				SETCOLOR 설정色
			SIF GROUPMATCH(カウンタB,3)
				SETCOLOR 설정色２
				PRINTFORM ｜
			RESETCOLOR
		ENDIF
		PRINT  
	NEXT

	IF ターンプレイヤー == "자신"
		SETCOLOR C_L_BLUE
	ELSE
		SETCOLOR C_L_RED
	ENDIF
;	SETCOLOR C_L_RED
	IF 듀얼리스트 == "자신" && カウンタB == 4
		PRINTFORM 　▽
	ELSE
		PRINTFORM 　｜
	ENDIF

	RESETCOLOR
	PRINTL
NEXT




;ライフ変動────────────────────────────────────────────────────────────────────────────────────────────────────────────────
@LIFE_CHANGE(듀얼리스트,増減,種別,変動値,対面플래그)
#DIMS DYNAMIC 듀얼리스트
#DIMS DYNAMIC 対面者
#DIMS DYNAMIC 대상者

#DIMS DYNAMIC 増減
#DIMS DYNAMIC 種別
#DIM DYNAMIC 変動値
#DIM DYNAMIC 対面플래그
#DIM DYNAMIC 듀얼元ライフ
#DIM DYNAMIC 対面元ライフ
#DIM DYNAMIC JAM플래그
#DIM DYNAMIC LRESULT

LRESULT = RESULT


CALL 対面者판정(듀얼리스트)
対面者 = %RESULTS%

IF 対面플래그 == 0
	대상者 = %듀얼리스트%
ELSEIF 対面플래그 == 1
	대상者 = %対面者%
ENDIF

CALL 対面者판정(대상者)
対面者 = %RESULTS%




IF GETVAR(@"%대상者%_コスト無効") >= 1 && 種別 == "コスト"
	PRINTFORM　　　　　　【코스트 무효 중！！】
	PRINTFORMW %대상者%으로의 코스트는 ０이 됩니다。
	RETURN 0
ENDIF

IF GETVAR(@"%대상者%_ダメージ反転") >= 1 && 増減 == "減少" && 種別 != "コスト"
	PRINTFORM　　　　　　【대미지 반전 중！！】
	PRINTFORMW %대상者%으로의 대미지 효과는 반전됩니다。
	増減 = 増加
ENDIF
듀얼元ライフ =  GETVAR(@"ライフ_%대상者%")
対面元ライフ =  GETVAR(@"ライフ_%対面者%")

IF 種別 == "戦闘" || 種別 == "直接戦闘" 
	IF 増減 == "減少"
		IF GETVAR(@"%대상者%_一時ダメージ無効")
			PRINTFORM　　　　　　【일시적 대미지 무효화！！】
			PRINTFORMW %대상者%의 대미지가 무효화 되었습니다。
			IF 대상者 == "상대"
				CALL KOJO_MESSAGE_SEND("DUEL",OPPOSER,10,0)
			ENDIF
			SETVAR @"%대상者%_一時ダメージ無効" , 0

		ELSEIF GETVAR(@"%대상者%_ダメージ無効") || 変動値 <= 0
			PRINTFORM　　　　　　【대미지 무효화！！】
			PRINTFORMW %대상者%의 대미지가 무효화 되었습니다。
			IF 대상者 == "상대"
				CALL KOJO_MESSAGE_SEND("DUEL",OPPOSER,10,0)
			ENDIF
		ELSEIF GETVAR(@"%대상者%_ダメージ反射")
			PRINTFORM　　　　　　【대미지 반사！！】
			
			IF GETVAR(@"%대상者%_ダメージ倍化")
				PRINTFORM　　　　　　【대미지 배화！！】
				変動値 = 変動値 * 2
			ENDIF
			IF GETVAR(@"%대상者%_ダメージ半化")
				PRINTFORM　　　　　　【대미지 반감！】
				変動値 = 変動値 / 2
			ENDIF

			PRINTFORMW 대미지가 반사되어、%対面者%의 라이프가 {変動値}포인트 줄었습니다。
			SETVAR @"ライフ_%対面者%", GETVAR(@"ライフ_%対面者%") - 変動値
			IF 種別 == "戦闘"
				CALL CARD_FIN_BIT_SET(듀얼리스트,"戦闘",3)
			ELSEIF 種別 == "直接戦闘" 
				CALL CARD_FIN_BIT_SET(듀얼리스트,"直接戦闘",3)
			ENDIF

			IF 対面者 == "상대"
				CALL KOJO_MESSAGE_SEND("DUEL",OPPOSER,10,変動値)
			ENDIF
			SETVAR @"%対面者%_変動値_保" , 変動値
			SETVAR @"%対面者%_被弾者_保" , 1
		ELSEIF GETVAR(@"%대상者%_ダメージ乱反射")
			PRINTFORM　　　　　　【대미지 난반사！！】

			IF GETVAR(@"%대상者%_ダメージ倍化")
				PRINTFORM　　　　　　【대미지 배화！！】
				変動値 = 変動値 * 2
			ENDIF
			IF GETVAR(@"%대상者%_ダメージ半化")
				PRINTFORM　　　　　　【대미지 반감！】
				変動値 = 変動値 / 2
			ENDIF

			PRINTFORMW 대미지가 반사되어、서로의 라이프가 {変動値}포인트 줄었습니다。
			SETVAR @"ライフ_%対面者%", GETVAR(@"ライフ_%対面者%") - 変動値
			SETVAR @"ライフ_%대상者%", GETVAR(@"ライフ_%대상者%") - 変動値

			IF 種別 == "戦闘"
				CALL CARD_FIN_BIT_SET(듀얼리스트,"戦闘",3)
			ELSEIF 種別 == "直接戦闘" 
				CALL CARD_FIN_BIT_SET(듀얼리스트,"直接戦闘",3)
			ENDIF

			IF 대상者 == "상대"
				CALL KOJO_MESSAGE_SEND("DUEL",OPPOSER,10,変動値)
			ENDIF
			SETVAR @"%対面者%_変動値_保" , 変動値
			SETVAR @"%対面者%_被弾者_保" , 1

			SETVAR @"%대상者%_変動値_保" , 変動値
			SETVAR @"%대상者%_被弾者_保" , 1
		ELSE
			IF GETVAR(@"%대상者%_ダメージ倍化")
				PRINTFORM　　　　　　【대미지 배화！！】
				変動値 = 変動値 * 2
			ENDIF
			IF GETVAR(@"%대상者%_ダメージ半化")
				PRINTFORM　　　　　　【대미지 반감！】
				変動値 = 変動値 / 2
			ENDIF

			PRINTFORMW %대상者%의 라이프가 {変動値}포인트 줄었습니다。
			SETVAR @"ライフ_%대상者%", GETVAR(@"ライフ_%대상者%") - 変動値
			IF 種別 == "戦闘"
				CALL CARD_FIN_BIT_SET(듀얼리스트,"戦闘",3)
			ELSEIF 種別 == "直接戦闘" 
				CALL CARD_FIN_BIT_SET(듀얼리스트,"直接戦闘",3)
			ENDIF
			IF 대상者 == "상대"
				CALL KOJO_MESSAGE_SEND("DUEL",OPPOSER,10,変動値)
			ENDIF
			SETVAR @"%대상者%_変動値_保" , 変動値
			SETVAR @"%대상者%_被弾者_保" , 1
		ENDIF
	ELSEIF 増減 == "増加"
		PRINTFORM　　　　　　【대미지 흡수！】

		IF GETVAR(@"%대상者%_ダメージ倍化")
			PRINTFORM　　　　　　【대미지 배화！！】
			変動値 = 変動値 * 2
		ENDIF
		IF GETVAR(@"%대상者%_ダメージ半化")
			PRINTFORM　　　　　　【대미지 반감！】
			変動値 = 変動値 / 2
		ENDIF

		PRINTFORMW %대상者%의 라이프가 {変動値}포인트 회복되었습니다。
		SETVAR @"ライフ_%대상者%", GETVAR(@"ライフ_%대상者%") + 変動値
			IF 대상者 == "상대"
				CALL KOJO_MESSAGE_SEND("DUEL",OPPOSER,11)
			ENDIF
		SETVAR @"%대상者%_変動値_保" , 変動値
		SETVAR @"%대상者%_회복者_保" , 1
	ENDIF

ELSEIF 種別 == "효과"
	IF 増減 == "減少"
		IF GETVAR(@"%대상者%_一時ダメージ無効")
			PRINTFORM　　　　　　【일시적 대미지 무효화！！】
			PRINTFORMW %대상者%의 대미지가 무효화 되었습니다。
			IF 대상者 == "상대"
				CALL KOJO_MESSAGE_SEND("DUEL",OPPOSER,10,0)
			ENDIF
			SETVAR @"%대상者%_一時ダメージ無効" , 0

		ELSEIF GETVAR(@"%대상者%_효과ダメージ無効") || 変動値 <= 0
			PRINTFORM　　　　　　【대미지 무효화！！】
			PRINTFORMW %대상者%의 대미지가 무효화 되었습니다。
			IF 대상者 == "상대"
				CALL KOJO_MESSAGE_SEND("DUEL",OPPOSER,10,0)
			ENDIF
			
		ELSEIF GETVAR(@"%대상者%_효과ダメージ反射")
			PRINTFORM　　　　　　【대미지 반사！！】
			PRINTFORMW 대미지가 반사되어、%対面者%의 라이프가 {変動値}포인트 줄었습니다。
			SETVAR @"ライフ_%対面者%", GETVAR(@"ライフ_%対面者%") - 変動値
			IF 対面者 == "상대"
				CALL KOJO_MESSAGE_SEND("DUEL",OPPOSER,10,変動値)
			ENDIF
			SETVAR @"%対面者%_変動値_保" , 変動値
			SETVAR @"%対面者%_被弾者_保" , 1

		ELSE
			IF デュエル타입 == 1 && 変動値 >= 1
				変動値 = 変動値 / 2
				PRINTL ＊스피드 듀얼을 위해、효과 대미지는 반감됩니다＊
			ENDIF
			PRINTFORMW 효과로 %대상者%의 라이프가 {変動値}포인트 줄었습니다。
			SETVAR @"ライフ_%대상者%", GETVAR(@"ライフ_%대상者%") - 変動値
			CALL CARD_FIN_BIT_SET(듀얼리스트,"효과",3)
			IF 대상者 == "상대"
				CALL KOJO_MESSAGE_SEND("DUEL",OPPOSER,10,変動値)
			ENDIF

			SETVAR @"%대상者%_変動値_保" , 変動値
			SETVAR @"%대상者%_被弾者_保" , 1
		ENDIF
	ELSEIF 増減 == "増加"
		PRINTFORMW 효과로 %대상者%의 라이프가 {変動値}포인트 회복되었습니다。
		IF 대상者 == "상대"
			CALL KOJO_MESSAGE_SEND("DUEL",OPPOSER,11)
		ENDIF
		SETVAR @"ライフ_%대상者%", GETVAR(@"ライフ_%대상者%") + 変動値
		SETVAR @"%대상者%_変動値_保" , 変動値
		SETVAR @"%대상者%_회복者_保" , 1
	ENDIF
ELSEIF 種別 == "コスト"
	PRINTFORMW %대상者%는 라이프 코스트를 {変動値}포인트 지불했습니다。
	SETVAR @"ライフ_%대상者%", GETVAR(@"ライフ_%대상者%") - 変動値
	CALL CARD_FIN_BIT_SET(듀얼리스트,"コスト",3)
	TRYCALLFORM CARD_{処理中_효과ID}("종족")
	SIF RESULT == 사이킥족
		SETVAR @"%대상者%_JAM起動_保" , 1
	IF 대상者 == "상대"
		CALL KOJO_MESSAGE_SEND("DUEL",OPPOSER,10,変動値)
	ENDIF
ELSEIF 種別 == "변경"
	IF 増減 == "半分"
		変動値 = GETVAR(@"ライフ_%대상者%") / 2
	ELSE
		変動値 = 変動値
	ENDIF
	PRINTFORMW %대상者%의 라이프가 {変動値}가 되었습니다。
	SETVAR @"ライフ_%대상者%", 変動値
ENDIF



IF 대상者 == "자신"
	SETCOLOR C_L_BLUE
ELSE
	SETCOLOR C_L_RED
ENDIF
PRINTFORML %대상者% 라이프 포인트：【{듀얼元ライフ}】→【{GETVAR(@"ライフ_%대상者%")}】
RESETCOLOR

IF 対面者 == "자신"
	SETCOLOR C_L_BLUE
ELSE
	SETCOLOR C_L_RED
ENDIF
PRINTFORMW %対面者% 라이프 포인트：【{対面元ライフ}】→【{GETVAR(@"ライフ_%対面者%")}】
RESETCOLOR


IF GROUPMATCH(種別, "戦闘", "直接戦闘", "효과")
	IF 変動値 > 0
		ダメージ종류 = %種別%
		IF GETVAR(@"%대상者%_ダメージ反射")
			ダメージ受者 = %対面者%
		ELSE
			ダメージ受者 = %대상者%
		ENDIF
		ダメージ増減 = %増減%
		ダメージ受値 = 変動値
		CALL CARD_DAMAGEEFFECT_FORCE(대상者)
		CALL CARD_DAMAGEEFFECT_FORCE(対面者)
		VARSET ダメージ종류
		VARSET ダメージ受者
		VARSET ダメージ増減
		VARSET ダメージ受値
	ENDIF
ENDIF


SIF ライフ_자신 <= 0
	자신_듀얼패배플래그 = 1
IF ライフ_상대 <= 0
	IF ERA起動 != 2
		상대_듀얼패배플래그 = 1
	ENDIF
ENDIF

RETURN LRESULT


;フィールドUI────────────────────────────────────────────────────────────────────────────────────────────────────────────────
@CARD_UI_FIELD(듀얼리스트,選択カード,SKIP플래그)
#DIMS DYNAMIC 듀얼리스트
#DIM DYNAMIC 選択カード
#DIM DYNAMIC 選択カード_ID
#DIM DYNAMIC 参照先
#DIM DYNAMIC 종류
#DIM DYNAMIC 대상エリア
#DIM DYNAMIC 특수カード_ID
#DIM DYNAMIC SKIP플래그
#DIM DYNAMIC 설정カラー
#DIM DYNAMIC トークン보존,10
#DIM DYNAMIC カウンタ

$INPUTLOOP

選択カード_ID = GETVAR(@"%듀얼리스트%_필드:選択カード")
TRYCALLFORM CARD_{選択カード_ID}, "종류"
IF RESULT == 1
	설정カラー = C_MONS_BR
ELSEIF RESULT == 2
	설정カラー = C_BASM_BR
ELSEIF RESULT == 의식
	설정カラー = C_GISK_BLUE
ELSEIF RESULT == 융합
	설정カラー = C_FUSE_PUR
ELSEIF RESULT == 싱크로
	설정カラー = C_SYN_WHITE
ELSEIF RESULT == 엑시즈
	설정カラー = C_XYZ_BLACK
ELSEIF RESULT == 링크
	설정カラー = C_LINK_BLUE
ELSEIF RESULT == 초차원
	설정カラー = C_PSY_RED
ELSEIF RESULT >= 20 && RESULT < 30
	설정カラー = C_MAGIC_G
ELSEIF RESULT >= 30
	설정カラー = C_TRAP_PUR
ENDIF



CALL COLOR_LINE(설정カラー)
PRINTFORML ■ 몬스터 존　카드 상세 화면
CALL COLOR_LINE(설정カラー)
PRINTL
CALL PRINT_STATE_DUEL(選択カード_ID)

CALL COLOR_LINE(설정カラー)
VARSET RESULTS

IF GETVARS(@"%듀얼리스트%_MZ_改名:選択カード")  != ""
	SETCOLOR C_RED
	FONTSTYLE 4
ENDIF

TRYCALLFORM CARDNAME_{選択カード_ID}, "名前"
PRINTFORM <<%RESULTS%>>


FONTSTYLE 0
IF GETVARS(@"%듀얼리스트%_MZ_改名:選択カード")  != ""
	PRINTL
	PRINTFORM <<%GETVARS(@"%듀얼리스트%_MZ_改名:選択カード")%>>
ENDIF
RESETCOLOR



IF GETVAR(@"%듀얼리스트%_MZ_変化元ID:選択カード") >= 1
	TRYCALLFORM CARDNAME_{GETVAR(@"%듀얼리스트%_MZ_変化元ID:選択カード")}, "名前"
	PRINTFORM （추가명칭）<<%RESULTS%>>
ENDIF

SELECTCASE GETVAR(@"%듀얼리스트%_MZ_属:選択カード")
CASE 1
	SETCOLOR C_LIGHT_T
	PRINTFORM （%"빛",2%）
CASE 2
	SETCOLOR C_DARK_T
	PRINTFORM （%"어둠",2%）
CASE 3
	SETCOLOR C_GROUND_T
	PRINTFORM （%"땅",2%）
CASE 4
	SETCOLOR C_WATER_T
	PRINTFORM （%"물",2%）
CASE 5
	SETCOLOR C_FIRE_T
	PRINTFORM （%"화염",2%）
CASE 6
	SETCOLOR C_WIND_T
	PRINTFORM （%"바람",2%）
CASE 7
	SETCOLOR C_LIGHT_T
	PRINTFORM （%"신",2%）
ENDSELECT
PRINTL
;TRYCALLFORM CARD_{選択カード_ID}, "종류"


CALL COLOR_LINE(설정カラー)
PRINT 소속 카테고리:
IF GETVARS(@"%듀얼리스트%_MZ_改名:選択カード")  != ""
	SETCOLOR C_RED
	FONTSTYLE 4
ENDIF
TRYCALLFORM CARDNAME_{選択カード_ID}, "カテゴリ"
SIF RESULTS:0 != ""
	PRINTFORM 【%RESULTS:0%】
SIF RESULTS:1 != ""
	PRINTFORM 【%RESULTS:1%】
SIF RESULTS:2 != ""
	PRINTFORM 【%RESULTS:2%】
SIF RESULTS:3 != ""
	PRINTFORM 【%RESULTS:3%】

RESETCOLOR
FONTSTYLE 0

SETCOLOR C_GREEN
SIF GETVARS(@"%듀얼리스트%_MZ_追カテ:選択カード")  != ""
	PRINTFORM 추가 카테고리:【%GETVARS(@"%듀얼리스트%_MZ_追カテ:選択カード")%】
RESETCOLOR
SETCOLOR C_GREEN
SIF GETVARS(@"%듀얼리스트%_MZ_追カテ2:選択カード")  != ""
	PRINTFORM 추가 카테고리2:【%GETVARS(@"%듀얼리스트%_MZ_追カテ2:選択カード")%】
RESETCOLOR



PRINTL
CALL COLOR_LINE(설정カラー)
PRINTFORM （★）× {GETVAR(@"%듀얼리스트%_MZ_星:選択カード"),2,RIGHT}

TRYCALLFORM CARD_{選択カード_ID}, "攻撃力"
SIF GETVAR(@"%듀얼리스트%_MZ_攻:選択カード") > RESULT
	SETCOLOR C_GREEN
SIF GETVAR(@"%듀얼리스트%_MZ_攻:選択カード") < RESULT
	SETCOLOR C_RED
PRINTFORM 　　　　（공）　{GETVAR(@"%듀얼리스트%_MZ_攻:選択カード"),6,RIGHT}
RESETCOLOR

TRYCALLFORM CARD_{選択カード_ID}, "守備力"	
SIF GETVAR(@"%듀얼리스트%_MZ_守:選択カード") > RESULT
	SETCOLOR C_GREEN
SIF GETVAR(@"%듀얼리스트%_MZ_守:選択カード") < RESULT
	SETCOLOR C_RED
PRINTFORM （수）　{GETVAR(@"%듀얼리스트%_MZ_守:選択カード"),6,RIGHT}
RESETCOLOR

VARSET RESULT
;TRYCALLFORM CARD_{選択カード_ID}, "성별"
IF GETVAR(@"%듀얼리스트%_MZ_性:選択カード") == 牝性
	SETCOLOR C_PINK
	PRINTFORM （%"♀",2%）
ELSEIF GETVAR(@"%듀얼리스트%_MZ_性:選択カード") == 雄性
	SETCOLOR C_BLUE
	PRINTFORM （%"♂",2%）
ELSEIF GETVAR(@"%듀얼리스트%_MZ_性:選択カード") == ふたなり
	SETCOLOR C_P_PURPLE
	PRINTFORM （%"♀♂",2%）
ELSE
	PRINTFORM （%"성별없음",2%）
ENDIF	
RESETCOLOR

PRINTL


CALL COLOR_LINE(설정カラー)
PRINTFORM 【

PRINTFORM %GET_TALENTNAME(191,GETVAR(@"%듀얼리스트%_MZ_種:選択カード")),18,LEFT%/　

TRYCALLFORM CARD_{選択カード_ID}, "종류"
IF RESULT == 1
	PRINTFORM 효과
ELSEIF RESULT == 2
	PRINTFORM 통상
ELSEIF RESULT == 의식
	PRINTFORM 의식
ELSEIF RESULT == 융합
	PRINTFORM 융합
ELSEIF RESULT == 싱크로
	PRINTFORM 싱크로
ELSEIF RESULT == 엑시즈
	PRINTFORM 엑시즈
;ELSEIF RESULT == トークン
;	PRINTFORM 토큰
ELSEIF RESULT == 링크
	PRINTFORM 링크
ELSEIF RESULT == 초차원
	PRINTFORM 초차원


ELSEIF RESULT > 20 && RESULT <= 30
	IF RESULT == 通常마법
		PRINTFORM 통상마법
	ELSEIF RESULT == 지속마법
		PRINTFORM 지속마법
	ELSEIF RESULT == 装備마법
		PRINTFORM 장착마법
	ELSEIF RESULT == 速攻마법
		PRINTFORM 속공마법
	ELSEIF RESULT == フィールド
		PRINTFORM 필드
	ENDIF
ELSEIF RESULT > 30
	IF RESULT == 通常함정
		PRINTFORM 통상함정
	ELSEIF RESULT == 지속함정
		PRINTFORM 지속함정
	ELSE
		PRINTFORM 그 외

	ENDIF
ENDIF
IF GETVAR(@"%듀얼리스트%_MZ_Ｔ:選択カード") >= 1
	PRINTFORM /　튜너　　
ENDIF
PRINTFORM 】


PRINTL
CALL COLOR_LINE(설정カラー)
TRYCALLFORM CARD_EXPLANATION_{選択カード_ID}(종류)
PRINTL
CALL COLOR_LINE(설정カラー)








IF GETVAR(@"%듀얼리스트%_MZ_所有:選択カード") == 1
	PRINTFORM 【오너：자신】
ELSEIF GETVAR(@"%듀얼리스트%_MZ_所有:選択カード") == 2
	PRINTFORM 【오너：상대】
ENDIF


IF GETVAR(@"%듀얼리스트%_MZ_특수状態:選択カード") > 1 
	VARSET RESULTS
	CALLFORM CARDNAME_{GETVAR(@"%듀얼리스트%_MZ_특수状態:{選択カード}")}("名前")
	PRINTBUTTON @"【부여효과：%RESULTS%】", 9999
ENDIF	
PRINTL

PRINT 특수능력：
;PRINTFORML GETVAR(@"%듀얼리스트%_MZ_汎数:選択カード"):{GETVAR(@"%듀얼리스트%_MZ_汎数:選択カード")}
IF GETVAR(@"%듀얼리스트%_MZ_汎数:選択カード") != 0
	SETCOLOR C_RED
	RESULTS = 【 범용수 】:{GETVAR(@"%듀얼리스트%_MZ_汎数:選択カード")}
	PRINTBUTTON @"%RESULTS,12,LEFT%", 9041
	RESETCOLOR
ENDIF


IF GETVAR(@"%듀얼리스트%_MZ_貫通:選択カード") != 0
	SETCOLOR C_RED
	RESULTS = 【관통공격】
	PRINTBUTTON @"%RESULTS,12,LEFT%", 9000
	RESETCOLOR
ENDIF
IF GETVAR(@"%듀얼리스트%_MZ_攻誘:選択カード") != 0
	SETCOLOR C_RED
	RESULTS = 【공격유도】
	PRINTBUTTON @"%RESULTS,12,LEFT%", 9001
	RESETCOLOR
ENDIF
IF GETVAR(@"%듀얼리스트%_MZ_攻避:選択カード") != 0
	SETCOLOR C_RED
	RESULTS = 【공격회피】
	PRINTBUTTON @"%RESULTS,12,LEFT%", 9002
	RESETCOLOR
ENDIF

IF GETVAR(@"%듀얼리스트%_MZ_直攻:選択カード") != 0
	SETCOLOR C_RED
	RESULTS = 【직접공격】
	PRINTBUTTON @"%RESULTS,12,LEFT%", 9003
	RESETCOLOR
ENDIF

IF GETVAR(@"%듀얼리스트%_MZ_戦阻:選択カード") != 0
	SETCOLOR C_RED
	RESULTS = 【전투저지】
	PRINTBUTTON @"%RESULTS,12,LEFT%", 9004
	RESETCOLOR
ENDIF

IF GETVAR(@"%듀얼리스트%_MZ_連戦:選択カード") != 0
	SETCOLOR C_RED
	RESULTS = 【연속공격（몬스터）】
	PRINTBUTTON @"%RESULTS,12,LEFT%", 9006
	RESETCOLOR
ENDIF

IF GETVAR(@"%듀얼리스트%_MZ_守戦:選択カード") != 0
	SETCOLOR C_AQUA
	RESULTS = 【수비공격】
	PRINTBUTTON @"%RESULTS,12,LEFT%", 9007
	RESETCOLOR
ENDIF

;ザポルグ追記20241227
IF GETVAR(@"%듀얼리스트%_MZ_戦除:選択カード") != 0
	SETCOLOR C_AQUA
	RESULTS = 【전투제외】
	PRINTBUTTON @"%RESULTS,12,LEFT%", 9008
	RESETCOLOR
ENDIF

IF GETVAR(@"%듀얼리스트%_MZ_条達:選択カード") != 0
	SETCOLOR C_YELLOW
	RESULTS = 【각성상태】
	PRINTBUTTON @"%RESULTS,12,LEFT%", 9005
	RESETCOLOR
ENDIF

PRINTL
PRINT 각부위내성:
IF GETVAR(@"%듀얼리스트%_MZ_モ耐:選択カード") != 0 && GETVAR(@"%듀얼리스트%_MZ_魔耐:選択カード") != 0 && GETVAR(@"%듀얼리스트%_MZ_함정耐:選択カード") != 0
	SETCOLOR C_GOLD
	RESULTS = 【완전내성】
	PRINTBUTTON @"%RESULTS,12,LEFT%", 9010
	RESETCOLOR
ELSE
	IF GETVAR(@"%듀얼리스트%_MZ_モ耐:選択カード") != 0
		SETCOLOR C_ORANGE
		RESULTS = 【몬스터내성】
		PRINTBUTTON @"%RESULTS,12,LEFT%", 9011
		RESETCOLOR
	ENDIF
	IF GETVAR(@"%듀얼리스트%_MZ_魔耐:選択カード") != 0
		SETCOLOR C_MAGIC_G
		RESULTS = 【마법내성】
		PRINTBUTTON @"%RESULTS,12,LEFT%", 9012
		RESETCOLOR
	ENDIF
	IF GETVAR(@"%듀얼리스트%_MZ_함정耐:選択カード") != 0
		SETCOLOR C_P_PURPLE
		RESULTS = 【함정내성】
		PRINTBUTTON @"%RESULTS,12,LEFT%", 9013
		RESETCOLOR
	ENDIF
ENDIF
IF GETVAR(@"%듀얼리스트%_MZ_破耐:選択カード") != 0 && GETVAR(@"%듀얼리스트%_MZ_戦耐:選択カード") != 0 && GETVAR(@"%듀얼리스트%_MZ_対耐:選択カード") != 0
	SETCOLOR C_SILVER
	RESULTS = 【완전방벽】
	PRINTBUTTON @"%RESULTS,12,LEFT%", 9018
	RESETCOLOR
ELSE
	IF GETVAR(@"%듀얼리스트%_MZ_破耐:選択カード") != 0
		SETCOLOR C_AQUA_2
		RESULTS = 【파괴내성】
		PRINTBUTTON @"%RESULTS,12,LEFT%", 9014
		RESETCOLOR
	ENDIF
	IF GETVAR(@"%듀얼리스트%_MZ_戦耐:選択カード") != 0
		SETCOLOR C_AQUA_2
		RESULTS = 【전투내성】
		PRINTBUTTON @"%RESULTS,12,LEFT%", 9015
		RESETCOLOR
	ENDIF
	IF GETVAR(@"%듀얼리스트%_MZ_対耐:選択カード") != 0
		SETCOLOR C_AQUA_2
		RESULTS = 【대상내성】
		PRINTBUTTON @"%RESULTS,12,LEFT%", 9016
		RESETCOLOR
	ENDIF
ENDIF
IF GETVAR(@"%듀얼리스트%_MZ_一破:選択カード") != 0
	SETCOLOR C_AQUA_2
	RESULTS = 【일시적파괴내성】
	PRINTBUTTON @"%RESULTS,12,LEFT%", 9017
	RESETCOLOR
ENDIF

IF GETVAR(@"%듀얼리스트%_MZ_魔Ｃ:選択カード") > 0
	SETCOLOR C_FUSE_PUR
	RESULTS = 【마력카운터】:{GETVAR(@"%듀얼리스트%_MZ_魔Ｃ:選択カード")}
	PRINTBUTTON @"%RESULTS,12,LEFT%", 9030
	RESETCOLOR
ENDIF

IF GETVAR(@"%듀얼리스트%_MZ_個Ｃ:選択カード") > 0
	SETCOLOR C_FUSE_PUR
	RESULTS = 【개별카운터】:{GETVAR(@"%듀얼리스트%_MZ_個Ｃ:選択カード")}
	PRINTBUTTON @"%RESULTS,12,LEFT%", 9031
	RESETCOLOR
ENDIF

IF GETVAR(@"%듀얼리스트%_MZ_悪Ｃ:選択カード") > 0
	SETCOLOR C_FUSE_PUR
	RESULTS = 【악성카운터】:{GETVAR(@"%듀얼리스트%_MZ_悪Ｃ:選択カード")}
	PRINTBUTTON @"%RESULTS,12,LEFT%", 9032
	RESETCOLOR
ENDIF


PRINTL
PRINT 약화효과:
IF GETVAR(@"%듀얼리스트%_MZ_無効:選択カード") != 0
	SETCOLOR C_CREAM
	RESULTS = 【효과무효】
	PRINTBUTTON @"%RESULTS,12,LEFT%", 9020
	RESETCOLOR
ENDIF

IF GETVAR(@"%듀얼리스트%_MZ_発無:選択カード") != 0
	SETCOLOR C_CREAM
	RESULTS = 【발동불가】
	PRINTBUTTON @"%RESULTS,12,LEFT%", 9027
	RESETCOLOR
ENDIF

IF GETVAR(@"%듀얼리스트%_MZ_戦無:選択カード") != 0
	SETCOLOR C_CREAM
	RESULTS = 【공격불가】
	PRINTBUTTON @"%RESULTS,12,LEFT%", 9021
	RESETCOLOR
ENDIF
IF GETVAR(@"%듀얼리스트%_MZ_直無:選択カード") != 0
	SETCOLOR C_CREAM
	RESULTS = 【직공불가】
	PRINTBUTTON @"%RESULTS,12,LEFT%", 9022
	RESETCOLOR
ENDIF
IF GETVAR(@"%듀얼리스트%_MZ_戦狂:選択カード") != 0
	SETCOLOR C_RED
	RESULTS = 【전투광화】
	PRINTBUTTON @"%RESULTS,12,LEFT%", 9029
	RESETCOLOR
ENDIF


IF GETVAR(@"%듀얼리스트%_MZ_単攻:選択カード") != 0
	SETCOLOR C_CREAM
	RESULTS = 【단일공격】
	PRINTBUTTON @"%RESULTS,12,LEFT%", 9023
	RESETCOLOR
ENDIF




IF GETVAR(@"%듀얼리스트%_MZ_表固:選択カード") != 0
	SETCOLOR C_CREAM
	RESULTS = 【표시고정】
	PRINTBUTTON @"%RESULTS,12,LEFT%", 9024
	RESETCOLOR
ENDIF
IF GETVAR(@"%듀얼리스트%_MZ_不材:選択カード") != 0
	SETCOLOR C_CREAM
	RESULTS = 【소재불가】
	PRINTBUTTON @"%RESULTS,12,LEFT%", 9025
	RESETCOLOR
ENDIF


IF GETVAR(@"%듀얼리스트%_MZ_除処:選択カード") != 0
	SETCOLOR C_CREAM
	RESULTS = 【제외처리】
	PRINTBUTTON @"%RESULTS,12,LEFT%", 9026
	RESETCOLOR
ENDIF

IF GETVAR(@"%듀얼리스트%_MZ_終処:選択カード") != 0
	SETCOLOR C_CREAM
	IF GETVAR(@"%듀얼리스트%_MZ_終処:選択カード") == 破壊行き
		RESULTS = 【종료시처리】:破壊
	ELSEIF GETVAR(@"%듀얼리스트%_MZ_終処:選択カード") == 손패行き
		RESULTS = 【종료시처리】:손패
	ELSEIF GETVAR(@"%듀얼리스트%_MZ_終処:選択カード") == 덱行き
		RESULTS = 【종료시처리】:덱
	ELSEIF GETVAR(@"%듀얼리스트%_MZ_終処:選択カード") == 제외行き
		RESULTS = 【종료시처리】:제외
	ELSEIF GETVAR(@"%듀얼리스트%_MZ_終処:選択カード") == 返却行き
		RESULTS = 【종료시처리】:コントロール譲渡
	ELSEIF GETVAR(@"%듀얼리스트%_MZ_終処:選択カード") == 遅返却行き
		RESULTS = 【종료시처리】:コントロール譲渡（자신ターン）
	ENDIF
	PRINTBUTTON @"%RESULTS,12,LEFT%", 9040
	RESETCOLOR
ENDIF

IF GETVAR(@"%듀얼리스트%_MZ_束縛:選択カード") > -1
	SETCOLOR C_CREAM
	대상エリア = GETVAR(@"%듀얼리스트%_MZ_束縛:選択カード")
	IF INRANGE(대상エリア,0,19)
		IF INRANGE(대상エリア,0,5)
			TRYCALLFORM CARDNAME_{GETVAR(@"%듀얼리스트%_필드:대상エリア") }("名前")
			PRINTFORM 【속박처：%RESULTS% <%듀얼리스트%필드「{대상エリア}」>】
		ELSEIF INRANGE(대상エリア,10,15)
			대상エリア -= 10
			CALLFORM CARDNAME_{GETVAR(@"%듀얼리스트%_마함:대상エリア") }("名前")
			PRINTFORM 【속박처：%RESULTS% <%듀얼리스트%마함「{대상エリア}」>】
		ENDIF
	ELSEIF INRANGE(대상エリア,20,39)
		IF INRANGE(대상エリア,20,25)
			대상エリア -= 20
			TRYCALLFORM CARDNAME_{GETVAR(@"%듀얼리스트%_필드:대상エリア") }("名前")
			PRINTFORM 【속박처：%RESULTS% <%듀얼리스트%필드「{대상エリア}」>】
		ELSEIF INRANGE(대상エリア,30,35)
			대상エリア -= 30
			TRYCALLFORM CARDNAME_{GETVAR(@"%듀얼리스트%_마함:대상エリア")}("名前")
			PRINTFORM 【속박처：%RESULTS% <%듀얼리스트%마함「{대상エリア}」>】
		ENDIF

	ENDIF
	RESETCOLOR
ENDIF

IF GETVAR(@"%듀얼리스트%_MZ_発情:選択カード") != 0
	SETCOLOR C_V_PINK
	RESULTS = 【발정중❤】
	PRINTBUTTON @"%RESULTS,12,LEFT%", 9069
	RESETCOLOR
ENDIF


IF GETVAR(@"%듀얼리스트%_MZ_服状:選択カード") > 0
	SETCOLOR C_V_PINK
	SIF GETVAR(@"%듀얼리스트%_MZ_服状:選択カード") == 1
		RESULTS = 【노팬티】:{GETVAR(@"%듀얼리스트%_MZ_조교:選択カード")}％
	SIF GETVAR(@"%듀얼리스트%_MZ_服状:選択カード") >= 2
		RESULTS = 【　전라　】:{GETVAR(@"%듀얼리스트%_MZ_조교:選択カード")}％
	SIF GETVAR(@"%듀얼리스트%_MZ_服状:選択カード") >= 3
		RESULTS = 【 바니 】:{GETVAR(@"%듀얼리스트%_MZ_조교:選択カード")}％
	PRINTBUTTON @"%RESULTS,12,LEFT%", 9070
	RESETCOLOR
ENDIF


IF GETVAR(@"%듀얼리스트%_MZ_薬Ｃ:選択カード") > 0
	SETCOLOR C_FUSE_PUR
	RESULTS = 【약물카운터】:{GETVAR(@"%듀얼리스트%_MZ_薬Ｃ:選択カード")}
	PRINTBUTTON @"%RESULTS,12,LEFT%", 9071
	RESETCOLOR
ENDIF

IF GETVAR(@"%듀얼리스트%_MZ_조교:選択カード") > 0
	SETCOLOR C_V_PINK
	RESULTS = 【조교절정횟수】:{GETVAR(@"%듀얼리스트%_MZ_조교:選択カード")}
	PRINTBUTTON @"%RESULTS,12,LEFT%", 9072
	RESETCOLOR
ENDIF


SIF SKIP플래그 == 1
	GOTO SKIP_BUTTONS
PRINTL
CALL COLOR_LINE(설정カラー)
IF 듀얼리스트 == "자신"
	SETCOLOR C_G_YELLOW
	TRYCALLFORM CARDCAN_{자신_필드:選択カード}("자신",필드起動,"필드",選択カード)
	SIF RESULT == 1 && 자신_MZ_表:選択カード != 3
		PRINT [3] - 효과 발동　
	RESETCOLOR

	SETCOLOR C_G_YELLOW
	VARSET RESULT
	TRYCALLFORM CARDCAN_{자신_MZ_특수状態:選択カード}("자신",필드起動付与,"필드",選択カード)
	SIF RESULT == 1
		PRINT [4] - 부여 효과 발동　
	RESETCOLOR


	IF メインフェイズ == 1
		IF ターンプレイヤー == "자신"
			IF 자신_MZ_表固:選択カード >= 1
				PRINT 「1」- 표시형식변경불가　
			ELSEIF 자신_MZ_表変:選択カード == 1
				PRINT [1] - 표시형식변경　　　　
			ENDIF
		ENDIF
		IF 자신_MZ_接可:選択カード >= 1 || オプション_いつでも触れる == 1
			SETCOLOR C_PINK
			PRINTL
			PRINT [69] - 몬스터를 만진다
			RESETCOLOR
		ENDIF
	ELSEIF バトルフェイズ == 1
		IF ターンプレイヤー == "자신"
			SETCOLOR C_RED
			VARSET RESULT
			CALL CARD_ATK_CHECK("자신",選択カード)
			SIF RESULT == 0
				PRINT [5] - 공격 선언
			RESETCOLOR
		ENDIF
	ENDIF
ELSEIF 듀얼리스트 == "상대"
	SETCOLOR C_G_YELLOW
	VARSET RESULT
	TRYCALLFORM CARDCAN_{상대_MZ_특수状態:選択カード}("자신",付与효과,"필드",選択カード)
	SIF RESULT == 1
		PRINT [4] - 부여 효과 발동　
	RESETCOLOR
	IF メインフェイズ == 1
		IF 상대_MZ_接可:選択カード >= 1 || オプション_いつでも触れる == 1
			SETCOLOR C_PINK
			PRINTL
			PRINT [69] - 몬스터를 만진다
			RESETCOLOR
		ENDIF
	ENDIF
ENDIF

RESETCOLOR
PRINTL
PRINT [100] - 돌아간다
PRINTFORM %"",10%
VARSET RESULT
TRYCALLFORM CARD_{選択カード_ID}, "生成カード"
SIF RESULT >= 1
	PRINTFORM [10] - 생성 카드 확인
PRINTL
BINPUT




IF RESULT >= 9000
	IF RESULT == 9000
		PRINTL 【관통공격】
		PRINTL 이 카드는 수비 표시의 상대 몬스터를 공격했을 때,
		PRINTL 그 수비력을 공격력이 초과한 만큼 전투 대미지를 준다.
	ELSEIF RESULT == 9001
		PRINTL 【공격 유도】
		PRINTL 이 카드가 필드에 존재하는 한, 상대는 다른 몬스터를 공격할 수 없다.
		PRINTL 이 효과를 가진 카드가 2장 이상 존재할 경우, 상대는 공격할 수 없다.
	ELSEIF RESULT == 9002
		PRINTL 【공격 회피】
		PRINTL 이 카드는 공격 대상으로 지정되지 않는다.
		PRINTL (이 효과가 적용된 몬스터만 자신의 필드에 있을 경우, 상대의 공격은 직접 공격이 된다)

	ELSEIF RESULT == 9003
		PRINTL 【직접 공격】
		PRINTL 상대 필드에 몬스터가 있어도,
		PRINTL 이 몬스터는 상대 플레이어에게 직접 공격할 수 있다.
	ELSEIF RESULT == 9004
		PRINTL 【전투 방해】
		PRINTL 이 몬스터의 공격 중, 상대는 카드 효과를 발동할 수 없다.
		PRINTL 
	ELSEIF RESULT == 9005
		PRINTL 【각성 상태】
		PRINTL 이 카드는 조건을 만족한 상태로, 텍스트에 기재된 추가 효과를 사용할 수 있다.
		PRINTL 
	ELSEIF RESULT == 9006
		PRINTL 【연속 공격】
		PRINTL 이 카드는 상대 필드의 모든 몬스터를 공격할 수 있다.
		PRINTL 전투로 상대 몬스터를 파괴하지 못했거나, 직접 공격을 한 경우, 공격은 멈춘다.
		PRINTL 
	ELSEIF RESULT == 9007
		PRINTL 【수비 공격】
		PRINTL 이 카드는 수비 표시 상태로 공격할 수 있다.
		PRINTL 
		PRINTL 
	ELSEIF RESULT == 9010
		PRINTL 【완전 내성】
		PRINTL 이 카드는 제거(효과 파괴, 패로 되돌리기, 덱으로 되돌리기, 제외하기)
		PRINTL 와 같은 카드 효과를 받지 않으며, 상대 효과로 선택되지 않는다.
	ELSEIF RESULT == 9018
		PRINTL 【완전 철벽】
		PRINTL 이 카드는 대상으로 지정되지 않고, 전투나 효과로 파괴되지 않는다.
	ELSEIF RESULT == 9011
		PRINTL 【몬스터 내성】
		PRINTL 이 카드는 몬스터가 발동한 제거(효과 파괴, 패로 되돌리기, 덱으로 되돌리기, 제외하기)
		PRINTL 와 같은 카드 효과를 받지 않으며, 상대 몬스터의 효과로 선택되지 않는다.
	ELSEIF RESULT == 9012
		PRINTL 【마법 내성】
		PRINTL 이 카드는 발동된 마법에 의한 제거(효과 파괴, 패로 되돌리기, 덱으로 되돌리기, 제외하기)
		PRINTL 와 같은 카드 효과를 받지 않으며, 상대의 마법으로 선택되지 않는다.
	ELSEIF RESULT == 9013
		PRINTL 【함정 내성】
		PRINTL 이 카드는 발동된 함정에 의한 제거(효과 파괴, 패로 되돌리기, 덱으로 되돌리기, 제외하기)
		PRINTL 와 같은 카드 효과를 받지 않으며, 상대의 함정으로 선택되지 않는다.
	ELSEIF RESULT == 9014
		PRINTL 【파괴 내성】
		PRINTL 이 카드는 효과에 의한 파괴 효과를 받지 않는다.
		PRINTL 
	ELSEIF RESULT == 9015
		PRINTL 【전투 내성】
		PRINTL 이 카드는 전투로 파괴되지 않는다.
		PRINTL 
	ELSEIF RESULT == 9016
		PRINTL 【대상 내성】
		PRINTL 이 카드는 카드의 효과로 선택되지 않는다.
		PRINTL (선택하지 않는 조건 효과, 랜덤 제거, 전체 파괴 효과 등은 적용받는다)
	ELSEIF RESULT == 9017
		PRINTL 【일시 파괴 내성】
		PRINTL 이 카드는 턴당 1회만 카드 효과나 전투로 파괴되지 않는다.

	ELSEIF RESULT == 9020
		PRINTL 【효과 무효】
		PRINTL 이 카드의 효과는 무효화되어, 발동할 수 없다.
		PRINTL 
	ELSEIF RESULT == 9027
		PRINTL 【발동 무효】
		PRINTL 이 카드의 효과는 발동할 수 없다.
		PRINTL 
	ELSEIF RESULT == 9021
		PRINTL 【공격 불가】
		PRINTL 이 카드는 공격을 할 수 없다.
		PRINTL 
	ELSEIF RESULT == 9022
		PRINTL 【직공 불가】
		PRINTL 이 카드는 직접 공격을 할 수 없다.
		PRINTL 

	ELSEIF RESULT == 9023
		PRINTL 【단일 공격】
		PRINTL 배틀 페이즈 때, 플레이어는 이 카드로만 공격할 수 있다.
		PRINTL 
	ELSEIF RESULT == 9024
		PRINTL 【표시 고정】
		PRINTL 이 카드는 효과 이외에는 표시 변경을 할 수 없다.
		PRINTL 
	ELSEIF RESULT == 9025
		PRINTL 【소재 불가】
		PRINTL 이 카드는 카드를 특수 소환하기 위한 소재로 사용할 수 없다.
		PRINTL 
	ELSEIF RESULT == 9026
		PRINTL 【제외 처리】
		PRINTL 이 카드는 묘지로 보내질 때, 대신 제외된다.
		PRINTL 
	ELSEIF RESULT == 9030
		PRINTL 【마력카운터】
		PRINTL 다양한 능력에 쓰이는 카운터.
		PRINTL 
	ELSEIF RESULT == 9031
		PRINTL 【개별 카운터】
		PRINTL 주로 그 몬스터의 효과 내에서 자체적으로 사용하는 카운터.
		PRINTL 
	ELSEIF RESULT == 9032
		PRINTL 【악성 카운터】
		PRINTL 나쁜 상태 이상에 연결되는 카운터.
		PRINTL 
	ELSEIF RESULT == 9029
		PRINTL 【전투광화】
		PRINTL 이 몬스터는 가능하다면 반드시 공격해야 한다.
		PRINTL 
	ELSEIF RESULT == 9040
		PRINTL 【종료 시 처리】
		PRINTL 턴 종료시에 행해지는 제거 처리.
		PRINTL 
	ELSEIF RESULT == 9041
		PRINTL 【범용 수치】
		PRINTL 그 몬스터가 가진 효과로 정의되는 수치.
		PRINTL 


	ELSEIF RESULT == 9069
		SETCOLOR C_V_PINK
		PRINTL 【발정중❤】
		PRINTL 이 몬스터는 발정하고 있다。
		PRINTL 
		RESETCOLOR
	ELSEIF RESULT == 9070
		SETCOLOR C_V_PINK
		IF GETVAR(@"%듀얼리스트%_MZ_服状:選択カード") == 1
			PRINTL 【노팬티】
			PRINTL 바람이 불어 진정되지 않는 것 같다。
			PRINTL 
		ELSEIF GETVAR(@"%듀얼리스트%_MZ_服状:選択カード") == 2
			PRINTL 【전라】
			PRINTL 부끄러운 듯이 양손으로 소중한 곳을 가리고 있다。
			PRINTL 
		ENDIF
		RESETCOLOR

	ELSEIF RESULT == 9071
		PRINTFORML 【Ｄ카운터】:{GETVAR(@"%듀얼리스트%_MZ_薬Ｃ:選択カード")}
		PRINTL 약에 대한 중독도・오염도。
		PRINTL 
		
	ELSEIF RESULT == 9072
		SETCOLOR C_V_PINK
		PRINTFORML 【조교절정】:{GETVAR(@"%듀얼리스트%_MZ_조교:選択カード")}
		PRINTL 이 몬스터의 조교강도
		PRINTL 
		RESETCOLOR
	ELSEIF RESULT == 9999
		특수カード_ID = GETVAR(@"%듀얼리스트%_MZ_특수状態:{選択カード}")
		TRYCALLFORM CARD_UI(특수カード_ID);　특수状態관리（受け渡し必要なし）
		PRINTW
	ENDIF
	PRINTW
ELSEIF RESULT == 1000
	CALL PRINT_STATE_DUEL(選択カード_ID,2)
	WAIT
ELSEIF RESULT == 10

	TRYCALLFORM CARD_{選択カード_ID}, "生成カード"
	トークン보존:0 = RESULT
	トークン보존:1 = RESULT:1
	トークン보존:2 = RESULT:2
	トークン보존:3 = RESULT:3
	トークン보존:4 = RESULT:4
	FOR カウンタ,0,5
		IF トークン보존:カウンタ >= 1
			$LOOP_BACK_HERE
			TRYCALLFORM CARD_UI(トークン보존:カウンタ,2)
			PRINTFORM [0] - 다음 카드
			PRINTL
			BINPUT
			IF RESULT == 1000
				CALL PRINT_STATE_DUEL(トークン보존:カウンタ,2)
				WAIT
				GOTO LOOP_BACK_HERE
			ENDIF
		ENDIF
	NEXT
ELSE
	$SKIP_BUTTONS
	SIF SKIP플래그 == 2
		WAIT
	RETURN RESULT
ENDIF

GOTO INPUTLOOP





@CARD_UI_MAGIC(듀얼리스트,選択カード,SKIP플래그)
#DIMS DYNAMIC 듀얼리스트
#DIMS DYNAMIC 対面者
#DIM DYNAMIC 選択カード
#DIM DYNAMIC 選択カード_ID
#DIM DYNAMIC 특수カード_ID
#DIM DYNAMIC SKIP플래그
#DIM DYNAMIC カードID
#DIM DYNAMIC 캐릭터番号
#DIM DYNAMIC 설정カラー
#DIM DYNAMIC トークン보존,10
#DIM DYNAMIC カウンタ

CALL 対面者판정(듀얼리스트)
対面者 = %RESULTS%
$INPUTLOOP
選択カード_ID = GETVAR(@"%듀얼리스트%_마함:選択カード")

TRYCALLFORM CARD_{選択カード_ID}, "종류"
IF RESULT == 1
	설정カラー = C_MONS_BR
ELSEIF RESULT == 2
	설정カラー = C_BASM_BR
ELSEIF RESULT == 의식
	설정カラー = C_GISK_BLUE
ELSEIF RESULT == 융합
	설정カラー = C_FUSE_PUR
ELSEIF RESULT == 싱크로
	설정カラー = C_SYN_WHITE
ELSEIF RESULT == 엑시즈
	설정カラー = C_XYZ_BLACK
ELSEIF RESULT == 링크
	설정カラー = C_LINK_BLUE
ELSEIF RESULT == 초차원
	설정カラー = C_PSY_RED
ELSEIF RESULT >= 20 && RESULT < 30
	설정カラー = C_MAGIC_G
ELSEIF RESULT >= 30
	설정カラー = C_TRAP_PUR
ENDIF




CALL COLOR_LINE(설정カラー)
PRINTFORML ■ 마법＆함정 존　카드상세화면
CALL COLOR_LINE(설정カラー)
PRINTL
CALL PRINT_STATE_DUEL(選択カード_ID)
CALL COLOR_LINE(설정カラー)


IF 듀얼리스트 == "자신" || (듀얼리스트 == "상대" && 상대_魔_表:選択カード == 1 || デバッグコマンド == 1)

	VARSET RESULTS
	TRYCALLFORM CARDNAME_{選択カード_ID}, "名前"
	PRINTFORM <<%RESULTS%>>

	VARSET RESULTS
	TRYCALLFORM CARDNAME_{選択カード_ID}, "要塞名"
	IF RESULTS != ""
		TRYCALLFORM CARDNAME_{選択カード_ID}, "要塞名"
		PRINTFORM （요새명）<<%RESULTS%>>
	ENDIF

	IF GETVAR(@"%듀얼리스트%_魔_変化元ID:選択カード") >= 1
		TRYCALLFORM CARDNAME_{GETVAR(@"%듀얼리스트%_魔_変化元ID:選択カード")}, "名前"
		PRINTFORM （추가명칭）<<%RESULTS%>>
	ENDIF


	TRYCALLFORM CARD_{選択カード_ID}, "속성"
	IF RESULT == 1
		PRINTFORM （%"빛",2%）
	ELSEIF RESULT == 2
		PRINTFORM （%"어둠",2%）
	ELSEIF RESULT == 3
		PRINTFORM （%"땅",2%）
	ELSEIF RESULT == 4
		PRINTFORM （%"물",2%）
	ELSEIF RESULT == 5
		PRINTFORM （%"화염",2%）
	ELSEIF RESULT == 6
		PRINTFORM （%"바람",2%）
	ELSEIF RESULT == 7
		PRINTFORM （%"신",2%）
	ENDIF	

	PRINTL
	CALL COLOR_LINE(설정カラー)
	PRINT 소속 카테고리:
	TRYCALLFORM CARDNAME_{選択カード_ID}, "カテゴリ"
	SIF RESULTS:0 != ""
		PRINTFORM 【%RESULTS:0%】
	SIF RESULTS:1 != ""
		PRINTFORM 【%RESULTS:1%】
	SIF RESULTS:2 != ""
		PRINTFORM 【%RESULTS:2%】
	SIF RESULTS:3 != ""
		PRINTFORM 【%RESULTS:3%】

	PRINTL

	TRYCALLFORM CARD_{選択カード_ID}, "종류"
	IF INRANGE (RESULT, 1, 10)
		CALL COLOR_LINE(설정カラー)
		TRYCALLFORM CARD_{選択カード_ID}, "レベル"
		PRINTFORM （★）× {RESULT,2,RIGHT}
		TRYCALLFORM CARD_{選択カード_ID}, "攻撃力"	
		PRINTFORM 　　　　（공）　{(RESULT),6,RIGHT}
		TRYCALLFORM CARD_{選択カード_ID}, "守備力"	
		PRINTFORM （수）　{(RESULT),6,RIGHT}

		VARSET RESULT
		TRYCALLFORM CARD_{選択カード_ID}, "성별"
		캐릭터番号 = NO_TO_CHARANUM(選択カード_ID)
		IF 캐릭터番号 >= 1 && オプション_성별
			RESULT = TALENT:캐릭터番号:성별
		ENDIF
		;〇属と出るのが余計だったので個別作製
		IF RESULT == 牝性
			SETCOLOR C_PINK
			PRINTFORM （%"♀",2%）
		ELSEIF RESULT == 雄性
			SETCOLOR C_BLUE
			PRINTFORM （%"♂",2%）
		ELSEIF RESULT == ふたなり
			SETCOLOR C_P_PURPLE
			PRINTFORM （%"♀♂",2%）
		ELSE
			PRINTFORM （%"성별없음",2%）
		ENDIF	
		RESETCOLOR

		PRINTL
	ENDIF
	CALL COLOR_LINE(설정カラー)
	PRINTFORM 【
	TRYCALLFORM CARD_{選択カード_ID}, "종족"	
	SIF RESULT
		PRINTFORM %GET_TALENTNAME(191,RESULT),12,LEFT%/　

	TRYCALLFORM CARD_{選択カード_ID}, "종류"
	IF RESULT == 1
		PRINTFORM 효과
	ELSEIF RESULT == 2
		PRINTFORM 통상
	ELSEIF RESULT == 의식
		PRINTFORM 의식
	ELSEIF RESULT == 융합
		PRINTFORM 융합
	ELSEIF RESULT == 싱크로
		PRINTFORM 싱크로
	ELSEIF RESULT == 엑시즈
		PRINTFORM 엑시즈
;	ELSEIF RESULT == トークン
;		PRINTFORM 토큰
	ELSEIF RESULT == 링크
		PRINTFORM 링크
	ELSEIF RESULT == 초차원
		PRINTFORM 초차원


	ELSEIF RESULT > 20 && RESULT <= 30
		IF RESULT == 通常마법
			PRINTFORM 통상마법
		ELSEIF RESULT == 지속마법
			PRINTFORM 지속마법
		ELSEIF RESULT == 装備마법
			PRINTFORM 장착마법
		ELSEIF RESULT == 速攻마법
			PRINTFORM 속공마법
		ELSEIF RESULT == フィールド
			PRINTFORM 필드
		ENDIF
	ELSEIF RESULT > 30
		IF RESULT == 通常함정
			PRINTFORM 통상함정
		ELSEIF RESULT == 지속함정
			PRINTFORM 지속함정
		ELSE
			PRINTFORM 그 외
		ENDIF
	ENDIF
	VARSET RESULT
	TRYCALLFORM CARD_{選択カード_ID}, "튜너"
	SIF RESULT >= 1
		PRINTFORM /　튜너　　
	PRINTFORM 】

	SIF GETVARS(@"%듀얼리스트%_魔_追カテ:選択カード")  != "" || GETVARS(@"%듀얼리스트%_魔_追カテ2:選択カード")  != "" ;Anonym추가
	PRINTL

	SETCOLOR C_GREEN
	SIF GETVARS(@"%듀얼리스트%_魔_追カテ:選択カード")  != ""
		PRINTFORM 추가 카테고리:【%GETVARS(@"%듀얼리스트%_魔_追カテ:選択カード")%】
	RESETCOLOR

	SETCOLOR C_GREEN
	SIF GETVARS(@"%듀얼리스트%_魔_追カテ2:選択カード")  != ""
		PRINTFORM 추가 카테고리2:【%GETVARS(@"%듀얼리스트%_魔_追カテ2:選択カード")%】
	RESETCOLOR

	PRINTL


	CALL COLOR_LINE(설정カラー)
	
	TRYCALLFORM CARD_EXPLANATION_{選択カード_ID}
	PRINTL
	CALL COLOR_LINE(설정カラー)

ELSEIF 듀얼리스트 == "상대" && 상대_魔_表:選択カード >= 2
	IF 상대_魔_表:選択カード == 2
		CUSTOMDRAWLINE — 
		PRINTFORML <<？？？？？>>
		CUSTOMDRAWLINE —
		PRINTL 뒷면표시카드（발동가능）
	ELSEIF 상대_魔_表:選択カード == 3
		CUSTOMDRAWLINE —
		PRINTFORML <<？？？？？>>
		CUSTOMDRAWLINE —
		PRINTL 뒷면표시카드（발동불가능）
	ENDIF
ENDIF



IF GETVAR(@"%듀얼리스트%_魔_所有:選択カード") == 1
	PRINTFORM 【오너：자신】
ELSEIF GETVAR(@"%듀얼리스트%_魔_所有:選択カード") == 2
	PRINTFORM 【오너：상대】
ENDIF

IF GETVAR(@"%듀얼리스트%_魔_装:選択カード") != 5
	IF GETVAR(@"%듀얼리스트%_魔_装:選択カード") >= 6
		CALLFORM CARDNAME_{GETVAR(@"%対面者%_필드:((%듀얼리스트%_魔_装:選択カード) - 6)")}("名前")
		PRINTFORM 【장착처：%RESULTS% <%対面者%필드「{GETVAR(@"%듀얼리스트%_魔_装:選択カード") - 6}」>】
	ELSE
		CALLFORM CARDNAME_{GETVAR(@"%듀얼리스트%_필드:(%듀얼리스트%_魔_装:選択カード)")}("名前")
		PRINTFORM 【장착처：%RESULTS% <%듀얼리스트%필드「{GETVAR(@"%듀얼리스트%_魔_装:選択カード")}」>】
	ENDIF
ENDIF

IF GETVAR(@"%듀얼리스트%_魔_魔Ｃ:選択カード") > 0
	SETCOLOR C_FUSE_PUR
	RESULTS = 【마력카운터】:{GETVAR(@"%듀얼리스트%_魔_魔Ｃ:選択カード")}
	PRINTBUTTON @"%RESULTS,12,LEFT%", 9030
	RESETCOLOR
ENDIF



IF GETVAR(@"%듀얼리스트%_魔_個Ｃ:選択カード") > 0
	SETCOLOR C_FUSE_PUR
	RESULTS = 【개별카운터】:{GETVAR(@"%듀얼리스트%_魔_個Ｃ:選択カード")}
	PRINTBUTTON @"%RESULTS,12,LEFT%", 9031
	RESETCOLOR
ENDIF

IF GETVAR(@"%듀얼리스트%_魔_悪Ｃ:選択カード") > 0
	SETCOLOR C_FUSE_PUR
	RESULTS = 【악성카운터】:{GETVAR(@"%듀얼리스트%_魔_悪Ｃ:選択カード")}
	PRINTBUTTON @"%RESULTS,12,LEFT%", 9032
	RESETCOLOR
ENDIF

PRINTL

PRINTL 각부내성:
IF GETVAR(@"%듀얼리스트%_魔_破耐:選択カード") != 0
	SETCOLOR C_AQUA_2
	RESULTS = 【파괴내성】
	PRINTBUTTON @"%RESULTS,12,LEFT%", 9014
	RESETCOLOR
ENDIF

IF GETVAR(@"%듀얼리스트%_魔_対耐:選択カード") != 0
	SETCOLOR C_AQUA_2
	RESULTS = 【대상내성】
	PRINTBUTTON @"%RESULTS,12,LEFT%", 9016
	RESETCOLOR
ENDIF

IF GETVAR(@"%듀얼리스트%_魔_一破:選択カード") != 0
	SETCOLOR C_AQUA_2
	RESULTS = 【일시적파괴내성】
	PRINTBUTTON @"%RESULTS,12,LEFT%", 9017
	RESETCOLOR
ENDIF

PRINTL
PRINTL 약화효과:
IF GETVAR(@"%듀얼리스트%_魔_無効:選択カード") != 0
	SETCOLOR C_CREAM
	RESULTS = 【효과무효】
	PRINTBUTTON @"%RESULTS,12,LEFT%", 9020
	RESETCOLOR
ENDIF

IF GETVAR(@"%듀얼리스트%_魔_無効:選択カード") != 0
	SETCOLOR C_CREAM
	RESULTS = 【발동불가】
	PRINTBUTTON @"%RESULTS,12,LEFT%", 9027
	RESETCOLOR
ENDIF

IF GETVAR(@"%듀얼리스트%_魔_除処:選択カード") != 0
	SETCOLOR C_CREAM
	RESULTS = 【제외처리】
	PRINTBUTTON @"%RESULTS,12,LEFT%", 9026
	RESETCOLOR
ENDIF

PRINTL
CALL COLOR_LINE(설정カラー)

SIF SKIP플래그 == 1
	GOTO SKIP_BUTTONS


IF 듀얼리스트 == "자신"

	SETCOLOR C_G_YELLOW
	TRYCALLFORM CARDCAN_{자신_마함:選択カード}("자신",마함起動,"마함",選択カード)
	SIF RESULT == 1
		PRINT [3] - 효과발동
	RESETCOLOR
	IF メインフェイズ == 1
		IF 자신_魔_接可:選択カード >= 1 || オプション_いつでも触れる == 1
			SETCOLOR C_PINK
			PRINTL
			PRINT [69] - 카드를 만진다
			RESETCOLOR
		ENDIF
	ENDIF

ELSEIF 듀얼리스트 == "상대"

ENDIF


PRINTL
PRINT [100] - 돌아간다
PRINTFORM %"",10%
VARSET RESULT
TRYCALLFORM CARD_{選択カード_ID}, "生成カード"
SIF RESULT >= 1
	PRINTFORM [10] - 생성 카드 확인
PRINTL
BINPUT

IF RESULT >= 9000

	IF RESULT == 9010
		PRINTL 【완전 내성】
		PRINTL 이 카드는 제거(효과 파괴, 패로 되돌리는 효과, 덱으로 되돌리기, 제외하기)
		PRINTL 와 같은 카드 효과를 받지 않으며, 상대의 효과로 선택되지 않는다.
	ELSEIF RESULT == 9011
		PRINTL 【몬스터 내성】
		PRINTL 이 카드는 몬스터가 발동한 제거(효과 파괴, 패로 되돌리는 효과, 덱으로 되돌리기, 제외하기)
		PRINTL 와 같은 카드 효과를 받지 않으며, 상대 몬스터의 효과로 선택되지 않는다.
	ELSEIF RESULT == 9012
		PRINTL 【마법 내성】
		PRINTL 이 카드는 발동된 마법에 의한 제거(효과 파괴, 패로 되돌리는 효과, 덱으로 되돌리기, 제외하기)
		PRINTL 와 같은 카드 효과를 받지 않으며, 상대의 마법으로 선택되지 않는다.
	ELSEIF RESULT == 9013
		PRINTL 【함정 내성】
		PRINTL 이 카드는 발동된 함정에 의한 제거(효과 파괴, 패로 되돌리는 효과, 덱으로 되돌리기, 제외하기)
		PRINTL 와 같은 카드 효과를 받지 않으며, 상대의 함정으로 선택되지 않는다.
	ELSEIF RESULT == 9014
		PRINTL 【파괴 내성】
		PRINTL 이 카드는 효과에 의한 파괴 효과를 받지 않는다.
		PRINTL 
	ELSEIF RESULT == 9015
		PRINTL 【전투 내성】
		PRINTL 이 카드는 전투로 파괴되지 않는다.
		PRINTL 
	ELSEIF RESULT == 9016
		PRINTL 【대상 내성】
		PRINTL 이 카드는 카드의 효과로 선택되지 않는다.
		PRINTL (선택하지 않는 조건 효과, 랜덤한 제거, 전체 파괴 효과 등은 적용받는다)
	ELSEIF RESULT == 9017
		PRINTL 【일시 파괴 내성】
		PRINTL 이 카드는 1턴에 1번만 카드 효과/전투에 의해선 파괴되지 않는다.

	ELSEIF RESULT == 9020
		PRINTL 【효과 무효】
		PRINTL 이 카드의 효과는 무효화되어 있으며, 발동도 할 수 없다.
		PRINTL 
	ELSEIF RESULT == 9021
		PRINTL 【공격 불가】
		PRINTL 이 카드는 공격을 할 수 없다.
		PRINTL 
	ELSEIF RESULT == 9022
		PRINTL 【직공 불가】
		PRINTL 이 카드는 직접 공격을 할 수 없다.
		PRINTL 

	ELSEIF RESULT == 9023
		PRINTL 【단일 공격】
		PRINTL 배틀 페이즈 중, 플레이어는 이 카드로만 공격할 수 있다.
		PRINTL 
	ELSEIF RESULT == 9024
		PRINTL 【표시 고정】
		PRINTL 이 카드는 효과 이외에는 표시를 변경할 수 없다.
		PRINTL 
	ELSEIF RESULT == 9025
		PRINTL 【소재 불가】
		PRINTL 이 카드는 카드를 특수 소환하기 위한 소재로 사용할 수 없다.
		PRINTL 
	ELSEIF RESULT == 9026
		PRINTL 【제외 처리】
		PRINTL 이 카드는 묘지로 보내질 때, 대신 제외된다.
		PRINTL 
	ELSEIF RESULT == 9027
		PRINTL 【발동무효】
		PRINTL 이 카드의 효과는 발동할 수 없다.
		PRINTL 
	ELSEIF RESULT == 9030
		PRINTL 【마력카운터】
		PRINTL 다양한 능력에 쓰이는 카운터.
		PRINTL 
	ELSEIF RESULT == 9031
		PRINTL 【개별 카운터】
		PRINTL 주로 그 몬스터의 효과, 카테고리 내에서 자체적으로 사용하는 카운터.
		PRINTL 
	ELSEIF RESULT == 9040
		PRINTL 【종료 시 처리】
		PRINTL 턴 종료시에 행해지는 제거 처리.
		PRINTL 
	ELSEIF RESULT == 9999
		특수カード_ID = GETVAR(@"%듀얼리스트%_MZ_특수状態:{選択カード}")
		TRYCALLFORM CARD_UI(특수カード_ID,1);　특수状態관리（受け渡し必要なし）
		PRINTW
	ENDIF
	PRINTW
ELSEIF RESULT == 1000
	CALL PRINT_STATE_DUEL(選択カード_ID,2)
	WAIT
ELSEIF RESULT == 10

	TRYCALLFORM CARD_{選択カード_ID}, "生成カード"
	トークン보존:0 = RESULT
	トークン보존:1 = RESULT:1
	トークン보존:2 = RESULT:2
	トークン보존:3 = RESULT:3
	トークン보존:4 = RESULT:4
	FOR カウンタ,0,5
		IF トークン보존:カウンタ >= 1
			$LOOP_BACK_HERE
			TRYCALLFORM CARD_UI(トークン보존:カウンタ,2)
			PRINTFORM [0] - 다음 카드
			PRINTL
			BINPUT
			IF RESULT == 1000
				CALL PRINT_STATE_DUEL(トークン보존:カウンタ,2)
				WAIT
				GOTO LOOP_BACK_HERE
			ENDIF
		ENDIF
	NEXT
ELSE
	$SKIP_BUTTONS
	SIF SKIP플래그 == 2
		WAIT
	RETURN RESULT
ENDIF

GOTO INPUTLOOP





@CARD_UI_RESET
VARSET 確認듀얼리스트
VARSET 確認종류,-1
VARSET 確認ゾーン
VARSET 確認場所
VARSET フリー確認
;VARSET 確認지속


@CARD_ABLE(효과番号,종류:0,종류:1,종류:2,종류:3,종류:4,종류:5,종류:6,종류:7,종류:8,종류:9,종류:10)
#DIM DYNAMIC 종류,99
#DIMS DYNAMIC 듀얼리스트
#DIMS DYNAMIC ゾーン
#DIM DYNAMIC 場所
#DIM DYNAMIC カード_ID
#DIM DYNAMIC 효과番号
#DIM DYNAMIC 条件달성
#DIM DYNAMIC 確認지속

SIF 検索플래그 == 1
	RETURN 0

듀얼리스트 = %確認듀얼리스트%
ゾーン = %確認ゾーン%
場所 = 確認場所

;PRINTFORML ここ通過１
SIF 듀얼리스트 == "" || ゾーン == ""
	RETURN 0
SIF ゾーン == "효과処理"
	RETURN 1

SIF GROUPMATCH(종류, 지속효과, 攻守変動, 常在無効)
	確認지속 = 1

;PRINTFORML ここ通過２
カード_ID = GETVAR(@"%듀얼리스트%_%ゾーン%:場所")
IF フリー確認 == 1 && 確認지속 == 1
	TRYCALLFORM CARDCAN_{カード_ID}(듀얼리스트,지속효과,ゾーン,場所)
	SIF RESULT == 1
		条件달성 = 1
	TRYCALLFORM CARDCAN_{カード_ID}(듀얼리스트,攻守変動,ゾーン,場所)
	SIF RESULT == 1
		条件달성 = 1

	TRYCALLFORM CARDCAN_{カード_ID}(듀얼리스트,常在無効,ゾーン,場所)
	SIF RESULT == 1
		条件달성 = 1

	IF 条件달성 == 1
		SETCOLOR C_GREEN
		PRINT (適用中)
		RESETCOLOR
		RETURN 1
	ENDIF
ENDIF
;PRINTFORML ここ通過３


VARSET 条件달성
SELECTCASE 효과番号
CASE 1
	SIF 발동済_1(듀얼리스트,カード_ID)
		条件달성 = 1
CASE 2
	SIF 발동済_2(듀얼리스트,カード_ID)
		条件달성 = 1
CASE 3
	SIF 발동済_3(듀얼리스트,カード_ID)
		条件달성 = 1
CASE 10
	SIF 효과발동済(듀얼리스트,場所,ゾーン)
		条件달성 = 1
CASE 11
	SIF 효과발동済(듀얼리스트,場所,ゾーン)
		条件달성 = 1
CASE 20
	SIF 발동済_D1(듀얼리스트,カード_ID)
		条件달성 = 1
CASE 21
	SIF 발동済_D2(듀얼리스트,カード_ID)
		条件달성 = 1
ENDSELECT

IF 条件달성 == 1
	SETCOLOR C_GRAY
	PRINT (발동됨)
	RESETCOLOR
	RETURN 1
ENDIF

IF 確認종류 == フリー誘発
	SIF 종류 == 필드起動 && ゾーン != "필드"
		RETURN 0
	SIF 종류 == 마함起動 && ゾーン != "마함"
		RETURN 0
	SIF 종류 == 손패起動 && ゾーン != "손패"
		RETURN 0
	SIF 종류 == 묘지起動 && ゾーン != "묘지"
		RETURN 0
ENDIF

SIF !MATCH(종류, 確認종류)
	RETURN 0
종류 = 確認종류
TRYCALLFORM CARDCAN_{カード_ID}(듀얼리스트,종류,ゾーン,場所)
IF RESULT == 1
	SETCOLOR C_YELLOW
	PRINT (발동가)
	RESETCOLOR
	RETURN 1
ENDIF


RETURN 0

@DIPLAY_BOARD(설정플래그)
#DIM DYNAMIC カウンタ
#DIM DYNAMIC 승리판정
#DIM DYNAMIC 選択カード
#DIM DYNAMIC 덱選択
#DIM DYNAMIC 상대덱選択
#DIM DYNAMIC 攻撃誘導플래그
#DIM DYNAMIC 이벤트플래그
#DIM DYNAMIC 連戦플래그
#DIM DYNAMIC 발동カード_ID
#DIM DYNAMIC 裏側플래그
#DIM DYNAMIC 先攻설정
#DIMS DYNAMIC 名前ボタン
#DIM DYNAMIC 選択カード_ID
#DIM DYNAMIC 설정플래그

;PRINTFORML チェック！효과条件名前:%효과条件名前%　素材条件종류:{素材条件종류}
SIF 설정플래그 == 2
	フィールド표시中 = 1

IF ターンプレイヤー == "자신"
	SETCOLOR C_L_BLUE
ELSE
	SETCOLOR C_L_RED
ENDIF
;SETCOLOR C_L_RED

PRINTPLAIN ┌─────────────────────────────────────>E<────────────────────────────────────
PRINTBUTTON "●",8888
RESETCOLOR
PRINTL

CALL CARD_MAGINFO("상대")

IF ターンプレイヤー == "자신"
	SETCOLOR C_L_BLUE
ELSE
	SETCOLOR C_L_RED
ENDIF
;SETCOLOR C_L_BLUE
PRINTPLAIN └┬─────────────────────────────────>
;SETCOLOR C_L_RED
PRINTPLAIN MAGIC / TRAPS<────────────────────────────────┬┘
PRINTL
RESETCOLOR

CALL CARD_SUMINFO("상대")

IF ターンプレイヤー == "자신"
	SETCOLOR C_L_BLUE
ELSE
	SETCOLOR C_L_RED
ENDIF
;SETCOLOR C_L_BLUE
PRINTFORM 　｜

IF ターンプレイヤー == "자신"
	SETCOLOR C_L_BLUE
ELSE
	SETCOLOR C_L_RED
ENDIF
PRINTFORM 　┏──%"",20%
SETCOLOR C_L_BLUE
名前ボタン = 【%CALLNAME:MASTER,17,LEFT%】
PRINTBUTTON @"%名前ボタン%",1101

IF ターンプレイヤー == "자신"
	SETCOLOR C_L_BLUE
ELSE
	SETCOLOR C_L_RED
ENDIF
;8削減
PRINTFORM ——————— ／
IF 자신_フィールド名 != "" && 상대_フィールド名 != ""
	SETCOLOR C_L_BLUE
	SUBSTRING 자신_フィールド名, 0, 12
	PRINTFORM %RESULTS,12,LEFT%
	IF ターンプレイヤー == "자신"
		SETCOLOR C_L_BLUE
	ELSE
		SETCOLOR C_L_RED
	ENDIF
	PRINTFORM ／
	SETCOLOR C_L_RED
	SUBSTRING 상대_フィールド名, 0, 12
	PRINTFORM %RESULTS,12,LEFT%
ELSEIF 자신_フィールド名 != ""
	SETCOLOR C_L_BLUE
	PRINTFORM %자신_フィールド名,26,LEFT%
ELSEIF 상대_フィールド名 != ""
	SETCOLOR C_L_RED
	PRINTFORM %상대_フィールド名,26,RIGHT%
ELSE
	PRINTFORM %"",26%
ENDIF
	
PRINTFORM ＼──%"",20%


RESETCOLOR

PRINTFORM 

SETCOLOR C_L_RED
IF OPPOSER == -1
	IF OPPOSER名 != ""
		名前ボタン = 【%OPPOSER名,17,LEFT%】
	ELSE
		名前ボタン = 【OPPOSER　　　　　】
	ENDIF
	PRINTBUTTON @"%名前ボタン%",1100
ELSE
	名前ボタン = 【%CALLNAME:OPPOSER,17,LEFT%】
	PRINTBUTTON @"%名前ボタン%",1100
ENDIF

IF ターンプレイヤー == "자신"
	SETCOLOR C_L_BLUE
ELSE
	SETCOLOR C_L_RED
ENDIF
PRINTFORM —————————┓　

IF ターンプレイヤー == "자신"
	SETCOLOR C_L_BLUE
ELSE
	SETCOLOR C_L_RED
ENDIF
;SETCOLOR C_L_RED
PRINTFORML ｜
RESETCOLOR

IF ターンプレイヤー == "자신"
	SETCOLOR C_L_BLUE
ELSE
	SETCOLOR C_L_RED
ENDIF
;SETCOLOR C_L_BLUE
PRINTFORM 　｜

IF ターンプレイヤー == "자신"
	SETCOLOR C_L_BLUE
ELSE
	SETCOLOR C_L_RED
ENDIF
PRINTFORM 　┣──%"",20%
;PRINTFORM 　┣———————————————

SETCOLOR C_L_BLUE
IF ライフ_자신 >= 99999
	PRINTBUTTON @"【PLAYER  LP:99999+】",1101
;	PRINTFORM 【PLAYER  LP:99999+】
ELSE
	SIF ライフ_자신 <= 2000
		SETCOLOR C_RED
	PRINTBUTTON @"【PLAYER  LP:{ライフ_자신,6}】",1101
;	PRINTFORM 【PLAYER  LP: {ライフ_자신,5}】
ENDIF


RESETCOLOR
IF ターンプレイヤー == "자신"
	SETCOLOR C_L_BLUE
;	PRINTFORM ——————————————— │
	PRINTFORM —————— │

	FONTSTYLE 8
	PRINTFORM  TURN【{ターン数,2}】/【PLAYER  TURN】
	FONTSTYLE 0
	PRINTFORM │———%"",20%
ELSE
	SETCOLOR C_L_RED
;	PRINTFORM ——————————————— │
	PRINTFORM —————— │
	FONTSTYLE 8	
	PRINTFORM  TURN【{ターン数,2}】/【OPPOSER TURN】
	FONTSTYLE 0
	PRINTFORM │———%"",20%
ENDIF
RESETCOLOR
SETCOLOR C_L_RED
IF ライフ_상대 >= 99999
	PRINTBUTTON @"【OPPOSER LP:99999+】",1100
ELSEIF ライフ_상대 <= -99999
	PRINTBUTTON @"【OPPOSER LP:-99999】",1100

ELSE
	SIF ライフ_상대 <= 2000
		SETCOLOR C_RED

	PRINTBUTTON @"【OPPOSER LP:{ライフ_상대,6}】",1100
ENDIF
IF ターンプレイヤー == "자신"
	SETCOLOR C_L_BLUE
ELSE
	SETCOLOR C_L_RED
ENDIF
;PRINTFORM ———————————┫　
PRINTFORM —————————┫　

IF ターンプレイヤー == "자신"
	SETCOLOR C_L_BLUE
ELSE
	SETCOLOR C_L_RED
ENDIF
;SETCOLOR C_L_RED
PRINTFORML ｜
RESETCOLOR


IF ターンプレイヤー == "자신"
	SETCOLOR C_L_BLUE
ELSE
	SETCOLOR C_L_RED
ENDIF
PRINTFORM 　｜

IF ターンプレイヤー == "자신"
	SETCOLOR C_L_BLUE
ELSE
	SETCOLOR C_L_RED
ENDIF

PRINTFORM 　┗──%"",20%

SETCOLOR C_L_BLUE
PRINTFORM 【De:{現山札数("자신"),2}/Ha:{손패数("자신"),2}/Gy:{묘지数("자신"),2}】



IF ターンプレイヤー == "자신"
	SETCOLOR C_L_BLUE
ELSE
	SETCOLOR C_L_RED
ENDIF

PRINTFORM ——————— ＼

FONTSTYLE 8
PRINTFORM —————【

IF メインフェイズ２ == 1
	PRINTFORM MAIN  PHASE2
ELSEIF メインフェイズ == 1
	PRINTFORM MAIN  PHASE1
ELSEIF バトルフェイズ == 1
	SETCOLOR C_RED
	PRINTFORM BATTLE PHASE
ELSEIF スタンバイフェイズ == 1
	PRINTFORM    STANDBY  

ELSEIF ドローフェイズ == 1
	PRINTFORM  DRAW  PHASE
ELSEIF エンドフェイズ == 1
	PRINTFORM  END   PHASE
ENDIF

IF ターンプレイヤー == "자신"
	SETCOLOR C_L_BLUE
ELSE
	SETCOLOR C_L_RED
ENDIF

PRINTFORM 】—————
FONTSTYLE 0
PRINTFORM ／──%"",20%


SETCOLOR C_L_RED
PRINTFORM 【De:{現山札数("상대"),2}/Ha:{손패数("상대"),2}/Gy:{묘지数("상대"),2}】
RESETCOLOR

IF ターンプレイヤー == "자신"
	SETCOLOR C_L_BLUE
ELSE
	SETCOLOR C_L_RED
ENDIF
PRINTFORM —————————┛　

IF ターンプレイヤー == "자신"
	SETCOLOR C_L_BLUE
ELSE
	SETCOLOR C_L_RED
ENDIF
PRINTFORML ｜




RESETCOLOR

CALL CARD_SUMINFO("자신")

IF ターンプレイヤー == "자신"
	SETCOLOR C_L_BLUE
ELSE
	SETCOLOR C_L_RED
ENDIF
;SETCOLOR C_L_BLUE
PRINTPLAIN ┌┴─────────────────────────────────>MAGIC / TRAPS
;SETCOLOR C_L_RED
PRINTPLAIN <────────────────────────────────┴┐
RESETCOLOR
PRINTL
CALL CARD_MAGINFO("자신")

IF ターンプレイヤー == "자신"
	SETCOLOR C_L_BLUE
ELSE
	SETCOLOR C_L_RED
ENDIF
;SETCOLOR C_L_BLUE
PRINTBUTTON "◎",8888
PRINTPLAIN ─────────────────────────────────────>P<────────────────────────────────────┘
RESETCOLOR



CALL DISPLAY_CARDS_ONBOARD()
;추가：ライディングデュエル関連
IF 특수듀얼종류 == ライディングＤ
	SETCOLOR C_L_BLUE
	PRINTPLAIN ＼────────🏍


	TRYCALLFORM CARDCAN_{자신_부스트}("자신",부스트起動,"")
	IF RESULT == 1 && 설정플래그 == 0
		SETCOLOR C_G_YELLOW
	ENDIF
	PRINTBUTTON "[기체성능]",555
	RESETCOLOR
	SETCOLOR C_L_BLUE
	PRINTFORM Sp：{자신_SpＣ,2}
	PRINTPLAIN ────────────────────

	SETCOLOR C_GOLD
	PRINTPLAIN >R<
	SETCOLOR C_L_RED

	PRINTPLAIN ────────🏍
	PRINTBUTTON "[기체성능]",556
	PRINTFORM Sp：{상대_SpＣ,2}
	PRINTPLAIN ───────────────────／
	RESETCOLOR
ENDIF

CALL DUEL_PLAYER_UI(설정플래그)
IF 설정플래그 == 2 && RESULT != 9999
	RESTART
ENDIF
;PRINTFORML チェック！AF_DUEL_UI 효과条件名前:%효과条件名前%　素材条件종류:{素材条件종류}
フィールド표시中 = 0
RETURN RESULT




@DUEL_PLAYER_UI(설정플래그)
#DIM DYNAMIC カウンタ
#DIM DYNAMIC カウンタB
#DIM DYNAMIC カウンタC
#DIM DYNAMIC 実カウンタ
#DIM DYNAMIC 발동可能
#DIM DYNAMIC 소환可能
#DIM DYNAMIC MAX可能
#DIM DYNAMIC 소환レベル
#DIM DYNAMIC EX起動可
#DIM DYNAMIC 묘지起動可
#DIM DYNAMIC 손패起動可

#DIM DYNAMIC 손패実数
#DIM DYNAMIC 설정_손패,99
#DIM DYNAMIC 묘지実数
#DIM DYNAMIC 설정_묘지,99
#DIM DYNAMIC EX덱実数
#DIM DYNAMIC 설정_EX덱,99



#DIM DYNAMIC 설정_ボタン,99

#DIM DYNAMIC 選択カード
#DIMS DYNAMIC 표시形式
#DIM DYNAMIC 설정플래그
#DIM DYNAMIC 選択カード_ID
#DIM DYNAMIC 발동カード_ID
#DIM DYNAMIC 裏側플래그
#DIM DYNAMIC 攻撃誘導플래그


#DIM 現在モード
#DIM 初期値


IF 설정플래그 == 1
	VARSET 初期値
	RETURN 0
ENDIF
;PRINTFORML チェック！A　효과条件カテゴリ：%효과条件カテゴリ%
VARSET 묘지起動可
VARSET 손패起動可
VARSET EX起動可
FOR カウンタB,0,紙束最大値
	SIF 설정플래그 == 2
		CONTINUE
	SIF 자신_EX덱:カウンタB == -1
		CONTINUE
	VARSET RESULT
	TRYCALLFORM CARDCAN_{자신_EX덱:カウンタB}("자신",EX덱起動,"EX덱",カウンタB)
	IF RESULT == 1
		EX起動可 = 1
		BREAK
	ENDIF
	TRYCALLFORM CARD_{자신_EX덱:カウンタB}("종류")
	SIF !GROUPMATCH(RESULT, 싱크로, 엑시즈, 링크, 초차원)
		CONTINUE

	CALLFORM RESETCONDITION
	TRYCALLFORM CARDSUMMON_{자신_EX덱:カウンタB}("자신",カウンタB,1)
	IF RESULT == 1 && ターンプレイヤー == "자신" && バトルフェイズ == 0
		EX起動可 = 1
		BREAK
	ENDIF
NEXT
FOR カウンタB,0,紙束最大値
	SIF 설정플래그 == 2
		CONTINUE
	SIF 자신_묘지:カウンタB == -1
		CONTINUE
	VARSET RESULT
	TRYCALLFORM CARDCAN_{자신_묘지:カウンタB}("자신",묘지起動,"묘지",カウンタB)
	IF RESULT == 1
		묘지起動可 = 1
		BREAK
	ENDIF
NEXT

FOR カウンタB,0,紙束最大値
	SIF 설정플래그 == 2
		CONTINUE
	SIF 자신_손패:カウンタB == -1
		CONTINUE
	VARSET RESULT
	TRYCALLFORM CARDCAN_{자신_손패:カウンタB}("자신",손패起動,"손패",カウンタB)
	IF RESULT == 1
		손패起動可 = 1
		BREAK
	ENDIF
NEXT


IF 現在モード == 0
VARSET 손패実数
VARSET 설정_손패
VARSET 설정_ボタン
FOR カウンタ,0,紙束最大値
	SIF 자신_손패:カウンタ == -1
		CONTINUE
	설정_손패:손패実数 = 자신_손패:カウンタ
	설정_ボタン:손패実数 = カウンタ
	손패実数 ++
NEXT
ELSEIF 現在モード == 1
	VARSET 묘지実数
	VARSET 설정_묘지
	VARSET 설정_ボタン
	FOR カウンタ,0,紙束最大値
		SIF 자신_묘지:カウンタ == -1
			CONTINUE
		설정_묘지:묘지実数 = 자신_묘지:カウンタ
		설정_ボタン:묘지実数 = カウンタ
		묘지実数 ++
	NEXT
ENDIF




PRINTPLAINFORM ┏━━

SIF 손패起動可
	SETCOLOR C_YELLOW
IF 現在モード == 0
	FONTSTYLE 8
	SETCOLOR C_L_BLUE
	PRINTBUTTON "▽손패▽",8081
ELSE
	PRINTBUTTON " [손패] ",8081
ENDIF
FONTSTYLE 0
RESETCOLOR

PRINTPLAINFORM ━
SIF 묘지起動可
	SETCOLOR C_YELLOW
IF 現在モード == 1
FONTSTYLE 8
SETCOLOR C_L_BLUE
	PRINTBUTTON "▽묘지▽",8082
ELSE
	PRINTBUTTON " [묘지] ",8082
ENDIF
FONTSTYLE 0

RESETCOLOR
;PRINTBUTTON "▽ＥＸ▽",8083



PRINTPLAINFORM ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━PAGE：{(初期値 / 5)+1, 2}━━━━━━┯━┓
SIF 묘지起動可 || EX起動可
	SETCOLOR C_YELLOW
PRINTPLAIN ┏━▽정보확인▽━━━┓
RESETCOLOR
PRINTL
;CUSTOMDRAWLINE —

PRINTPLAIN ┃
PRINTFORM %"",116,RIGHT%　　
PRINTFORM │　
PRINTPLAIN ┃


SIF 묘지起動可 || EX起動可
	SETCOLOR C_YELLOW
PRINTPLAIN ┃
RESETCOLOR
	SIF EX起動可
		SETCOLOR C_YELLOW
	PRINT [800] EX덱을 확인　 
	RESETCOLOR
SIF 묘지起動可 || EX起動可
	SETCOLOR C_YELLOW
PRINTPLAIN ┃
RESETCOLOR
PRINTL
FOR カウンタ,0,20
	実カウンタ = カウンタ + 初期値
	SIF GROUPMATCH(カウンタ,0,5,10,15)
		PRINTPLAINFORM ┃
	IF 現在モード == 0
		IF 설정_손패:実カウンタ <= 0
			PRINTFORM %"",23%
		ELSE
			VARSET RESULT
			VARSET 발동可能
			VARSET MAX可能
			VARSET 소환可能	
			IF ターンプレイヤー == "자신"
				CALL CARD_NS_CHECK_OK("자신",설정_ボタン:実カウンタ)
				SIF RESULT != 0
					소환可能 = 1
				VARSET RESULT
				TRYCALLFORM CARD_{설정_손패:実カウンタ}("맥시멈")	
				IF RESULT >= 1
					VARSET RESULT
					TRYCALLFORM CARDSUMMON_{설정_손패:実カウンタ}("자신",설정_ボタン:実カウンタ,1)
					SIF RESULT == 1
						MAX可能 ++
				ENDIF
			ENDIF
			VARSET RESULT
			SIF 설정플래그 != 2
				TRYCALLFORM CARDCAN_{설정_손패:実カウンタ}("자신",손패起動,"손패",설정_ボタン:実カウンタ)
			SIF RESULT == 1
				발동可能 ++
			IF MAX可能 >= 1
				SETCOLOR C_RED
				PRINT (！)
			ELSEIF 발동可能 >= 1
				SETCOLOR C_G_YELLOW
				PRINT (발)
				
			ELSEIF 소환可能 >= 1
				SETCOLOR C_AQUA
				PRINT (소)
			ELSE
				CALL CARD_SETCOLOR("자신","손패",설정_ボタン:実カウンタ)
				PRINT (　)
			ENDIF
			TRYCALLFORM CARDNAME_{설정_손패:実カウンタ}, "略称"
			PRINTBUTTON @" [%RESULTS,16,LEFT%]", (설정_ボタン:実カウンタ)
			RESETCOLOR
		ENDIF
	;묘지モード
	ELSEIF 現在モード == 1

		IF 설정_묘지:実カウンタ <= 0
			PRINTFORM %"",23%
		ELSE
			VARSET 발동可能

			VARSET RESULT
			IF 설정플래그 != 2
				VARSET RESULT
				TRYCALLFORM CARDCAN_{설정_묘지:実カウンタ}("자신",묘지起動,"묘지",설정_ボタン:実カウンタ)
			ENDIF
			SIF RESULT == 1
				발동可能 ++
			IF 발동可能 >= 1
				SETCOLOR C_G_YELLOW
				PRINT (발)
			ELSE
				CALL CARD_SETCOLOR("자신","묘지",설정_ボタン:実カウンタ)
				PRINT (　)
			ENDIF
			TRYCALLFORM CARDNAME_{설정_묘지:実カウンタ}, "略称"
			PRINTBUTTON @" [%RESULTS,16,LEFT%]", (설정_ボタン:実カウンタ)
			RESETCOLOR
		ENDIF
	ENDIF

	IF GROUPMATCH(カウンタ,9,19)
		PRINTFORM  │　
	ELSEIF GROUPMATCH(カウンタ,4)
		PRINTFORM  │
		SIF 初期値 == 0
			SETCOLOR C_GRAY
		PRINTBUTTON "△", 8080
		RESETCOLOR
	ELSEIF GROUPMATCH(カウンタ,14)
		PRINTFORM  │
		IF 現在モード == 0
			SIF 初期値 >= 손패実数 - 20 
				SETCOLOR C_GRAY
			ELSEIF 現在モード == 1
			SIF 初期値 >= 묘지実数 - 20 
				SETCOLOR C_GRAY
		ENDIF
		PRINTBUTTON "▽", 9090
		RESETCOLOR
	ELSE
		PRINTFORM  
	ENDIF

	IF GROUPMATCH(カウンタ,4,9,14,19)
		PRINTPLAIN ┃
		SIF 묘지起動可 || EX起動可
			SETCOLOR C_YELLOW
		PRINTPLAIN ┃
		RESETCOLOR
	ENDIF
	IF カウンタ == 4
		SIF 묘지起動可
			SETCOLOR C_YELLOW
		PRINT [801] 묘지를 확인　 
		RESETCOLOR
	ELSEIF カウンタ == 9
		PRINT [802] 제외를 확인　 
	ELSEIF カウンタ == 14
		PRINT [803] 상대 묘지 확인
	ELSEIF カウンタ == 19
		PRINT [804] 상대 제외 확인
	ELSEIF カウンタ == 20


	ENDIF
	IF GROUPMATCH(カウンタ,4,9,14,19)
		SIF 묘지起動可 || EX起動可
			SETCOLOR C_YELLOW
		PRINTPLAIN ┃
		RESETCOLOR

		PRINTL
	ENDIF
NEXT
カウンタB = 0
PRINTPLAINFORM ┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┷━┛

SIF 묘지起動可 || EX起動可
	SETCOLOR C_YELLOW
PRINTPLAIN ┃
RESETCOLOR
;PRINTFORM %"",20%
IF オプション_略표시 != 1
	PRINTFORM %"[810] 약칭 표시",20,LEFT%
ELSE
	PRINTFORM %"[810] 약칭 표시 중",20,LEFT%
ENDIF
SIF 묘지起動可 || EX起動可
	SETCOLOR C_YELLOW
PRINTPLAIN ┃
RESETCOLOR

PRINTL
;PRINTFORML チェック！AF_HAND_UI 효과条件名前:%효과条件名前%　素材条件종류:{素材条件종류}

PRINT 　
FONTSTYLE 8
PRINTFORM %"게임진행 :",12,LEFT%
FONTSTYLE 0
PRINTFORM %"",114,LEFT%

SIF 묘지起動可 || EX起動可
	SETCOLOR C_YELLOW
PRINTPLAIN ┃
RESETCOLOR
IF オプション_フリチェ != 1
	PRINTFORM %"[811]현재FRC확인(ON)",18,LEFT%
ELSE
	PRINTFORM %"[811]현재FRC확인(AT)",18,LEFT%
ENDIF
SIF 묘지起動可 || EX起動可
	SETCOLOR C_YELLOW
PRINTPLAIN ┃
RESETCOLOR

PRINTL
IF 설정플래그 == 0
	IF ターンプレイヤー == "자신"
		VARSET RESULT
		TRYCALLFORM IRAI_DUEL_CONDVIC_{G_イベ起動}
		IF G_イベ起動 >= 1 && RESULT == 1
			SETCOLOR C_GOLD
			PRINTFORM %"　[9013] - 승리 조건 달성",64,LEFT%
			RESETCOLOR
		ELSE
			IF (メインフェイズ == 1 && ターン数 == 1) || メインフェイズ２ == 1
				PRINTFORM %"　[1000] - 턴 종료",64,LEFT%
			ELSEIF メインフェイズ == 1 && メインフェイズ２ != 1
				PRINTFORM %"　[900] - 배틀 개시　　　　　　　[1000] - 턴 종료",64,LEFT%
			ELSEIF バトルフェイズ == 1
				PRINTFORM %"　[950] - 메인2 이행 　　　　　　[1000] - 턴 종료",64,LEFT%
			ENDIF
		ENDIF
	ELSEIF ターンプレイヤー == "상대"
		IF 상대ターン終了 == 1 || ERA起動 >= 2
			PRINTFORM %"　[1000] - 행동 없음:（턴 엔드）",64,LEFT%
		ELSEIF メインフェイズ２移行 == 1
			PRINTFORM %"　[950] - 행동 없음:（메인２개시）",64,LEFT%
		ELSEIF バトルフェイズ移行 == 1
			PRINTFORM %"　[900] - 행동 없음:（배틀 페이즈 개시）",64,LEFT%
		ELSE
			PRINTFORM %"　[700] - 상대 턴을 진행한다（▷▷)",64,LEFT%
		ENDIF
	ENDIF

	IF ERA起動 >= 2
		PRINTFORM %"[9013] - 듀얼을 종료한다",64,LEFT%
	ELSE
		PRINTFORM %"[999] - 항복한다",64,LEFT%
	ENDIF
ELSE
	SETCOLOR C_YELLOW
	PRINTFORM %"[9999] - 확인 종료",128,LEFT%
	RESETCOLOR
ENDIF
SIF 묘지起動可 || EX起動可
	SETCOLOR C_YELLOW
PRINTPLAIN ┃
RESETCOLOR
	PRINTFORM %"[812] 듀얼리스트사전",20,LEFT%

SIF 묘지起動可 || EX起動可
	SETCOLOR C_YELLOW
PRINTPLAIN ┃
RESETCOLOR
PRINTL

PRINTFORM %"",128,LEFT%
SIF 묘지起動可 || EX起動可
	SETCOLOR C_YELLOW
PRINTPLAINFORM ┗━━━━━━━━━━┛
RESETCOLOR
PRINTL
;PRINTFORML チェック！C　효과条件カテゴリ：%효과条件カテゴリ%
IF 설정플래그 == 0
	IF G_イベ起動 >= 1
		VARSET RESULT
		TRYCALLFORM IRAI_DUEL_MESSAGE_{G_イベ起動}(1)
		IF RESULT == 1	
			SETCOLOR C_YELLOW
			PRINTFORML >>——MESSAGE:——————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————>>>
			RESETCOLOR
			TRYCALLFORM IRAI_DUEL_MESSAGE_{G_イベ起動}
			SETCOLOR C_YELLOW
			CUSTOMDRAWLINE ―
			RESETCOLOR
		ELSE
			;Anonym추가
			SIF オプション_デュエル中待機メッセージ == 1
				TRYCALLFORM DUEL_MESSAGE("자신")
			CUSTOMDRAWLINE —
		ENDIF
	ELSE
		;Anonym추가
		SIF オプション_デュエル中待機メッセージ == 1
			TRYCALLFORM DUEL_MESSAGE("자신")
		CUSTOMDRAWLINE —
	ENDIF
ENDIF
IF デバッグコマンド == 1 && 설정플래그 == 0
	PRINTFORML 
	PRINTFORML  디버그 커맨드：
	PRINTFORML 소환권：{소환権}/추가소환권：{追소환権}/마향효과：{자신_魔香효과}

	PRINTL 　　[9000] - 카드를 뽑는다　　　　 [9001] - 서치/회수　　　　　　[9002] - 상대 서치/회수　　　
	PRINTL 　　[9003] - 덱을 확인한다　　　　 [9004] - 묘지 보내기 처리　　 [9005] - 상대 묘지 보내기 처리
	PRINTL 　　[9006] - 리셋　　　　　　　　 [9007] - 몬스터 소환　　　　  [9008] - 상대 몬스터 소환
	PRINTL 　　[9009] - 상황 프리셋　　　　　 　　　　　　　　　　　　　　  [9011] - 서로의 라이프를 리셋
	PRINTL 　　[9012] - 셔플처리　　　　　　 [9013] - 자동승리　　　　　　　 [9010] - 자유TEST
	PRINTL 　　[1000] - 강제 턴 종료
ENDIF
VARSET カウンタ
REPEAT 0
	カウンタ ++
	PRINTFORML 수：{カウンタ}
REND
;PRINTFORML チェック！BF確認終了 효과条件名前:%효과条件名前%　素材条件종류:{素材条件종류}

BINPUT
IF RESULT == 9090
	IF 現在モード == 0
		IF 初期値 >= 손패実数 - 20 
			PRINT
		ELSE
			初期値 += 5
		ENDIF
	ELSEIF 現在モード == 1
		IF 初期値 >= 묘지実数 - 20 
			PRINT
		ELSE
			初期値 += 5
		ENDIF
	ENDIF
	
	

ELSEIF RESULT == 8080
	初期値 -= 5
	SIF 初期値 <= 0
		初期値 = 0
ELSEIF RESULT == 8081
	現在モード = 0
		初期値 = 0

ELSEIF RESULT == 8082
	現在モード = 1
	初期値 = 0

ELSEIF RESULT == 8083
	現在モード = 2
	初期値 = 0
;――――――――――――――チートコマンド――――――――――――
;カードドロー処理
ELSEIF RESULT == 9000
	IF 現山札数("자신") > 0
		PRINTFORML 드로우ー！
		CALL CARD_ADD, "자신", "덱", "손패", 0
	ELSE
		PRINT 더 이상 뽑을 수 없습니다
	ENDIF

;サーチ処理
ELSEIF RESULT == 9001
	CALL FULLRESET
	효과範囲묘지 = 1
	효과範囲덱 = 1
	효과範囲제외 = 1
	효과条件任意 = 1
	CALL CARD_CHOOSE_ADV("자신")
	選択カード = RESULT
	IF RESULT == 9999

	ELSE
		CALL CARD_SELECT("자신",選択カード)
		CALL CARD_ADD("자신", 参照先（CS）, "손패", 選択カード（CS）)
	ENDIF
;サーチ処理
ELSEIF RESULT == 9002
	CALL FULLRESET
	효과範囲상대묘지 = 1
	효과範囲상대덱 = 1
	효과範囲상대제외 = 1
	효과条件任意 = 1
	CALL CARD_CHOOSE_ADV("자신")
	選択カード = RESULT
	IF RESULT == 9999

	ELSE
		選択カード -= 2000
		CALL CARD_SELECT("상대",選択カード)
		CALL CARD_ADD("상대", 参照先（CS）, "손패", 選択カード（CS）)
	ENDIF

;덱確認
ELSEIF RESULT == 9003
	FOR カウンタ,0,現山札数("자신")
		CALL CARD_SETCOLOR("자신","덱",カウンタ)
		CALLFORM CARD_KANPRINT("덱",カウンタ,자신_덱:カウンタ)
	NEXT
	RESETCOLOR
	PRINTL
	PRINTL [100] - 돌아간다
	BINPUT
	選択カード = RESULT
	;돌아간다
	IF 選択カード == 100
		PRINTFORMW 돌아갑니다。
	ELSEIF INRANGE (選択カード, 0,現山札数("자신"))
		TRYCALLFORM CARD_UI(자신_덱:選択カード,2);　デバッグチェック用（受け渡し必要：듀얼리스트情報のみ）
		PRINTL
		PRINTL [100] - 돌아간다
		BINPUT
		IF RESULT == 100
			PRINTL 
		ENDIF
	ENDIF
;묘지落とし各種処理
ELSEIF RESULT == 9004
	PRINTL [0]장소 지정 묘지 보내기
	PRINTL [4]덱 위에서 N장
	PRINTL [100] - 돌아간다
	BINPUT
	;破壊処理
	IF RESULT == 0
		CUSTOMDRAWLINE —
		PRINTFORML 「자기 묘지 보내기 처리 화면」
		CUSTOMDRAWLINE —
		PRINTL
		CALL FULLRESET
		효과範囲필드 = 1
		효과範囲마함 = 1
		효과範囲손패 = 1
		효과範囲묘지 = 1
		효과範囲덱 = 1
		효과範囲EX덱 = 1
		효과範囲제외 = 1
		효과条件任意 = 1
		CALL CARD_CHOOSE_ADV("자신")
		選択カード = RESULT
		IF 選択カード == 9999

		ELSE
			CALL CARD_SELECT("자신",選択カード)
			CALL CARD_ADD("자신", 参照先（CS）, "묘지", 選択カード（CS）)
		ENDIF
	;덱 위에서 묘지落とし
	ELSEIF RESULT == 4
		$GYDROP_LOOP
		PRINTFORML  몇 장 보낼까？ (1～{現山札数("자신")})
		PRINTL [100] - 돌아간다
		INPUT
		選択カード = RESULT
		IF 選択カード == 100

		ELSEIF INRANGE (選択カード, 0, (現山札数("자신"))) 
			REPEAT 選択カード
				CALL CARD_ADD, "자신", "덱", "묘지", 0
			REND
		ELSE 
			GOTO GYDROP_LOOP
		ENDIF
	ENDIF


ELSEIF RESULT == 9005
	CUSTOMDRAWLINE —
	PRINTFORML 「상대 묘지 보내기 처리 화면」
	CUSTOMDRAWLINE —
	PRINTL
	CALL FULLRESET
	효과範囲상대필드 = 1
	효과範囲상대마함 = 1
	효과範囲상대손패 = 1
	효과範囲상대묘지 = 1
	효과範囲상대덱 = 1
	효과範囲상대EX덱 = 1
	효과範囲상대제외 = 1
	효과条件任意 = 1
	CALL CARD_CHOOSE_ADV("자신")
	選択カード = RESULT
	IF 選択カード == 9999

	ELSE
		選択カード -= 2000
		CALL CARD_SELECT("상대",選択カード)
		CALL CARD_ADD("상대", 参照先（CS）, "묘지", 選択カード（CS）)
	ENDIF

ELSEIF RESULT == 9006
	RETURN 9006

ELSEIF RESULT == 9007
	CUSTOMDRAWLINE —
	PRINTFORML 「자신 소환 처리 화면」
	CUSTOMDRAWLINE —
	PRINTL
	CALL FULLRESET
	효과範囲손패 = 1
	효과範囲묘지 = 1
	효과範囲덱 = 1
	효과範囲EX덱 = 1
	효과範囲제외 = 1
	효과条件종류 = モン全般
	효과条件任意 = 1
	CALL CARD_CHOOSE_ADV("자신")
	選択カード = RESULT
	;돌아간다
	IF 選択カード == 9999

	ELSE
		PRINTL 표시형식 선택：
		PRINTL 
		PRINTL [1] - 공격 표시
		PRINTL [2] - 수비 표시
		PRINTL [3] - 뒷면 표시
		PRINTL 
		BINPUT 
		IF RESULT == 1
			표시形式 = 攻撃표시
		ELSEIF RESULT == 2
			표시形式 = 守備표시
		ELSEIF RESULT == 3
			표시形式 = 裏側守備표시
		ENDIF
		;패에서 소환
		IF INRANGE (選択カード,100,199)
			選択カード -= 100
			IF モンスター数("자신") == 5
				PRINTFORMW 몬스터 존이 가득 차서 소환할 수 없습니다。
			ELSE
				PRINTFORMW 통상 소환！
				CALL FULLRESET
				CALL CARD_SUMMON("자신", 選択カード, 표시形式)
			ENDIF
		;묘지에서 소환
		ELSE
			CALL CARD_SELECT("자신",選択カード)
			CALL FULLRESET
			CALL CARD_SP_SUMMON("자신", 参照先（CS）, 選択カード（CS）,표시形式)
		ENDIF
	ENDIF
ELSEIF RESULT == 9008
	CUSTOMDRAWLINE —
	PRINTFORML 「상대 소환 처리 화면」
	CUSTOMDRAWLINE —
	PRINTL
	CALL FULLRESET
	효과範囲상대손패 = 1
	효과範囲상대묘지 = 1
	효과範囲상대덱 = 1
	효과範囲상대EX덱 = 1
	효과範囲상대제외 = 1
	효과条件任意 = 1
	효과条件종류 = モン全般
	CALL CARD_CHOOSE_ADV("자신")
	選択カード = RESULT
	;돌아간다
	IF 選択カード == 9999

	ELSE
		選択カード -= 2000
		PRINTL 표시형식선택：
		PRINTL 
		PRINTL [1] - 공격 표시
		PRINTL [2] - 수비 표시
		PRINTL [3] - 뒷면 표시
		PRINTL 
		BINPUT 
		IF RESULT == 1
			표시形式 = 攻撃표시
		ELSEIF RESULT == 2
			표시形式 = 守備표시
		ELSEIF RESULT == 3
			표시形式 = 裏側守備표시
		ENDIF
		;패에서 소환
		IF INRANGE (選択カード,100,199)
			選択カード -= 100
			IF モンスター数("상대") == 5
				PRINTFORMW 몬스터 존이 가득 차서 소환할 수 없습니다。
			ELSE
				PRINTFORMW 일반 소환！
				CALL FULLRESET
				CALL CARD_SUMMON("상대", 選択カード, 표시形式)
			ENDIF
		;묘지에서 소환
		ELSE
			CALL CARD_SELECT("상대",選択カード)
			CALL FULLRESET
			CALL CARD_SP_SUMMON("상대", 参照先（CS）, 選択カード（CS）,표시形式)
		ENDIF
	ENDIF

ELSEIF RESULT == 9009
	CALLFORM PRESET_JOKYO

ELSEIF RESULT == 9010
	FOR カウンタB,21,100

		PRINTFORMW 카운터B = {カウンタB}
		FOR カウンタ,1000,100000
			VARSET RESULTS
			TRYCALLFORM CARDNAME_{カウンタ}("名前")
			SIF RESULTS == ""
				CONTINUE
			SETVAR @"자신_묘지:6", カウンタ
			SIF 설정플래그 != 2	
				TRYCALLFORM CARDCAN_{자신_묘지:6}("자신",カウンタB,"묘지",6)
			TRYCALLFORM CARDNAME_{カウンタ}("名前")
			PRINTFORML 『{カウンタ}』 - %RESULTS%　PASS！
		NEXT
	NEXT
ELSEIF RESULT == 9011
	ライフ_자신 = 8000
	ライフ_상대 = 8000


;셔플処理
ELSEIF RESULT == 9012
	CALL SHUFFLE("자신")
	PRINTFORML 셔플했습니다

ELSEIF RESULT == 9013
	상대_듀얼패배플래그 = 999

ELSEIF RESULT == 811
	オプション_フリチェ ^= 1


ELSEIF RESULT == 812
	CALL COM456
ELSEIF RESULT == 8888
	デバッグコマンド ^= 1
;テスト終了
ELSEIF RESULT == 999 || (詰め플래그 && RESULT == 1000)
	PRINTFORML 듀얼을 종료하시겠습니까？
	PRINTL [1] - 예
	PRINTL [2] - 아니오
	BINPUT
	IF RESULT == 1
		;PRINTFORML テスト終了
		자신_듀얼패배플래그 = 3
	ENDIF
ELSEIF RESULT == 810
	オプション_略표시 ^= 1
ELSE
	;패의 カード발동・소환処理――――――――――――――――――――――――
	IF INRANGE (RESULT, 0, 100)
		IF 現在モード == 0
			選択カード = RESULT
			選択カード_ID = 자신_손패:選択カード
			$INPUT_TEFUDA_LOOP
			CALL CARD_UI_RESET
			確認듀얼리스트 = 자신
			確認종류 = 손패起動
			確認ゾーン = 손패
			確認場所 = 選択カード
			フリー確認 = 1
			TRYCALLFORM CARD_UI(選択カード_ID,2); 自由確認での손패確認（受け渡し必要：듀얼리스트情報のみ）
			IF 설정플래그 == 0
				SIF 설정플래그 != 2
					TRYCALLFORM CARDCAN_{選択カード_ID}("자신",손패起動,"손패",選択カード)
				IF RESULT == 1 
					SETCOLOR C_G_YELLOW
					PRINT 　[3] - 효과 발동　　　　
					RESETCOLOR
					ENDIF
					VARSET RESULT

				IF メインフェイズ == 1 && ターンプレイヤー == "자신"
					TRYCALLFORM CARD_{選択カード_ID}, "종류"
					IF RESULT <= 通常モン
						SETCOLOR C_GRAY
						CALL CARD_NS_CHECK_OK("자신",選択カード)
						IF RESULT != 0				
							IF RESULT == 1 || RESULT == 3
								SETCOLOR C_AQUA_2
								PRINT 　[1] - 일반 소환　　　　
								SIF 소환権 >= 1
									PRINT 　[2] - 카드 세트　　
							ENDIF
							IF RESULT == 2 || RESULT == 3
								VARSET RESULT
								TRYCALLFORM CARDCAN_{選択カード_ID}("자신",효과소환,"손패",選択カード)
								IF RESULT == 1 
									SETCOLOR C_AQUA_2
									PRINT 　[4] - 효과 소환　　　　
								ENDIF
							ENDIF
							RESETCOLOR
						ENDIF
						VARSET RESULT
						TRYCALLFORM CARD_{選択カード_ID}, "맥시멈"
						IF RESULT >= 1
							;PRINTFORML 選択カード:{選択カード}/選択カード_ID:{選択カード_ID}
							TRYCALLFORM CARDSUMMON_{選択カード_ID}("자신",選択カード,1)
							IF RESULT >= 1
								SETCOLOR C_RED
								PRINT 　[5] - 맥시멈 소환！！
								RESETCOLOR
							ELSE
								SETCOLOR C_GRAY
								PRINT 　<5> - 맥시멈 소환　
								RESETCOLOR
							ENDIF
						ENDIF
					ENDIF
					IF RESULT > 마법全般
						SIF 現마함("자신") == 5
							SETCOLOR C_GRAY
						PRINT 　[2] - 카드 세트　　
						RESETCOLOR
					ENDIF
				ENDIF
			ENDIF
			RESETCOLOR
			PRINTL
			PRINTL
			PRINTL 　[100] - 돌아간다
			BINPUT
			IF RESULT == 100
				PRINTL 
			ELSEIF RESULT == 1000
				CALL PRINT_STATE_DUEL(選択カード_ID,2)
				WAIT
				GOTO INPUT_TEFUDA_LOOP
			ELSEIF RESULT == 1
				IF 자신_手_召可:選択カード >= 1
					CALL CARD_SUMMON_SHORI("자신",選択カード,"攻撃표시",3)
				ELSE
					CALL CARD_SUMMON_SHORI("자신",選択カード,"攻撃표시")
				ENDIF
			ELSEIF RESULT == 2
				CALLFORM CARD_{選択カード_ID}("종류")
				IF RESULT > 20
					IF 現마함("자신") == 5
						PRINTFORMW 마법 함정 존이 가득 차서 세트를 할 수 없습니다。
					ELSE
						PRINTFORMW 리버스 카드 세트！
						CALL CARD_ADD("자신", "손패", "마함", 選択カード,"裏側표시")
					ENDIF
				ELSEIF RESULT < 20
					CALL CARD_SUMMON_SHORI("자신",選択カード,"裏側守備표시")
				ENDIF
			ELSEIF RESULT == 4
				IF 자신_手_召可:選択カード >= 1
					CALL CARD_SUMMON_SHORI("자신",選択カード,"攻撃표시",4)
				ELSE	
					CALL CARD_SUMMON_SHORI("자신",選択カード,"攻撃표시",2)
				ENDIF
			ELSEIF RESULT == 3
				발동カード_ID = 選択カード_ID
				CALLFORM CARDNAME_{발동カード_ID}("名前")
				PRINTFORMW 당신은 패에서 『{選択カード}』%RESULTS%의 효과 발동 선언을 했습니다！
				CALLFORM CARD_STANBY(발동カード_ID,"자신",손패起動,"손패",選択カード)
				CALL CARD_FINAL(ターンプレイヤー);자신ターン패의 起動後のチェック

			ELSEIF RESULT == 5
				CALLFORM CARDNAME_{選択カード_ID}("名前")
				PRINTFORMW 당신은 패에서 『{選択カード}』%RESULTS%의 맥시멈 선언을 했습니다！
				CALL MAXSUMMON("자신", 選択カード, "손패")
			ENDIF
		ELSEIF 現在モード == 1
			選択カード = RESULT
			選択カード_ID = 자신_묘지:選択カード
			$INPUT_BOCHI_LOOP
			CALL CARD_UI_RESET
			確認듀얼리스트 = 자신
			確認종류 = 묘지起動
			確認ゾーン = 묘지
			確認場所 = 選択カード
			フリー確認 = 1
			TRYCALLFORM CARD_UI(자신_묘지:選択カード,2); 自由確認での묘지確認（受け渡し必要：듀얼리스트情報のみ）
			TRYCALLFORM CARDCAN_{자신_묘지:選択カード}("자신",묘지起動,"묘지",選択カード)
			SETCOLOR C_G_YELLOW
			SIF RESULT == 1 && 설정플래그 == 0
				PRINT [3] - 효과 발동
			RESETCOLOR	
			PRINTL
			PRINTL [100] - 돌아간다
			BINPUT
			IF RESULT == 100
				PRINTL 

			ELSEIF RESULT == 1000
				CALL PRINT_STATE_DUEL(選択カード_ID,2)
				WAIT
				GOTO INPUT_BOCHI_LOOP
			ELSEIF RESULT == 3
				발동カード_ID = 자신_묘지:選択カード
				CALLFORM CARDNAME_{발동カード_ID}("名前")
				PRINTFORMW 당신은 묘지에서 『{選択カード}』%RESULTS%의 효과 발동 선언을 했습니다！
				CALLFORM CARD_STANBY(발동カード_ID,"자신",묘지起動,"묘지",選択カード)
				CALL CARD_FINAL(ターンプレイヤー);자신ターン묘지の起動後のチェック
			ENDIF

		ENDIF
	;フィールド上のモンスター발동・攻撃処理・状態변경処理――――――――――――――――――――――――
	ELSEIF INRANGE (RESULT, 2000, 2005)
		選択カード = RESULT - 2000
		CALL CARD_UI_RESET
		確認듀얼리스트 = 자신
		確認종류 = 필드起動
		確認ゾーン = 필드
		確認場所 = 選択カード
		フリー確認 = 1

		TRYCALLFORM CARD_UI_FIELD("자신",選択カード,설정플래그);필드의 情報（受け渡し必要：듀얼리스트、필드（ゾーン）、場所）
		
		IF RESULT == 100
			PRINTL
		ELSEIF RESULT == 1
			IF 자신_MZ_表:選択カード == 1
				PRINTW 수비 표시로 했습니다
				CALL SET_FIELD_INFO("자신","필드",選択カード,"表",2,1)
			ELSEIF 자신_MZ_表:選択カード >= 2
				PRINTW 공격 표시로 했습니다
				CALL SET_FIELD_INFO("자신","필드",選択カード,"表",1,1)
			ENDIF
			자신_MZ_表変:選択カード = 0
		ELSEIF RESULT == 3
			;효과발동処理
			발동カード_ID = 자신_필드:選択カード
			CALLFORM CARDNAME_{발동カード_ID}("名前")
			PRINTFORMW 당신은 몬스터 존에서 『{選択カード}』%RESULTS%의 효과 발동 선언을 했습니다！
			CALLFORM CARD_STANBY(발동カード_ID,"자신",필드起動,"필드",選択カード)
			CALL CARD_FINAL(ターンプレイヤー);자신ターン필드의 起動後のチェック
		ELSEIF RESULT == 4
			;효과발동処理
			TRYCALLFORM CARDEFFECT_{자신_MZ_특수状態:選択カード}("자신",필드起動付与,"필드",選択カード)

		ELSEIF RESULT == 69
			CALL CARD_REACT("자신",選択カード,"필드")

		;―――――――――――――――――――【戦闘】――――――――――――――――――――――
		ELSEIF RESULT == 5
			CALL BATTLE_SETUP("자신",選択カード)
			VARSET 攻撃誘導플래그

			;攻撃モンスター選択
			CUSTOMDRAWLINE —
			PRINTFORML 「공격 몬스터 선택 화면」
			CUSTOMDRAWLINE —
			PRINTL
			FOR カウンタ,0,5
				SIF 상대_필드:カウンタ == -1
					CONTINUE
				SIF 상대_MZ_攻誘:カウンタ == 0
					CONTINUE
				攻撃誘導플래그 ++
			NEXT

			IF 攻撃誘導플래그 == 0
				FOR カウンタ,0,5
					VARSET 裏側플래그
					SIF 상대_필드:カウンタ == -1
						CONTINUE
					SIF 상대_필드:カウンタ == 使用불가ゾーン
						CONTINUE

					裏側플래그 = 상대_MZ_表:カウンタ
					IF 상대_MZ_攻避:カウンタ >= 1
						SETCOLOR C_GRAY
						TRYCALLFORM CARDNAME_{상대_필드:カウンタ}, "名前"
						CALLFORM CARD_KANPRINT("상대필드",カウンタ + 2000,상대_필드:カウンタ,6)
					ELSE
						CALL CARD_SETCOLOR("상대","상대필드",カウンタ)
						CALLFORM CARD_KANPRINT("상대필드",カウンタ + 2000,상대_필드:カウンタ)
					ENDIF
					RESETCOLOR
				NEXT
			ELSEIF 攻撃誘導플래그 == 1
				FOR カウンタ,0,5
					VARSET 裏側플래그
					裏側플래그 = 상대_MZ_表:カウンタ
					SIF 상대_필드:カウンタ == -1
						CONTINUE
					SIF 상대_필드:カウンタ == 使用불가ゾーン
						CONTINUE

					IF 상대_MZ_攻誘:カウンタ == 0 || 상대_MZ_攻避:カウンタ >= 1
						SETCOLOR C_GRAY
						CALLFORM CARD_KANPRINT("상대필드",カウンタ + 2000,상대_필드:カウンタ,6)
					ELSE
						SETCOLOR C_RED
						CALLFORM CARD_KANPRINT("상대필드",カウンタ + 2000,상대_필드:カウンタ)
						RESETCOLOR
					ENDIF
					RESETCOLOR
				NEXT
			ENDIF
			PRINTL
			CUSTOMDRAWLINE —
			IF 자신_直接無効 >= 1
				SETCOLOR C_GRAY
				PRINTFORML 　전투『{99,2}』: 직접공격 효과중。
			ELSEIF 자신_MZ_直無:자신_戦闘カード >= 1
				SETCOLOR C_GRAY
				PRINTFORML 　전투『{99,2}』: 직접공격불가。
			ELSE
				IF  자신_MZ_直攻:자신_戦闘カード >= 1
					PRINTFORML 　전투[{99,2}] : 다이렉트 어택
				ELSE
					CALL FULLRESET
					효과範囲상대필드 = 1
					효과条件攻撃可 = 1
					CALL CARD_CHECK_ADV("자신")
					IF RESULT == 1
						SETCOLOR C_GRAY
						PRINTFORML 　전투『{99,2}』: 몬스터가 존재하지 않습니다。
					ELSE
						PRINTFORML 　전투[{99,2}] : 다이렉트 어택
					ENDIF
				ENDIF
			ENDIF
			RESETCOLOR
			PRINTL
			CUSTOMDRAWLINE —
			PRINTL
			PRINTL [100] - 돌아간다
			BINPUT
			SIF RESULT >= 2000
				RESULT -= 2000
			CALL CARD_FIGHT("자신",選択カード,RESULT)
			IF バトル強制終了 == 1
				バトル強制終了 = 0
				GOTO INPUT_MAIN2
			ENDIF
		ENDIF

	;――――――――――――フィールド上の마법함정발동・状態변경処理――――――――――――
	ELSEIF INRANGE (RESULT, 3000, 3005)
		選択カード = RESULT -3000
		CALL CARD_UI_RESET
		確認듀얼리스트 = 자신
		確認종류 = 마함起動
		確認ゾーン = 마함
		確認場所 = 選択カード
		フリー確認 = 1
		TRYCALLFORM CARD_UI_MAGIC("자신",選択カード,설정플래그);필드의 情報（受け渡し必要：듀얼리스트、마함（ゾーン）、場所）
		IF RESULT == 100
			PRINTL
		ELSEIF RESULT == 3
			발동カード_ID = 자신_마함:選択カード
			CALLFORM CARDNAME_{발동カード_ID}("名前")
			PRINTFORMW 당신은 마법 / 함정 존에서 『{選択カード}』%RESULTS%의 효과 발동 선언을 했습니다！
			CALLFORM CARD_STANBY(발동カード_ID,"자신",마함起動,"마함",選択カード)
			CALL CARD_FINAL(ターンプレイヤー);자신ターン마함の起動後のチェック

		ELSEIF RESULT == 69
			CALL CARD_REACT("자신",選択カード,"마함")
		ENDIF
	;――――――――――――상대 필드上のカード状態確認――――――――――――
	ELSEIF INRANGE (RESULT, 5000, 5005)
		選択カード = RESULT -5000
		IF デバッグコマンド == 1
			PRINTL [200] - 표시 형식을 변경
		ENDIF
		CALL CARD_UI_RESET
		確認듀얼리스트 = 상대
		確認ゾーン = 필드
		確認場所 = 選択カード
		フリー確認 = 1
		TRYCALLFORM CARD_UI_FIELD("상대",選択カード,설정플래그);필드의 情報（受け渡し必要：듀얼리스트、필드（ゾーン）、場所）
		IF RESULT == 100
			PRINTL
		ELSEIF RESULT == 200
			IF 상대_MZ_表:選択カード == 1
				PRINTW 수비 표시로 했습니다
				상대_MZ_表:選択カード = 2
			ELSEIF 상대_MZ_表:選択カード >= 2
				PRINTW 공격 표시로 했습니다
				상대_MZ_表:選択カード = 1
			ENDIF
		ELSEIF RESULT == 4
			TRYCALLFORM CARDEFFECT_{상대_MZ_특수状態:選択カード}("상대",상대起動付与,"필드",選択カード)
		ELSEIF RESULT == 69
			CALL CARD_REACT("상대",選択カード,"필드")
		ENDIF
	;――――――――――――상대 필드上の마함状態변경処理――――――――――――
	ELSEIF INRANGE (RESULT, 6000, 6005)
		選択カード = RESULT -6000
		CALL CARD_UI_RESET
		確認듀얼리스트 = 자신
		確認ゾーン = 마함
		確認場所 = 選択カード
		フリー確認 = 1
		TRYCALLFORM CARD_UI_MAGIC("상대",選択カード,설정플래그);필드의 情報（受け渡し必要：듀얼리스트、마함（ゾーン）、場所）
		IF RESULT == 100
			PRINTL
		ENDIF
	;――――――――――――묘지의 カード確認――――――――――――
	ELSEIF RESULT == 801
		CUSTOMDRAWLINE —
		PRINTFORML 「（자신）묘지 확인 화면」
		CUSTOMDRAWLINE —
		PRINTL
		FOR カウンタ,0,紙束最大値
			SIF 자신_묘지:カウンタ == -1
				CONTINUE
			VARSET RESULT
			SIF 설정플래그 != 2
				TRYCALLFORM CARDCAN_{자신_묘지:カウンタ}("자신",묘지起動,"묘지",カウンタ)
			IF RESULT == 1
				SETCOLOR C_G_YELLOW
			ELSE
				CALL CARD_SETCOLOR("자신","묘지",カウンタ)
			ENDIF

			CALLFORM CARD_KANPRINT("묘지",カウンタ + 200,자신_묘지:カウンタ)
			RESETCOLOR
		NEXT
		CUSTOMDRAWLINE —
		PRINTL
		PRINTL [100] - 돌아간다
		BINPUT
		選択カード = RESULT
		;돌아간다
		IF 選択カード != 100
			選択カード -= 200
			$INPUT_BOCHI_LOOP2
			CALL CARD_UI_RESET
			確認듀얼리스트 = 자신
			確認종류 = 묘지起動
			確認ゾーン = 묘지
			確認場所 = 選択カード
			フリー確認 = 1
			TRYCALLFORM CARD_UI(자신_묘지:選択カード,2); 自由確認での묘지確認（受け渡し必要：듀얼리스트情報のみ）
			TRYCALLFORM CARDCAN_{자신_묘지:選択カード}("자신",묘지起動,"묘지",選択カード)
			SETCOLOR C_G_YELLOW
			SIF RESULT == 1 && 설정플래그 == 0
				PRINT [3] - 효과발동
			RESETCOLOR	
			PRINTL
			PRINTL [100] - 돌아간다
			BINPUT
			IF RESULT == 100
				PRINTL 
			ELSEIF RESULT == 1000
				CALL PRINT_STATE_DUEL(選択カード_ID,2)
				WAIT
				GOTO INPUT_BOCHI_LOOP2

			ELSEIF RESULT == 3
				발동カード_ID = 자신_묘지:選択カード
				CALLFORM CARDNAME_{발동カード_ID}("名前")
				PRINTFORMW 당신은 묘지에서『{選択カード}』%RESULTS%의 효과 발동 선언을 했습니다！
				CALLFORM CARD_STANBY(발동カード_ID,"자신",묘지起動,"묘지",選択カード)
				CALL CARD_FINAL(ターンプレイヤー);자신ターン묘지의 起動後のチェック
			ENDIF
		ENDIF
	ELSEIF RESULT == 803
		CUSTOMDRAWLINE —
		PRINTFORML 「（상대）묘지 확인 화면」
		CUSTOMDRAWLINE —
		PRINTL
		FOR カウンタ,0,紙束最大値
			SIF 상대_묘지:カウンタ == -1
				CONTINUE
			VARSET RESULT	
			CALL CARD_SETCOLOR("상대","묘지",カウンタ)
			CALLFORM CARD_KANPRINT("상대묘지",カウンタ + 2200,상대_묘지:カウンタ)
			RESETCOLOR	
		NEXT
		CUSTOMDRAWLINE —
		PRINTL
		PRINTL [100] - 돌아간다
		BINPUT
		選択カード = RESULT
		;돌아간다
		IF 選択カード != 100
			選択カード -= 2200
			CALL CARD_UI_RESET
			確認듀얼리스트 = 상대
			確認ゾーン = 묘지
			確認場所 = 選択カード
			フリー確認 = 1
			TRYCALLFORM CARD_UI(상대_묘지:選択カード,2); 自由確認での상대묘지確認（受け渡し必要：듀얼리스트情報のみ）
			RESETCOLOR	
			PRINTL
			PRINTL [100] - 돌아간다
			BINPUT
			IF RESULT == 100
				PRINTL 
			ENDIF
		ENDIF

	;――――――――――――제외のカード確認――――――――――――
	ELSEIF RESULT == 802
		CUSTOMDRAWLINE —
		PRINTFORML 「（자신）제외 확인 화면」
		CUSTOMDRAWLINE —
		PRINTL
		FOR カウンタ,0,紙束最大値
			SIF 자신_제외:カウンタ == -1
				CONTINUE

			VARSET RESULT		
			CALL CARD_SETCOLOR("자신","제외",カウンタ)
			CALLFORM CARD_KANPRINT("제외",カウンタ + 500,자신_제외:カウンタ)
			RESETCOLOR	
		NEXT
		CUSTOMDRAWLINE —
		PRINTL
		PRINTL [100] - 돌아간다
		BINPUT
		選択カード = RESULT
		;돌아간다
		IF 選択カード != 100
			選択カード -= 500
			CALL CARD_UI_RESET
			確認듀얼리스트 = 자신
			確認ゾーン = 제외
			確認場所 = 選択カード
			フリー確認 = 1
			TRYCALLFORM CARD_UI(자신_제외:選択カード,2); 自由確認での자신제외確認（受け渡し必要：듀얼리스트情報のみ）
			PRINTL
			PRINTL [100] - 돌아간다
			BINPUT
			IF RESULT == 100
				PRINTL 
			ENDIF
		ENDIF
	ELSEIF RESULT == 804
		CUSTOMDRAWLINE —
		PRINTFORML 「（상대）제외 확인 화면」
		CUSTOMDRAWLINE —
		PRINTL
		FOR カウンタ,0,紙束最大値
			SIF 상대_제외:カウンタ == -1
				CONTINUE
			VARSET RESULT	
			CALL CARD_SETCOLOR("상대","제외",カウンタ)
			TRYCALLFORM CARDNAME_{상대_제외:カウンタ}, "名前"
			CALLFORM CARD_KANPRINT("상대제외",カウンタ + 2500,상대_제외:カウンタ)
			RESETCOLOR	
		NEXT
		CUSTOMDRAWLINE —
		PRINTL
		PRINTL [100] - 돌아간다
		BINPUT
		選択カード = RESULT
		;돌아간다
		IF 選択カード != 100
			選択カード -= 2500
			CALL CARD_UI_RESET
			確認듀얼리스트 = 상대
			確認ゾーン = 제외
			確認場所 = 選択カード
			フリー確認 = 1
			TRYCALLFORM CARD_UI(상대_제외:選択カード,2); 自由確認での상대제외確認（受け渡し必要：듀얼리스트情報のみ）
			RESETCOLOR	
			PRINTL
			PRINTL [100] - 돌아간다
			BINPUT
			IF RESULT == 100
				PRINTL 
			ENDIF
		ENDIF
	ELSEIF RESULT == 555
		$MACHINE_LOOP
		CUSTOMDRAWLINE —
		PRINTFORML 「머신 성능」　　Sp：「{자신_SpＣ,2}」
		CUSTOMDRAWLINE —
		PRINTFORML 라이딩 듀얼 사양：
		PRINTFORML ・게임을 개시할 때、설정된 섀시, 엔진, 부스트가 적용된다。
		PRINTFORML ・엔드 페이즈 시에 、상대의 스피드 카운터는 １늘어난다。
		PRINTFORML ・다이렉트 어택을 받은 플레이어의 스피드 카운터는 １줄어든다。
		CUSTOMDRAWLINE —
		PRINTL
		VARSET RESULT
		TRYCALLFORM CARDNAME_{자신_엔진}, "名前"
		PRINTFORML ENGINE[ 1] - %RESULTS%
		VARSET RESULT
		TRYCALLFORM CARDNAME_{자신_섀시}, "名前"
		PRINTFORML CHASIS[ 2] - %RESULTS%
		VARSET RESULT
		TRYCALLFORM CARDCAN_{자신_부스트}("자신",부스트起動,"")
		IF RESULT == 1 && 설정플래그 == 0
			SETCOLOR C_G_YELLOW
		ENDIF
		TRYCALLFORM CARDNAME_{자신_부스트}, "名前"
		PRINTFORML BOOST [ 3] - %RESULTS%
		RESETCOLOR

		CUSTOMDRAWLINE —
		PRINTL
		PRINTL [100] - 돌아간다
		BINPUT
		選択カード = RESULT
		;돌아간다
		IF 選択カード != 100
			IF 選択カード == 1
				CALL CARD_UI_RESET
				TRYCALLFORM CARD_UI(자신_엔진,2)
				RESETCOLOR	
				PRINTL
				PRINTL [100] - 돌아간다
				BINPUT
				IF RESULT == 100
					PRINTL 
					GOTO MACHINE_LOOP
				ENDIF
			ELSEIF 選択カード == 2
				CALL CARD_UI_RESET
				TRYCALLFORM CARD_UI(자신_섀시,2)
				RESETCOLOR	
				PRINTL
				PRINTL [100] - 돌아간다
				BINPUT
				IF RESULT == 100
					PRINTL 
					GOTO MACHINE_LOOP
				ENDIF
			ELSEIF 選択カード == 3
				CALL CARD_UI_RESET
				TRYCALLFORM CARD_UI(자신_부스트,2)
				TRYCALLFORM CARDCAN_{자신_부스트}("자신",부스트起動,"")
				IF RESULT == 1 && 설정플래그 == 0
					SETCOLOR C_G_YELLOW
					PRINT [3] - 효과발동
				ENDIF
				RESETCOLOR	
				PRINTL
				PRINTL [100] - 돌아간다
				BINPUT
				IF RESULT == 100
					PRINTL 
					GOTO MACHINE_LOOP
				ELSEIF RESULT == 3
					TRYCALLFORM CARDEFFECT_{자신_부스트}("자신",부스트起動,"")
					CALL CARD_FINAL(ターンプレイヤー)
				ENDIF
			ENDIF
		ENDIF


	ELSEIF RESULT == 556
		$E_MACHINE_LOOP
		CUSTOMDRAWLINE —
		PRINTFORML 「상대 머신 성능」
		CUSTOMDRAWLINE —
		PRINTL
		VARSET RESULT
		TRYCALLFORM CARDNAME_{상대_엔진}, "名前"
		PRINTFORML ENGINE[ 1] - %RESULTS%
		VARSET RESULT
		TRYCALLFORM CARDNAME_{상대_섀시}, "名前"
		PRINTFORML CHASIS[ 2] - %RESULTS%
		VARSET RESULT
		TRYCALLFORM CARDNAME_{상대_부스트}, "名前"
		PRINTFORML BOOST [ 3] - %RESULTS%

		CUSTOMDRAWLINE —
		PRINTL
		PRINTL [100] - 돌아간다
		BINPUT
		選択カード = RESULT
		;돌아간다
		IF 選択カード != 100
			IF 選択カード == 1
				CALL CARD_UI_RESET
				TRYCALLFORM CARD_UI(상대_엔진,2)
				RESETCOLOR	
				PRINTL
				PRINTL [100] - 돌아간다
				BINPUT
				IF RESULT == 100
					PRINTL 
				ENDIF
			ELSEIF 選択カード == 2
				CALL CARD_UI_RESET
				TRYCALLFORM CARD_UI(상대_섀시,2)
				RESETCOLOR	
				PRINTL
				PRINTL [100] - 돌아간다
				BINPUT
				IF RESULT == 100
					PRINTL 
				ENDIF
			ELSEIF 選択カード == 3
				CALL CARD_UI_RESET
				TRYCALLFORM CARD_UI(상대_부스트,2)
				PRINTL
				PRINTL [100] - 돌아간다
				BINPUT
				IF RESULT == 100
					PRINTL 
				ENDIF
			ENDIF
			GOTO E_MACHINE_LOOP
		ENDIF

	;――――――――――――ターン進行――――――――――――
	ELSEIF RESULT == 700
		;GOTO INPUT_LOOP_ENEMY
		CALL ENEMYTURN_BASIC

	;――――――――――――EX덱確認――――――――――――
	ELSEIF RESULT == 800
		CALL CARD_EXDECK("자신")

	;――――――――――――バトルフェイズ移行――――――――――――
	ELSEIF RESULT == 900
		メインフェイズ = 0
		バトルフェイズ = 1
		バトルフェイズ移行 = 0
		CALL CARD_REACTION_EFFECT
		CALL RESET_FIELD_CONDITION(ターンプレイヤー,5,1)

		IF GETVAR(@"%ターンプレイヤー%_バトルスキップ") >= 1
			$INPUT_MAIN2
			SETVAR @"%ターンプレイヤー%_バトルスキップ", 0
			PRINTFORMW 『배틀 페이즈』는 생략 되었습니다。
			メインフェイズ = 1
			メインフェイズ２ = 1
			バトルフェイズ = 0
		ENDIF
		PRINTFORMW 『배틀 페이즈』
		CALL CARD_TIMERLOOP("バトル開始時")
		CALL CARD_FINAL(ターンプレイヤー);バトルフェイズ移行のフリーチェック
		IF バトル強制終了 == 1
			PRINTFORMW 배틀 페이즈가 강제종료 되었습니다。
			バトル強制終了 = 0
			メインフェイズ = 1
			メインフェイズ２ = 1
			バトルフェイズ = 0
		ENDIF
	ELSEIF RESULT == 950
		CALL CARD_CHECK_ATK_ABLE("자신")
		IF ターンプレイヤー == "자신" && メインフェイズ２ != 1
			IF RESULT == 2
				CUSTOMDRAWLINE —
				PRINTL
				PRINTL 아직 공격하지 않은 전투광이 된 몬스터가 존재하고 있습니다。
				PRINTL
				CUSTOMDRAWLINE —
				PRINTW
			ELSEIF RESULT == 573
				CUSTOMDRAWLINE —
				PRINTL
				PRINTL 아직 공격하지 않은 몬스터가 존재합니다만 턴을 종료하시겠습니까？
				PRINTL
				CUSTOMDRAWLINE —
				PRINTL [0] - 예
				PRINTL [1] - 아니오
				BINPUT
				SIF RESULT == 1
					RETURN 0
			ENDIF
		ENDIF
		バトルフェイズ = 0
		メインフェイズ = 1
		メインフェイズ２ = 1
		メインフェイズ２移行 = 0
		CALL CARD_REACTION_EFFECT
		CALL RESET_FIELD_CONDITION(ターンプレイヤー,5,1)
		PRINTFORMW 『메인 페이즈２』
		CALL CARD_TIMERLOOP("バトル終了時")
		CALL CARD_FINAL(ターンプレイヤー);メインフェイズ２移行のフリーチェック


	;――――――――――――ターン終了――――――――――――
	ELSEIF RESULT == 1000
		CALL CARD_REACTION_EFFECT
		CALL CARD_CHECK_ATK_ABLE("자신")
		IF ターンプレイヤー == "자신" && メインフェイズ２ != 1
			IF RESULT == 2
				CUSTOMDRAWLINE —
				PRINTL
				PRINTL 아직 공격하지 않은 전투광이 된 몬스터가 존재하고 있습니다。
				PRINTL
				CUSTOMDRAWLINE —
				PRINTW
			ELSEIF RESULT == 573
				CUSTOMDRAWLINE —
				PRINTL
				PRINTL 아직 공격하지 않은 몬스터가 존재합니다만 턴을 종료하시겠습니까？
				PRINTL
				CUSTOMDRAWLINE —
				PRINTL [0] - 예
				PRINTL [1] - 아니오
				BINPUT
				SIF RESULT == 1
					RETURN 0
			ENDIF
		ENDIF
		
		CALL CARD_ENDPHASE
		RETURN 1000
	ELSEIF RESULT == 1100
		$INPUT_LOOP_OPCHECK
		IF OPPOSER != -1
			CALL PRINT_STATE(OPPOSER,3)
			IF 상대_接可 >= 1 || オプション_いつでも触れる == 1
				SETCOLOR C_PINK
				PRINT [69] - 상대 플레이어를 만진다
				RESETCOLOR
			ENDIF
		ELSE
			PRINTFORML 【랜덤한 플레이어】
		ENDIF
		PRINTL
		IF 상대_薬Ｃ > 0
			SETCOLOR C_FUSE_PUR
			RESULTS = 【약물カウンタ】:{상대_薬Ｃ}
			PRINTBUTTON @"%RESULTS,12,LEFT%", 9071
			RESETCOLOR
		ENDIF
		PRINTL
		PRINTL [100] - 돌아간다
		BINPUT
		IF RESULT == 100
			PRINTL 
		ELSEIF RESULT == 69
			CALL CARD_REACT("자신",OPPOSER,"プレイヤー")
			GOTO INPUT_LOOP_OPCHECK
		ELSEIF 9010
			CALL PRINT_STATE_DUEL(NO:OPPOSER,2,1)
			WAIT
		ELSEIF 9011
			CALL PRINT_STATE_DUEL(NO:OPPOSER,2)
			WAIT
		ELSEIF RESULT == 9071
			PRINTFORML 【드러그 카운터】:{상대_薬Ｃ}
			PRINTL 약에 대한 중독도・오염도。
			PRINTL 
			PRINTW
			GOTO INPUT_LOOP_OPCHECK
		ENDIF
	ELSEIF RESULT == 1101
		$INPUT_LOOP_MASCHECK
		CALL PRINT_STATE(MASTER,3)
		PRINTL
		IF 상대_薬Ｃ > 0
			SETCOLOR C_FUSE_PUR
			RESULTS = 【약물 카운터】:{자신_薬Ｃ}
			PRINTBUTTON @"%RESULTS,12,LEFT%", 9071
			RESETCOLOR
		ENDIF
		PRINTL
		PRINTL [100] - 돌아간다
		BINPUT
		IF RESULT == 100
			PRINTL 
		ELSEIF RESULT == 69
			CALL CARD_REACT("자신",OPPOSER,"プレイヤー")
			GOTO INPUT_LOOP_OPCHECK
		ELSEIF RESULT == 9071
			PRINTFORML 【드러그 카운터】:{상대_薬Ｃ}
			PRINTL 약에 대한 중독도・오염도。
			PRINTL 
			PRINTW
			GOTO INPUT_LOOP_MASCHECK
		ENDIF
	;――――――――――――リセット処理――――――――――――
	ELSEIF RESULT == 9006
		RETURN 9006
	ELSEIF RESULT == 9999
		;PRINTFORML チェック！確認終了 효과条件名前:%효과条件名前%　素材条件종류:{素材条件종류}
		RETURN 9999		
	ENDIF
;	RETURN RESULT
ENDIF
RETURN -1




