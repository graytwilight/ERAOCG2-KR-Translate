;プレイヤーが受ける효과
@RESET_CONT_STATUS
#DIMS DYNAMIC 듀얼리스트
#DIM DYNAMIC カウンタ
#DIM DYNAMIC カウンタB
#DIMS DYNAMIC 対面者

#DIM DYNAMIC 캐릭터番号
#DIM DYNAMIC カードID
#DIM DYNAMIC 설정場所
#DIM DYNAMIC 성별판정
#DIM DYNAMIC 実성별판정
#DIM DYNAMIC カード_ID

듀얼리스트 = %ターンプレイヤー%
CALL 対面者판정(듀얼리스트)
対面者 = %RESULTS%
$INPUT_LOOP

SIF GETVAR(@"%듀얼리스트%_SpＣ") >= 4
	SETVAR @"%듀얼리스트%_SpＣ", 4

SIF GETVAR(@"%듀얼리스트%_SpＣ") <= 0
	SETVAR @"%듀얼리스트%_SpＣ", 0

SIF GETVAR(@"%듀얼리스트%_ADV불가") == 3
	SETVAR @"%듀얼리스트%_ADV불가", 0
SIF GETVAR(@"%듀얼리스트%_SS阻害状態") == 3
	SETVAR @"%듀얼리스트%_SS阻害状態", 0
SIF GETVAR(@"%듀얼리스트%_光阻害状態") == 3
	SETVAR @"%듀얼리스트%_光阻害状態", 0

SIF GETVAR(@"%듀얼리스트%_묘지_無効") == 3
	SETVAR @"%듀얼리스트%_묘지_無効", 0
SIF GETVAR(@"%듀얼리스트%_묘지_無効") == 3
	SETVAR @"%듀얼리스트%_묘지_無効", 0

SIF GETVAR(@"%듀얼리스트%_묘지_モン無効") == 3
	SETVAR @"%듀얼리스트%_묘지_モン無効", 0
SIF GETVAR(@"%듀얼리스트%_묘지_モン無効") == 3
	SETVAR @"%듀얼리스트%_묘지_モン無効", 0

SIF GETVAR(@"%듀얼리스트%_제외_無効") == 3
	SETVAR @"%듀얼리스트%_제외_無効", 0

SIF GETVAR(@"%듀얼리스트%_효과ダメージ無効") == 3
	SETVAR @"%듀얼리스트%_효과ダメージ無効", 0

SIF GETVAR(@"%듀얼리스트%_효과ダメージ反射") == 3
	SETVAR @"%듀얼리스트%_효과ダメージ反射", 0

SIF GETVAR(@"%듀얼리스트%_ぺギア") == 3
	SETVAR @"%듀얼리스트%_ぺギア", 0
SIF GETVAR(@"%듀얼리스트%_アザミナ呪") == 3
	SETVAR @"%듀얼리스트%_アザミナ呪", 0
SIF GETVAR(@"%듀얼리스트%_モン阻害") == 3
	SETVAR @"%듀얼리스트%_モン阻害", 0
SIF GETVAR(@"%듀얼리스트%_超雷龍효과") == 3
	SETVAR @"%듀얼리스트%_超雷龍효과", 0


SIF GETVAR(@"%듀얼리스트%_速魔阻害") == 3
	SETVAR @"%듀얼리스트%_速魔阻害", 0
SIF GETVAR(@"%듀얼리스트%_通함정阻害") == 3
	SETVAR @"%듀얼리스트%_通함정阻害", 0
SIF GETVAR(@"%듀얼리스트%_永함정阻害") == 3
	SETVAR @"%듀얼리스트%_永함정阻害", 0
SIF GETVAR(@"%듀얼리스트%_물属阻害") == 3
	SETVAR @"%듀얼리스트%_물属阻害", 0
SIF GETVAR(@"%듀얼리스트%_특수阻害中止") == 3
	SETVAR @"%듀얼리스트%_특수阻害中止", 0

SIF GETVAR(@"%듀얼리스트%_単体攻撃") == 3
	SETVAR @"%듀얼리스트%_単体攻撃", 0

SIF GETVAR(@"%듀얼리스트%_魔香효과") == 3
	SETVAR @"%듀얼리스트%_魔香효과", 0

SIF GETVAR(@"%듀얼리스트%_逆魔香효과") == 3
	SETVAR @"%듀얼리스트%_逆魔香효과", 0

SIF GETVAR(@"%듀얼리스트%_마법制限") == 3
	SETVAR @"%듀얼리스트%_마법制限", 0

SIF GETVAR(@"%듀얼리스트%_登場時無効") == 3
	SETVAR @"%듀얼리스트%_登場時無効", 0

SIF GETVAR(@"%듀얼리스트%_제외置換") == 3
	SETVAR @"%듀얼리스트%_제외置換", 0
SIF GETVAR(@"%듀얼리스트%_땅제외置換") == 3
	SETVAR @"%듀얼리스트%_땅제외置換", 0
SIF GETVAR(@"%듀얼리스트%_魔제외置換") == 3
	SETVAR @"%듀얼리스트%_魔제외置換", 0
SIF GETVAR(@"%듀얼리스트%_空제외置換") == 3
	SETVAR @"%듀얼리스트%_空제외置換", 0
SIF GETVAR(@"%듀얼리스트%_제외NG置換") == 3
	SETVAR @"%듀얼리스트%_제외NG置換", 0
SIF GETVAR(@"%듀얼리스트%_ドロー불가") == 3
	SETVAR @"%듀얼리스트%_ドロー불가", 0

SIF GETVAR(@"%듀얼리스트%_FUS효과無効") == 3
	SETVAR @"%듀얼리스트%_FUS효과無効", 0
SIF GETVAR(@"%듀얼리스트%_SYN효과無効") == 3
	SETVAR @"%듀얼리스트%_SYN효과無効", 0
SIF GETVAR(@"%듀얼리스트%_XYZ효과無効") == 3
	SETVAR @"%듀얼리스트%_XYZ효과無効", 0
SIF GETVAR(@"%듀얼리스트%_LIN효과無効") == 3
	SETVAR @"%듀얼리스트%_LIN효과無効", 0
SIF GETVAR(@"%듀얼리스트%_モン효과無効") == 3
	SETVAR @"%듀얼리스트%_モン효과無効", 0



SIF GETVAR(@"%듀얼리스트%_마함無効") == 3
	SETVAR @"%듀얼리스트%_마함無効", 0
SIF GETVAR(@"%듀얼리스트%_魔無効") == 3
	SETVAR @"%듀얼리스트%_魔無効", 0
SIF GETVAR(@"%듀얼리스트%_함정無効") == 3
	SETVAR @"%듀얼리스트%_함정無効", 0
SIF GETVAR(@"%듀얼리스트%_通常無効") == 3
	SETVAR @"%듀얼리스트%_通常無効", 0
SIF GETVAR(@"%듀얼리스트%_逆通常無効") == 3
	SETVAR @"%듀얼리스트%_逆通常無効", 0

SIF GETVAR(@"%듀얼리스트%_SS소환禁止마함") == 3
	SETVAR @"%듀얼리스트%_SS소환禁止마함", 0

SIF GETVAR(@"%듀얼리스트%_SS소환禁止손패") == 3
	SETVAR @"%듀얼리스트%_SS소환禁止손패", 0

SIF GETVAR(@"%듀얼리스트%_SS소환禁止묘지") == 3
	SETVAR @"%듀얼리스트%_SS소환禁止묘지", 0

SIF GETVAR(@"%듀얼리스트%_SS소환禁止덱") == 3
	SETVAR @"%듀얼리스트%_SS소환禁止덱", 0

SIF GETVAR(@"%듀얼리스트%_SS소환禁止EX덱") == 3
	SETVAR @"%듀얼리스트%_SS소환禁止EX덱", 0

SIF GETVAR(@"%듀얼리스트%_SS소환禁止제외") == 3
	SETVAR @"%듀얼리스트%_SS소환禁止제외", 0

SIF GETVAR(@"%듀얼리스트%_レベル５制限") == 3
	SETVAR @"%듀얼리스트%_レベル５制限", 0

SIF GETVAR(@"%듀얼리스트%_튜너制限") == 3
	SETVAR @"%듀얼리스트%_튜너制限", 0

SIF GETVAR(@"%듀얼리스트%_ドロー倍化") == 3
	SETVAR @"%듀얼리스트%_ドロー倍化", 0

SIF GETVAR(@"%듀얼리스트%_ドロースキップ") == 3
	SETVAR @"%듀얼리스트%_ドロースキップ", 0

SETVAR @"%듀얼리스트%_カテ阻害", ""
SETVAR @"%듀얼리스트%_フィールド名", ""

IF 듀얼리스트 == ターンプレイヤー
	듀얼리스트 = %対面者%
	CALL 対面者판정(듀얼리스트)
	対面者 = %RESULTS%
	GOTO INPUT_LOOP
ENDIF

;無効状態 이외의 지속효과のリセット
@RESET_CONT_EFFECT
#DIMS DYNAMIC 듀얼리스트
#DIM DYNAMIC カウンタ
#DIM DYNAMIC カウンタB
#DIMS DYNAMIC 対面者

#DIM DYNAMIC 캐릭터番号
#DIM DYNAMIC カードID
#DIM DYNAMIC 설정場所
#DIM DYNAMIC 성별판정
#DIM DYNAMIC 実성별판정
#DIM DYNAMIC カード_ID
#DIM DYNAMIC 装備先場所

듀얼리스트 = %ターンプレイヤー%
CALL 対面者판정(듀얼리스트)
対面者 = %RESULTS%

$INPUT_LOOP

FOR カウンタ,0,5
	IF GETVAR(@"%듀얼리스트%_필드:カウンタ") == -1
		SETVAR @"%듀얼리스트%_MZ_表:カウンタ", 0
		SETVAR @"%듀얼리스트%_MZ_Ｘ:カウンタ", -1
		SETVAR @"%듀얼리스트%_MZ_戦:カウンタ", -1
		SETVAR @"%듀얼리스트%_MZ_個ID:カウンタ", -1
		SETVAR @"%듀얼리스트%_MZ_戦済:カウンタ", 0
		SETVAR @"%듀얼리스트%_MZ_召種:カウンタ", 0
		SETVAR @"%듀얼리스트%_MZ_T1召種:カウンタ", 0
		SETVAR @"%듀얼리스트%_MZ_召酔:カウンタ", 0

		SETVAR @"%듀얼리스트%_MZ_効済:カウンタ", 0
		SETVAR @"%듀얼리스트%_MZ_効発:カウンタ", 0
		SETVAR @"%듀얼리스트%_MZ_表変:カウンタ", 0
		SETVAR @"%듀얼리스트%_MZ_一時:カウンタ", 0

		;耐性효과
		SETVAR @"%듀얼리스트%_MZ_破耐:カウンタ", 0
		SETVAR @"%듀얼리스트%_MZ_戦耐:カウンタ", 0
		SETVAR @"%듀얼리스트%_MZ_対耐:カウンタ", 0
		SETVAR @"%듀얼리스트%_MZ_無差耐:カウンタ", 0

		SETVAR @"%듀얼리스트%_MZ_モ耐:カウンタ", 0
		SETVAR @"%듀얼리스트%_MZ_魔耐:カウンタ", 0
		SETVAR @"%듀얼리스트%_MZ_함정耐:カウンタ", 0
		SETVAR @"%듀얼리스트%_MZ_忠実:カウンタ", 0

		SETVAR @"%듀얼리스트%_MZ_一破:カウンタ", 0
		SETVAR @"%듀얼리스트%_MZ_一破済:カウンタ", 0

		
		;デメリット효과
		SETVAR @"%듀얼리스트%_MZ_表固:カウンタ", 0
		SETVAR @"%듀얼리스트%_MZ_不材:カウンタ", 0
		SETVAR @"%듀얼리스트%_MZ_除処:カウンタ", 0

		;戦闘系효과의 효과
		SETVAR @"%듀얼리스트%_MZ_戦無:カウンタ", 0
		SETVAR @"%듀얼리스트%_MZ_直無:カウンタ", 0
		SETVAR @"%듀얼리스트%_MZ_単攻:カウンタ", 0
		SETVAR @"%듀얼리스트%_MZ_戦狂:カウンタ", 0
		SETVAR @"%듀얼리스트%_MZ_追戦:カウンタ", 0
		SETVAR @"%듀얼리스트%_MZ_連戦:カウンタ", 0
		SETVAR @"%듀얼리스트%_MZ_守戦:カウンタ", 0
		SETVAR @"%듀얼리스트%_MZ_戦除:カウンタ", 0	;ザポルグ追記20241227

		SETVAR @"%듀얼리스트%_MZ_攻誘:カウンタ", 0
		SETVAR @"%듀얼리스트%_MZ_攻避:カウンタ", 0

		SETVAR @"%듀얼리스트%_MZ_貫通:カウンタ", 0
		SETVAR @"%듀얼리스트%_MZ_直攻:カウンタ", 0

		;효과阻害
		SETVAR @"%듀얼리스트%_MZ_阻害:カウンタ", 0
		SETVAR @"%듀얼리스트%_MZ_戦阻:カウンタ", 0

		;カウンタ系
		SETVAR @"%듀얼리스트%_MZ_魔Ｃ:カウンタ", 0
		SETVAR @"%듀얼리스트%_MZ_個Ｃ:カウンタ", 0
		SETVAR @"%듀얼리스트%_MZ_悪Ｃ:カウンタ", 0
		SETVAR @"%듀얼리스트%_MZ_汎数:カウンタ", 0
		SETVAR @"%듀얼리스트%_MZ_T1汎数:カウンタ", 0
		SETVAR @"%듀얼리스트%_MZ_リ数:カウンタ", 0

		;R-18효과
		SETVAR @"%듀얼리스트%_MZ_接可:カウンタ", 0
		SETVAR @"%듀얼리스트%_MZ_조교:カウンタ", 0
		SETVAR @"%듀얼리스트%_MZ_薬Ｃ:カウンタ", 0
		SETVAR @"%듀얼리스트%_MZ_発情:カウンタ", 0
		SETVAR @"%듀얼리스트%_MZ_가슴追:カウンタ", 0
		SETVAR @"%듀얼리스트%_MZ_服状:カウンタ", 0
		SETVAR @"%듀얼리스트%_MZ_言発:カウンタ", 0 ;Anonym追記

		;ステータス変動（지속）
		SETVAR @"%듀얼리스트%_MZ_永星:カウンタ", 0
		SETVAR @"%듀얼리스트%_MZ_永属:カウンタ", 0
		SETVAR @"%듀얼리스트%_MZ_永種:カウンタ", 0
		SETVAR @"%듀얼리스트%_MZ_永Ｔ:カウンタ", 0
		SETVAR @"%듀얼리스트%_MZ_永性:カウンタ", 0 ;ザポルグ追記20250218

		SETVAR @"%듀얼리스트%_MZ_永攻:カウンタ", 0
		SETVAR @"%듀얼리스트%_MZ_永守:カウンタ", 0
		SETVAR @"%듀얼리스트%_MZ_攻固:カウンタ", -1
		SETVAR @"%듀얼리스트%_MZ_MAX成立:カウンタ", 0

		SETVAR @"%듀얼리스트%_MZ_追カテ:カウンタ", ""
		SETVAR @"%듀얼리스트%_MZ_追カテ2:カウンタ", ""
		SETVAR @"%듀얼리스트%_MZ_改名:カウンタ", ""

		;ステータス変動（一時）
		SETVAR @"%듀얼리스트%_MZ_一星:カウンタ", 0
		SETVAR @"%듀얼리스트%_MZ_一属:カウンタ", 0
		SETVAR @"%듀얼리스트%_MZ_一種:カウンタ", 0
		SETVAR @"%듀얼리스트%_MZ_一Ｔ:カウンタ", 0
		SETVAR @"%듀얼리스트%_MZ_一攻:カウンタ", 0
		SETVAR @"%듀얼리스트%_MZ_一守:カウンタ", 0

		SETVAR @"%듀얼리스트%_MZ_二攻:カウンタ", 0
		;その他
		SETVAR @"%듀얼리스트%_MZ_条達:カウンタ", 0
		SETVAR @"%듀얼리스트%_MZ_終処:カウンタ", 0
		SETVAR @"%듀얼리스트%_MZ_終戦:カウンタ", 0
		SETVAR @"%듀얼리스트%_MZ_束縛:カウンタ", -1
		SETVAR @"%듀얼리스트%_MZ_所有:カウンタ", 0

		SETVAR @"%듀얼리스트%_MZ_특수状態:カウンタ", 0
		SETVAR @"%듀얼리스트%_MZ_変化元ID:カウンタ", -1
	ENDIF



	;耐性효과
	SIF GETVAR(@"%듀얼리스트%_MZ_破耐:カウンタ") == 3
		SETVAR @"%듀얼리스트%_MZ_破耐:カウンタ", 0	
	SIF GETVAR(@"%듀얼리스트%_MZ_戦耐:カウンタ") == 3
		SETVAR @"%듀얼리스트%_MZ_戦耐:カウンタ", 0
	SIF GETVAR(@"%듀얼리스트%_MZ_対耐:カウンタ") == 3
		SETVAR @"%듀얼리스트%_MZ_対耐:カウンタ", 0
	SIF GETVAR(@"%듀얼리스트%_MZ_無差耐:カウンタ") == 3
		SETVAR @"%듀얼리스트%_MZ_無差耐:カウンタ", 0

	SIF GETVAR(@"%듀얼리스트%_MZ_モ耐:カウンタ") == 3
		SETVAR @"%듀얼리스트%_MZ_モ耐:カウンタ", 0
	SIF GETVAR(@"%듀얼리스트%_MZ_魔耐:カウンタ") == 3
		SETVAR @"%듀얼리스트%_MZ_魔耐:カウンタ", 0
	SIF GETVAR(@"%듀얼리스트%_MZ_함정耐:カウンタ") == 3
		SETVAR @"%듀얼리스트%_MZ_함정耐:カウンタ", 0

	SIF GETVAR(@"%듀얼리스트%_MZ_一破:カウンタ") == 3
		SETVAR @"%듀얼리스트%_MZ_一破:カウンタ", 0	

	;デメリット효과
	SIF GETVAR(@"%듀얼리스트%_MZ_表固:カウンタ") == 3
		SETVAR @"%듀얼리스트%_MZ_表固:カウンタ", 0
	SIF GETVAR(@"%듀얼리스트%_MZ_不材:カウンタ") == 3
		SETVAR @"%듀얼리스트%_MZ_不材:カウンタ", 0

	;戦闘系효과의 효과
	SIF GETVAR(@"%듀얼리스트%_MZ_戦無:カウンタ") == 3
		SETVAR @"%듀얼리스트%_MZ_戦無:カウンタ", 0
	SIF GETVAR(@"%듀얼리스트%_MZ_直無:カウンタ") == 3
		SETVAR @"%듀얼리스트%_MZ_直無:カウンタ", 0

	SIF GETVAR(@"%듀얼리스트%_MZ_単攻:カウンタ") == 3
		SETVAR @"%듀얼리스트%_MZ_単攻:カウンタ", 0
	SIF GETVAR(@"%듀얼리스트%_MZ_戦狂:カウンタ") == 3
		SETVAR @"%듀얼리스트%_MZ_戦狂:カウンタ", 0
	SIF GETVAR(@"%듀얼리스트%_MZ_追戦:カウンタ") >= 1
		SETVAR @"%듀얼리스트%_MZ_追戦:カウンタ", 0
	SIF GETVAR(@"%듀얼리스트%_MZ_連戦:カウンタ") == 3
		SETVAR @"%듀얼리스트%_MZ_連戦:カウンタ", 0
	SIF GETVAR(@"%듀얼리스트%_MZ_守戦:カウンタ") == 3
		SETVAR @"%듀얼리스트%_MZ_守戦:カウンタ", 0
	SIF GETVAR(@"%듀얼리스트%_MZ_戦除:カウンタ") == 3	;ザポルグ追記20241227
		SETVAR @"%듀얼리스트%_MZ_戦除:カウンタ", 0

	SIF GETVAR(@"%듀얼리스트%_MZ_攻誘:カウンタ") == 3
		SETVAR @"%듀얼리스트%_MZ_攻誘:カウンタ", 0
	SIF GETVAR(@"%듀얼리스트%_MZ_攻避:カウンタ") == 3
		SETVAR @"%듀얼리스트%_MZ_攻避:カウンタ", 0

	SIF GETVAR(@"%듀얼리스트%_MZ_貫通:カウンタ") == 3
		SETVAR @"%듀얼리스트%_MZ_貫通:カウンタ", 0
	SIF GETVAR(@"%듀얼리스트%_MZ_直攻:カウンタ") == 3
		SETVAR @"%듀얼리스트%_MZ_直攻:カウンタ", 0

	SIF GETVAR(@"%듀얼리스트%_MZ_MAX成立:カウンタ") == 3
		SETVAR @"%듀얼리스트%_MZ_MAX成立:カウンタ", 0

	;효과阻害
	SIF GETVAR(@"%듀얼리스트%_MZ_阻害:カウンタ") == 3
		SETVAR @"%듀얼리스트%_MZ_阻害:カウンタ", 0
	SIF GETVAR(@"%듀얼리스트%_MZ_戦阻:カウンタ") == 3
		SETVAR @"%듀얼리스트%_MZ_戦阻:カウンタ", 0
	SIF GETVAR(@"%듀얼리스트%_MZ_接可:カウンタ") == 3
		SETVAR @"%듀얼리스트%_MZ_接可:カウンタ", 0
NEXT

FOR カウンタ,0,5
	IF GETVAR(@"%듀얼리스트%_마함:カウンタ") == -1
		SETVAR @"%듀얼리스트%_魔_表:カウンタ", 0
		SETVAR @"%듀얼리스트%_魔_所有:カウンタ", 0
		SETVAR @"%듀얼리스트%_魔_装:カウンタ", 5
		SETVAR @"%듀얼리스트%_魔_武種:カウンタ", 0

		SETVAR @"%듀얼리스트%_魔_破耐:カウンタ", 0
		SETVAR @"%듀얼리스트%_魔_対耐:カウンタ", 0
		SETVAR @"%듀얼리스트%_魔_阻害:カウンタ", 0
		SETVAR @"%듀얼리스트%_魔_効済:カウンタ", 0
		;カウンタ系
		SETVAR @"%듀얼리스트%_魔_汎数:カウンタ", 0
		SETVAR @"%듀얼리스트%_魔_T1汎数:カウンタ", 0
		SETVAR @"%듀얼리스트%_魔_リ数:カウンタ", 0
		SETVAR @"%듀얼리스트%_魔_魔Ｃ:カウンタ", 0
		SETVAR @"%듀얼리스트%_魔_個Ｃ:カウンタ", 0
		SETVAR @"%듀얼리스트%_魔_悪Ｃ:カウンタ", 0
		SETVAR @"%듀얼리스트%_魔_薬Ｃ:カウンタ", 0
		SETVAR @"%듀얼리스트%_魔_発無:カウンタ", 0
		SETVAR @"%듀얼리스트%_魔_終処:カウンタ", 0

		SETVAR @"%듀얼리스트%_魔_一破:カウンタ", 0
		SETVAR @"%듀얼리스트%_魔_一破済:カウンタ", 0
		SETVAR @"%듀얼리스트%_魔_追カテ:カウンタ", ""
		SETVAR @"%듀얼리스트%_魔_追カテ2:カウンタ", ""
		SETVAR @"%듀얼리스트%_魔_改名:カウンタ", ""
		SETVAR @"%듀얼리스트%_魔_除処:カウンタ", 0
		SETVAR @"%듀얼리스트%_魔_変化元ID:カウンタ", -1
	ELSE
		SIF GETVAR(@"%듀얼리스트%_魔_表:カウンタ") >= 2
			SETVAR @"%듀얼리스트%_魔_装:カウンタ", 5
	ENDIF
	SIF GETVAR(@"%듀얼리스트%_魔_破耐:カウンタ") == 3
		SETVAR @"%듀얼리스트%_魔_破耐:カウンタ", 0	
	SIF GETVAR(@"%듀얼리스트%_魔_対耐:カウンタ") == 3
		SETVAR @"%듀얼리스트%_魔_対耐:カウンタ", 0	
	SIF GETVAR(@"%듀얼리스트%_魔_阻害:カウンタ") == 3
		SETVAR @"%듀얼리스트%_魔_阻害:カウンタ", 0
	SIF GETVAR(@"%듀얼리스트%_魔_一破:カウンタ") == 3
		SETVAR @"%듀얼리스트%_魔_一破:カウンタ", 0
NEXT

FOR カウンタ,0,紙束最大値
	IF GETVAR(@"%듀얼리스트%_제외:カウンタ") == -1
		SETVAR @"%듀얼리스트%_除_帰還:カウンタ", 0
		SETVAR @"%듀얼리스트%_除_変化元ID:カウンタ", 0
	ENDIF
NEXT

;その他いろいろな処理―――――――――――――――――――――――――――――
;戦闘中のカードリセット―――――――――――――――――――――――――――――
IF 戦闘場所(듀얼리스트) != 5
	SIF 戦闘カードID(듀얼리스트) == -1
		SETVAR @"%듀얼리스트%_戦闘カード", 5
ENDIF
;装備カードの破壊処理―――――――――――――――――――――――――――――
FOR カウンタ,0,5
	TRYCALLFORM CARD_{GETVAR(@"%듀얼리스트%_마함:カウンタ")}("分割")
	IF RESULT == 크로스기어
		IF GETVAR(@"%듀얼리스트%_魔_装:カウンタ") >= 6
			IF GETVAR(@"%対面者%_필드:((%듀얼리스트%_魔_装:カウンタ) - 6)") == -1 && GETVAR(@"%듀얼리스트%_魔_表:カウンタ") == 1
				SETVAR @"%듀얼리스트%_魔_装:カウンタ", 5
			ENDIF
		ELSEIF GETVAR(@"%듀얼리스트%_魔_装:カウンタ") <= 4
			IF GETVAR(@"%듀얼리스트%_필드:(%듀얼리스트%_魔_装:カウンタ)") == -1 && GETVAR(@"%듀얼리스트%_魔_表:カウンタ") == 1
				SETVAR @"%듀얼리스트%_魔_装:カウンタ", 5
			ENDIF
		ENDIF
	ELSE
		IF  GETVAR(@"%듀얼리스트%_魔_表:カウンタ") == 1
			装備先場所 =  GETVAR(@"%듀얼리스트%_魔_装:カウンタ")
			;PRINTFORML 装備先:{装備先場所}
			IF 装備先場所 >= 6
				装備先場所 = 装備先場所 - 6
				;PRINTFORML 決：%듀얼리스트%・対：%対面者%　装備カードID:{GETVAR(@"%対面者%_필드:装備先場所")}
				IF GETVAR(@"%対面者%_필드:装備先場所") == -1
					PRINTFORML 【장착 대상 없음】
					CALL CARD_DISPOSE(듀얼리스트,"마함",カウンタ,絶対破壊行き)
				ENDIF
			ELSEIF 装備先場所 <= 4
				IF GETVAR(@"%듀얼리스트%_필드:装備先場所") == -1
					PRINTFORML 【장착 대상 없음】
					CALL CARD_DISPOSE(듀얼리스트,"마함",カウンタ,絶対破壊行き)
				ENDIF
			ENDIF
		ENDIF

	ENDIF
NEXT

;使用불가존의 소멸―――――――――――――――――――――――――――――
FOR カウンタ,0,5
	SIF GETVAR(@"%듀얼리스트%_필드:カウンタ") == -1
		CONTINUE
	SIF GETVAR(@"%듀얼리스트%_필드:カウンタ") != 使用불가ゾーン
		CONTINUE
	설정場所 = GETVAR(@"%듀얼리스트%_MZ_汎数:カウンタ")
	IF 설정場所 >= 6
		설정場所 -= 10
		SIF GETVAR(@"%対面者%_필드:설정場所") == -1
			SETVAR @"%듀얼리스트%_필드:カウンタ", -1
	ELSEIF 설정場所 <= 4
		SIF GETVAR(@"%対面者%_필드:설정場所") == -1
			SETVAR @"%듀얼리스트%_필드:カウンタ", -1
	ENDIF
NEXT

;単一存在の설정―――――――――――――――――――――――――――――
FOR カウンタ,0,5
	SIF GETVAR(@"%듀얼리스트%_필드:カウンタ") == -1
		CONTINUE
	SIF GETVAR(@"%듀얼리스트%_MZ_表:カウンタ") == 3
		CONTINUE
	VARSET カードID
	TRYCALLFORM CARD_{GETVAR(@"%듀얼리스트%_필드:カウンタ")}("単一存在")
	IF RESULT == 1
		カードID = GETVAR(@"%듀얼리스트%_필드:カウンタ")
		FOR カウンタB,0,5
			SIF カウンタB == カウンタ
				CONTINUE
			SIF GETVAR(@"%듀얼리스트%_필드:カウンタB") != カードID
				CONTINUE
			CALL CARD_DISPOSE(듀얼리스트,"필드",カウンタB,10)
		NEXT
	ENDIF
NEXT

FOR カウンタ,0,5
	SIF GETVAR(@"%듀얼리스트%_마함:カウンタ") == -1
		CONTINUE
	SIF GETVAR(@"%듀얼리스트%_魔_表:カウンタ") != 1
		CONTINUE
	VARSET カードID
	TRYCALLFORM CARD_{GETVAR(@"%듀얼리스트%_마함:カウンタ")}("単一存在")
	IF RESULT == 1
		カードID = GETVAR(@"%듀얼리스트%_마함:カウンタ")
		FOR カウンタB,0,5
			SIF カウンタB == カウンタ
				CONTINUE
			SIF GETVAR(@"%듀얼리스트%_마함:カウンタB") != カードID
				CONTINUE
			CALL CARD_DISPOSE(듀얼리스트,"마함",カウンタB,10)
		NEXT
	ENDIF
NEXT

;손패ステータスの설정(소환可能状態)―――――――――――――――――――――――――――――
FOR カウンタ,0,紙束最大値
	IF GETVAR(@"%듀얼리스트%_손패:カウンタ") == -1
		SETVAR @"%듀얼리스트%_手_召可:カウンタ", 0
		SETVAR @"%듀얼리스트%_手_公開:カウンタ", 0
	ENDIF
	SIF GETVAR(@"%듀얼리스트%_手_召可:カウンタ") >= 1
		SETVAR @"%듀얼리스트%_手_召可:カウンタ", 0
NEXT

IF 듀얼리스트 == ターンプレイヤー
	듀얼리스트 = %対面者%
	CALL 対面者판정(듀얼리스트)
	対面者 = %RESULTS%
	GOTO INPUT_LOOP
ENDIF

;基礎ステータスの설정リセット―――――――――――――――――――――――――――――
@RESET_CONT_BASIC
#DIMS DYNAMIC 듀얼리스트
#DIM DYNAMIC カウンタ
#DIM DYNAMIC カウンタB
#DIMS DYNAMIC 対面者

#DIM DYNAMIC 캐릭터番号
#DIM DYNAMIC カードID
#DIM DYNAMIC 설정場所
#DIM DYNAMIC 성별판정
#DIM DYNAMIC 実성별판정
#DIM DYNAMIC カード_ID

듀얼리스트 = %ターンプレイヤー%
CALL 対面者판정(듀얼리스트)
対面者 = %RESULTS%
$INPUT_LOOP

FOR カウンタ,0,5
	SETVAR @"%듀얼리스트%_MZ_ID:カウンタ", GETVAR(@"%듀얼리스트%_필드:カウンタ")
	TRYCALLFORM CARD_{GETVAR(@"%듀얼리스트%_필드:カウンタ")}, "攻撃力"
	SETVAR @"%듀얼리스트%_MZ_攻:カウンタ", RESULT
	TRYCALLFORM CARD_{GETVAR(@"%듀얼리스트%_필드:カウンタ")}, "守備力"
	SETVAR @"%듀얼리스트%_MZ_守:カウンタ", RESULT
	TRYCALLFORM CARD_{GETVAR(@"%듀얼리스트%_필드:カウンタ")}, "속성"
	SETVAR @"%듀얼리스트%_MZ_属:カウンタ", RESULT
	TRYCALLFORM CARD_{GETVAR(@"%듀얼리스트%_필드:カウンタ")}, "종족"
	SETVAR @"%듀얼리스트%_MZ_種:カウンタ", RESULT
	TRYCALLFORM CARD_{GETVAR(@"%듀얼리스트%_필드:カウンタ")}, "レベル"
	SETVAR @"%듀얼리스트%_MZ_星:カウンタ", RESULT
	TRYCALLFORM CARD_{GETVAR(@"%듀얼리스트%_필드:カウンタ")}, "튜너"
	SETVAR @"%듀얼리스트%_MZ_Ｔ:カウンタ", RESULT

	IF GETVAR(@"%듀얼리스트%_MZ_変化元ID:カウンタ") >= 1
		TRYCALLFORM CARD_{GETVAR(@"%듀얼리스트%_MZ_変化元ID:カウンタ")}, "성별"
	ELSE
		TRYCALLFORM CARD_{GETVAR(@"%듀얼리스트%_필드:カウンタ")}, "성별"
	ENDIF
	SETVAR @"%듀얼리스트%_MZ_性:カウンタ", RESULT
	IF オプション_성별
		캐릭터番号 = NO_TO_CHARANUM(GETVAR(@"%듀얼리스트%_필드:カウンタ"))
		IF 캐릭터番号 >= 1
			SETVAR @"%듀얼리스트%_MZ_性:カウンタ", TALENT:캐릭터番号:성별
		ENDIF
	ENDIF
NEXT


FOR カウンタ,0,5
	SETVAR @"%듀얼리스트%_魔_ID:カウンタ", GETVAR(@"%듀얼리스트%_마함:カウンタ")
NEXT

IF 듀얼리스트 == ターンプレイヤー
	듀얼리스트 = %対面者%
	CALL 対面者판정(듀얼리스트)
	対面者 = %RESULTS%
	GOTO INPUT_LOOP
ENDIF

;ステータスの설정リセット―――――――――――――――――――――――――――――
@RESET_CONT_ATK
#DIMS DYNAMIC 듀얼리스트
#DIM DYNAMIC カウンタ
#DIM DYNAMIC カウンタB
#DIMS DYNAMIC 対面者

#DIM DYNAMIC 캐릭터番号
#DIM DYNAMIC カードID
#DIM DYNAMIC 설정場所
#DIM DYNAMIC 성별판정
#DIM DYNAMIC 実성별판정
#DIM DYNAMIC カード_ID

듀얼리스트 = %ターンプレイヤー%
CALL 対面者판정(듀얼리스트)
対面者 = %RESULTS%
$INPUT_LOOP

FOR カウンタ,0,5
	SETVAR @"%듀얼리스트%_MZ_攻:カウンタ", GETVAR(@"%듀얼리스트%_MZ_攻:カウンタ") + GETVAR(@"%듀얼리스트%_MZ_二攻:カウンタ")

	SETVAR @"%듀얼리스트%_MZ_攻:カウンタ", GETVAR(@"%듀얼리스트%_MZ_攻:カウンタ") + GETVAR(@"%듀얼리스트%_MZ_一攻:カウンタ")
	SETVAR @"%듀얼리스트%_MZ_守:カウンタ", GETVAR(@"%듀얼리스트%_MZ_守:カウンタ") + GETVAR(@"%듀얼리스트%_MZ_一守:カウンタ")

	SETVAR @"%듀얼리스트%_MZ_攻:カウンタ", GETVAR(@"%듀얼리스트%_MZ_攻:カウンタ") + GETVAR(@"%듀얼리스트%_MZ_一時:カウンタ")
	SETVAR @"%듀얼리스트%_MZ_攻:カウンタ", GETVAR(@"%듀얼리스트%_MZ_攻:カウンタ") + GETVAR(@"%듀얼리스트%_MZ_永攻:カウンタ")
	SETVAR @"%듀얼리스트%_MZ_守:カウンタ", GETVAR(@"%듀얼리스트%_MZ_守:カウンタ") + GETVAR(@"%듀얼리스트%_MZ_永守:カウンタ")



	SIF GETVAR(@"%듀얼리스트%_MZ_攻固:カウンタ") != -1
		SETVAR @"%듀얼리스트%_MZ_攻:カウンタ", GETVAR(@"%듀얼리스트%_MZ_攻固:カウンタ")

	SIF GETVAR(@"%듀얼리스트%_MZ_永属:カウンタ") != 0
		SETVAR @"%듀얼리스트%_MZ_属:カウンタ", GETVAR(@"%듀얼리스트%_MZ_永属:カウンタ")

	SIF GETVAR(@"%듀얼리스트%_MZ_永種:カウンタ") != 0
		SETVAR @"%듀얼리스트%_MZ_種:カウンタ", GETVAR(@"%듀얼리스트%_MZ_永種:カウンタ")
	
	SIF GETVAR(@"%듀얼리스트%_MZ_永星:カウンタ") != 0
		SETVAR @"%듀얼리스트%_MZ_星:カウンタ", GETVAR(@"%듀얼리스트%_MZ_永星:カウンタ")

	SIF GETVAR(@"%듀얼리스트%_MZ_永Ｔ:カウンタ") != 0
		SETVAR @"%듀얼리스트%_MZ_Ｔ:カウンタ", GETVAR(@"%듀얼리스트%_MZ_永Ｔ:カウンタ")
	;ザポルグ追記20250218
	SIF GETVAR(@"%듀얼리스트%_MZ_永性:カウンタ") != 0
		SETVAR @"%듀얼리스트%_MZ_性:カウンタ", GETVAR(@"%듀얼리스트%_MZ_永性:カウンタ")

	SIF GETVAR(@"%듀얼리스트%_MZ_一星:カウンタ") != 0
		SETVAR @"%듀얼리스트%_MZ_星:カウンタ", GETVAR(@"%듀얼리스트%_MZ_一星:カウンタ")
	
	SIF GETVAR(@"%듀얼리스트%_MZ_一Ｔ:カウンタ")
		SETVAR @"%듀얼리스트%_MZ_Ｔ:カウンタ", GETVAR(@"%듀얼리스트%_MZ_一Ｔ:カウンタ")

	SIF GETVAR(@"%듀얼리스트%_MZ_一属:カウンタ") != 0
		SETVAR @"%듀얼리스트%_MZ_属:カウンタ", GETVAR(@"%듀얼리스트%_MZ_一属:カウンタ")

	SIF GETVAR(@"%듀얼리스트%_MZ_一種:カウンタ") != 0
		SETVAR @"%듀얼리스트%_MZ_種:カウンタ", GETVAR(@"%듀얼리스트%_MZ_一種:カウンタ")

	IF GETVAR(@"%듀얼리스트%_MZ_一性:カウンタ") != 0
		SETVAR @"%듀얼리스트%_MZ_性:カウンタ", GETVAR(@"%듀얼리스트%_MZ_一性:カウンタ")
	ENDIF
NEXT

;Anonym추가 뱅가드초차원用
FOR カウンタ,0,5
	SIF GETVAR(@"%듀얼리스트%_필드:カウンタ") == -1
		CONTINUE
	TRYCALLFORM CARD_{GETVAR(@"%듀얼리스트%_필드:カウンタ")}("종류")
	SIF !MATCH(RESULT,초차원)
		CONTINUE
	TRYCALLFORM CARDNAME_{GETVAR(@"%듀얼리스트%_필드:カウンタ")}("カテゴリ")
	SIF !MATCH(RESULTS,"뱅가드")
		CONTINUE
	SIF GETVAR(@"%듀얼리스트%_MZ_変化元ID:カウンタ") <= 0
		CONTINUE
	VARSET カード_ID
	カード_ID = GETVAR(@"%듀얼리스트%_MZ_変化元ID:カウンタ")
	TRYCALLFORM CARD_{カード_ID},"攻撃力"
	SETVAR @"%듀얼리스트%_MZ_攻:カウンタ", RESULT + GETVAR(@"%듀얼리스트%_MZ_攻:カウンタ")
	TRYCALLFORM CARD_{カード_ID},"守備力"
	SETVAR @"%듀얼리스트%_MZ_守:カウンタ", RESULT + GETVAR(@"%듀얼리스트%_MZ_守:カウンタ")
NEXT

FOR カウンタ,0,紙束最大値
	IF GETVAR(@"%듀얼리스트%_손패:カウンタ") == -1
		SETVAR @"%듀얼리스트%_手_一星:カウンタ", 0
		SETVAR @"%듀얼리스트%_手_永星:カウンタ", 0
	ENDIF
	SIF GETVAR(@"%듀얼리스트%_手_一星:カウンタ") >= 1
		SETVAR @"%듀얼리스트%_手_一星:カウンタ", 0
	SIF GETVAR(@"%듀얼리스트%_手_永星:カウンタ") >= 1
		SETVAR @"%듀얼리스트%_手_一星:カウンタ", GETVAR(@"%듀얼리스트%_手_一星:カウンタ") + GETVAR(@"%듀얼리스트%_手_永星:カウンタ")
NEXT


IF 듀얼리스트 == ターンプレイヤー
	듀얼리스트 = %対面者%
	CALL 対面者판정(듀얼리스트)
	対面者 = %RESULTS%
	GOTO INPUT_LOOP
ENDIF





@RESET_CONT_NEGATE
#DIMS DYNAMIC 듀얼리스트
#DIM DYNAMIC カウンタ
#DIM DYNAMIC カウンタB
#DIMS DYNAMIC 対面者
#DIM DYNAMIC 캐릭터番号
#DIM DYNAMIC カードID
#DIM DYNAMIC 설정場所
#DIM DYNAMIC 성별판정
#DIM DYNAMIC 実성별판정
#DIM DYNAMIC カード_ID

듀얼리스트 = %ターンプレイヤー%
CALL 対面者판정(듀얼리스트)
対面者 = %RESULTS%
$INPUT_LOOP

FOR カウンタ,0,5
	IF GETVAR(@"%듀얼리스트%_필드:カウンタ") == -1
		SETVAR @"%듀얼리스트%_MZ_無効:カウンタ", 0
		SETVAR @"%듀얼리스트%_MZ_発無:カウンタ", 0
	ENDIF
	SIF GETVAR(@"%듀얼리스트%_MZ_無効:カウンタ") == 3
		SETVAR @"%듀얼리스트%_MZ_無効:カウンタ", 0
	SIF GETVAR(@"%듀얼리스트%_MZ_発無:カウンタ") == 3
		SETVAR @"%듀얼리스트%_MZ_発無:カウンタ", 0
NEXT

FOR カウンタ,0,5
	IF GETVAR(@"%듀얼리스트%_마함:カウンタ") == -1
		SETVAR @"%듀얼리스트%_魔_無効:カウンタ", 0
	ENDIF
	SIF GETVAR(@"%듀얼리스트%_魔_無効:カウンタ") == 3
		SETVAR @"%듀얼리스트%_魔_無効:カウンタ", 0

	SIF GETVAR(@"%듀얼리스트%_魔_発無:カウンタ") == 3
		SETVAR @"%듀얼리스트%_魔_発無:カウンタ", 0
NEXT

IF 듀얼리스트 == ターンプレイヤー
	듀얼리스트 = %対面者%
	CALL 対面者판정(듀얼리스트)
	対面者 = %RESULTS%
	GOTO INPUT_LOOP
ENDIF
